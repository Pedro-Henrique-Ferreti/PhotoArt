/*! For license information please see app.js.LICENSE.txt */
(()=>{var t={247:()=>{const t=document.querySelector("footer#footer");t&&(t.querySelector(".year").innerHTML=(new Date).getFullYear())},831:(t,e,n)=>{"use strict";const r=JSON.parse('{"hosting":{"public":"public","site":"photoart-lab","ignore":["firebase.json","**/.*","**/node_modules/**"]},"apiKey":"AIzaSyCHH7Pz6m7ojni5_SXLQdDv0UOrr1yJQR4","authDomain":"photoart-9f830.firebaseapp.com","projectId":"photoart-9f830","storageBucket":"photoart-9f830.appspot.com","messagingSenderId":"505312937949","appId":"1:505312937949:web:55da59a4dde3eed523d834"}');var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create,Object.create;var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};Object.create,Object.create;function a(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=a(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function u(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function c(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}var h=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,l.prototype.create),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),l=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?f(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new h(i,s,r);return u},t}();function f(t,e){return t.replace(p,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var p=/\{\$([^}]+)}/g;function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function v(t,e){var n=new g(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782),i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var g=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=m),void 0===r.error&&(r.error=m),void 0===r.complete&&(r.complete=m);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function m(){}var y=function(){return(y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function b(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function w(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var _,E=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),I="[DEFAULT]",k=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=I);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new s;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=y({identifier:I,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:I})}catch(t){}try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=b(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=I),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var t;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(w(w([],b(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),b(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=I),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=void 0===e?I:e,r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(n);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:o,options:i})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===I?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:I:t},t}(),T=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new k(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function S(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var A,C=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(A||(A={}));var D,N={debug:A.DEBUG,verbose:A.VERBOSE,info:A.INFO,warn:A.WARN,error:A.ERROR,silent:A.SILENT},O=A.INFO,R=((_={})[A.DEBUG]="log",_[A.VERBOSE]="log",_[A.INFO]="info",_[A.WARN]="warn",_[A.ERROR]="error",_),P=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=R[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,S(["["+i+"]  "+t.name+":"],n))}},x=function(){function t(t){this.name=t,this._logLevel=O,this._logHandler=P,this._userLogHandler=null,C.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in A))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?N[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,S([this,A.DEBUG],t)),this._logHandler.apply(this,S([this,A.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,S([this,A.VERBOSE],t)),this._logHandler.apply(this,S([this,A.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,S([this,A.INFO],t)),this._logHandler.apply(this,S([this,A.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,S([this,A.WARN],t)),this._logHandler.apply(this,S([this,A.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,S([this,A.ERROR],t)),this._logHandler.apply(this,S([this,A.ERROR],t))},t}();function L(t){C.forEach((function(e){e.setLogLevel(t)}))}var M,F=((D={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",D["bad-app-name"]="Illegal App name: '{$appName}",D["duplicate-app"]="Firebase App named '{$appName}' already exists",D["app-deleted"]="Firebase App named '{$appName}' already deleted",D["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",D["invalid-log-argument"]="First argument to `onLog` must be null or a function.",D),U=new l("app","Firebase",F),V="@firebase/app",j="[DEFAULT]",B=((M={})[V]="fire-core",M["@firebase/analytics"]="fire-analytics",M["@firebase/auth"]="fire-auth",M["@firebase/database"]="fire-rtdb",M["@firebase/functions"]="fire-fn",M["@firebase/installations"]="fire-iid",M["@firebase/messaging"]="fire-fcm",M["@firebase/performance"]="fire-perf",M["@firebase/remote-config"]="fire-rc",M["@firebase/storage"]="fire-gcs",M["@firebase/firestore"]="fire-fst",M["fire-js"]="fire-js",M["firebase-wrapper"]="fire-js-all",M),q=new x("@firebase/app"),K=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a(void 0,t),this.container=new T(e.name),this._addComponent(new E("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=j),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=j),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){q.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw U.create("app-deleted",{appName:this.name_})},t}();K.prototype.name&&K.prototype.options||K.prototype.delete||console.log("dc");var G=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=j);var a=o.name;if("string"!=typeof a||!a)throw U.create("bad-app-name",{appName:String(a)});if(d(e,a))throw U.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=B[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void q.warn(u.join(" "))}o(new E(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:L,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw U.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=N[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:A[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=C;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!d(e,t=t||j))throw U.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return q.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw U.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&a(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var l=h[c];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(K);return e.INTERNAL=i(i({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){a(e,t)},createSubscribe:v,ErrorFactory:l,deepExtend:a}),e}(),H=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var z=self.firebase.SDK_VERSION;z&&z.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var W=G.initializeApp;G.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c()&&q.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),W.apply(void 0,t)};var X=G;!function(t,e){t.INTERNAL.registerComponent(new E("platform-logger",(function(t){return new H(t)}),"PRIVATE")),t.registerVersion(V,"0.6.17",void 0),t.registerVersion("fire-js","")}(X);const Q=X;Q.registerVersion("firebase","8.3.1","app"),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).Qa(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Qa(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function l(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++y)}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var I=Date.now;function k(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(t){return t}function S(t,e,n){this.code=D+t,this.message=e||N[t]||"",this.a=n||null}function A(t){var e=t&&t.code;return e?new S(e.substring(D.length),t.message,t.serverResponse):null}k(S,Error),S.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},S.prototype.toJSON=function(){return this.w()};var C,D="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},O={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function R(t){for(var e in O)if(O[e].id===t)return{firebaseEndpoint:(t=O[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function x(t){if(Error.captureStackTrace)Error.captureStackTrace(this,x);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");x.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}C=R("__EID__")?"__EID__":void 0,k(x,Error),x.prototype.name="CustomError",k(L,x),L.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var j=new F((function(){return new q}),(function(t){t.reset()}));function B(){var t=we,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function q(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var K=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},G=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function X(t,e){return 0<=K(t,e)}function Y(t,e){var n;return(n=0<=(e=K(t,e)))&&Array.prototype.splice.call(t,e,1),n}function J(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function $(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var lt=s.navigator;if(lt){var ft=lt.userAgent;if(ft){tt=ft;break t}}tt=""}function pt(t){return ct(tt,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===kt&&e||"",this.b=It}function _t(t){return t instanceof wt&&t.constructor===wt&&t.b===It?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.sa=!0,wt.prototype.ra=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var Et,It={},kt={};function Tt(){if(void 0===Et){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(t){s.console&&s.console.error(t.message)}Et=t}else Et=t}return Et}function St(t,e){this.a=e===Ot?t:""}function At(t){return t instanceof St&&t.constructor===St?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function Ct(t,e){var n=_t(t);if(!Nt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Tt();return new St(t=e?e.createScriptURL(t):t,Ot)}(t=n.replace(Dt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?_t(t):encodeURIComponent(String(t))})))}St.prototype.sa=!0,St.prototype.ra=function(){return this.a.toString()},St.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Dt=/%{(\w+)}/g,Nt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ot={};function Rt(t,e){this.a=e===Vt?t:""}function Pt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Rt.prototype.sa=!0,Rt.prototype.ra=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t))t=new Rt(t,Vt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&xt.test(e[1])?new Rt(t,Vt):null}return t}function Ut(t){return t instanceof Rt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,Vt))}var Vt={},jt=new Rt("about:invalid#zClosurez",Vt);function Bt(t,e,n){this.a=n===qt?t:""}Bt.prototype.sa=!0,Bt.prototype.ra=function(){return this.a.toString()},Bt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qt={};function Kt(t,e,n,r){return t=t instanceof Rt?t:Ut(t),e=e||s,n=n instanceof wt?_t(n):n||"",e.open(Pt(t),n,r,void 0)}function Gt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=l;var Wt,Xt,Qt=pt("Opera"),Yt=pt("Trident")||pt("MSIE"),Jt=pt("Edge"),$t=Jt||Yt,Zt=pt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!pt("Edge");function ee(){var t=s.document;return t?t.documentMode:void 0}t:{var ne="",re=(Xt=tt,Zt?/rv:([^\);]+)(\)|;)/.exec(Xt):Jt?/Edge\/([\d\.]+)/.exec(Xt):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):te?/WebKit\/(\S+)/.exec(Xt):Qt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);if(re&&(ne=re?re[1]:""),Yt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Wt=String(ie);break t}}Wt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=et(String(Wt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ht(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ht(0==a[2].length,0==s[2].length)||ht(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}s.document&&Yt?oe=ee()||parseInt(Wt,10)||void 0:oe=void 0;var ue=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Xt){}var ce=!Yt||9<=Number(ue);function he(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function le(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,pe,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}G(a?Z(o):o,r)}}}function ge(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function me(t){s.setTimeout((function(){throw t}),0)}function ye(t,e){pe||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);pe=function(){t.then(_e)}}else pe=function(){var t=_e;!d(s.setImmediate)||s.Window&&s.Window.prototype&&!pt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(fe||(fe=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=ge(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),fe(t)):s.setImmediate(t)}}(),be||(pe(),be=!0),we.add(t,e)}var be=!1,we=new V;function _e(){for(var t;t=B();){try{t.a.call(t.b)}catch(t){me(t)}U(j,t)}be=!1}function Ee(t,e){if(this.a=Ie,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Me(n,ke,t)}),(function(t){if(!(t instanceof Ke))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Me(n,Te,t)}))}catch(t){Me(this,Te,t)}}var Ie=0,ke=2,Te=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ae=new F((function(){return new Se}),(function(t){t.reset()}));function Ce(t,e,n){var r=Ae.get();return r.g=t,r.b=e,r.f=n,r}function De(t){if(t instanceof Ee)return t;var e=new Ee(l);return Me(e,ke,t),e}function Ne(t){return new Ee((function(e,n){n(t)}))}function Oe(t,e,n){Fe(t,e,n,null)||ye(E(e,t))}function Re(t){return new Ee((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Oe(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==Ie)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Ie&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),je(n,i,Te,e)))}t.c=null}else Me(t,Te,e)}function xe(t,e){t.b||t.a!=ke&&t.a!=Te||Ue(t),t.f?t.f.next=e:t.b=e,t.f=e}function Le(t,e,n,r){var i=Ce(null,null,null);return i.a=new Ee((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ke?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,xe(t,i),i.a}function Me(t,e,n){t.a==Ie&&(t===n&&(e=Te,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Fe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ue(t),e!=Te||n instanceof Ke||function(t,e){t.g=!0,ye((function(){t.g&&qe.call(null,e)}))}(t,n)))}function Fe(t,e,n,r){if(t instanceof Ee)return xe(t,Ce(e||l,n||null,r)),!0;if(P(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Ue(t){t.h||(t.h=!0,ye(t.gc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function je(t,e,n,r){if(n==Te&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Be(e,n,r);else try{e.c?e.g.call(e.f):Be(e,n,r)}catch(t){qe.call(null,t)}U(Ae,e)}function Be(t,e,n){e==ke?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ee.prototype.then=function(t,e,n){return Le(this,d(t)?t:null,d(e)?e:null,n)},Ee.prototype.$goog_Thenable=!0,(t=Ee.prototype).oa=function(t,e){return(t=Ce(t,t,e)).c=!0,xe(this,t),this},t.o=function(t,e){return Le(this,null,t,e)},t.cancel=function(t){if(this.a==Ie){var e=new Ke(t);ye((function(){Pe(this,e)}),this)}},t.$c=function(t){this.a=Ie,Me(this,ke,t)},t.ad=function(t){this.a=Ie,Me(this,Te,t)},t.gc=function(){for(var t;t=Ve(this);)je(this,t,this.a,this.i);this.h=!1};var qe=me;function Ke(t){x.call(this,t)}function Ge(){0!=He&&(ze[g(this)]=this),this.xa=this.xa,this.pa=this.pa}k(Ke,x),Ke.prototype.name="cancel";var He=0,ze={};function We(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=He)){var e=g(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}Ge.prototype.xa=!1,Ge.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Xe=Object.freeze||function(t){return t},Qe=!Yt||9<=Number(ue),Ye=Yt&&!se("9"),Je=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(t){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{zt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},k(Ze,$e);var tn=Xe({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ye)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++nn,this.va=this.Pa=!1}function on(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function an(t){this.src=t,this.a={},this.b=0}function sn(t,e){var n=e.type;n in t.a&&Y(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}an.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=un(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new rn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function ln(t,e,n,r,i){if(r&&r.once)pn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=En(n),t&&t[en]?kn(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=wn(t);if(s||(t[cn]=s=new an(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=bn,e=Qe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Je||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else n=En(n),t&&t[en]?Tn(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=En(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[en])sn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(sn(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function gn(t){return t in hn?hn[t]:hn[t]="on"+t}function mn(t,e,n,r){var i=!0;if((t=wn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&vn(t),n.call(r,e)}function bn(t,e){if(t.va)return!0;if(!Qe){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=mn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=mn(r[i],t,!1,e),n=n&&o}return n}return yn(t,new Ze(e,this))}function wn(t){return(t=t[cn])instanceof an?t:null}var _n="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(t){return d(t)?t:(t[_n]||(t[_n]=function(e){return t.handleEvent(e)}),t[_n])}function In(){Ge.call(this),this.v=new an(this),this.ac=this,this.gb=null}function kn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Tn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Sn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&sn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function An(t,e,n){if(d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Cn(t){var e=null;return new Ee((function(n,r){-1==(e=An((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Dn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Nn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function On(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof On)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}k(In,Ge),In.prototype[en]=!0,In.prototype.addEventListener=function(t,e,n,r){ln(this,t,e,n,r)},In.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},In.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;yt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Sn(a,r,!0,t)&&i}if(i=Sn(a=t.b=n,r,!0,t)&&i,i=Sn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Sn(a=t.b=e[o],r,!1,t)&&i;return i},In.prototype.Da=function(){if(In.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=On.prototype).W=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Rn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var xn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,Mn(this,t.c),this.l=t.l,this.a=t.a,Fn(this,t.g),this.f=t.f,Un(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(xn))?(this.i=!!e,Mn(this,n[1]||"",!0),this.l=Kn(n[2]||""),this.a=Kn(n[3]||"",!0),Fn(this,n[4]),this.f=Kn(n[5]||"",!0),Un(this,n[6]||"",!0),this.h=Kn(n[7]||"")):(this.i=!!e,this.b=new Jn(null,this.i))}function Mn(t,e,n){t.c=n?Kn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Un(t,e,n){e instanceof Jn?(t.b=e,function(t,e){e&&!t.f&&($n(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Gn(e,Qn)),t.b=new Jn(e,t.i))}function Vn(t,e,n){t.b.set(e,n)}function jn(t,e){return t.b.get(e)}function Bn(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function qn(t,e,n,r){var i=new Ln(null,void 0);return t&&Mn(i,t),e&&(i.a=e),n&&Fn(i,n),r&&(i.f=r),i}function Kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Gn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Gn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gn(n,"/"==n.charAt(0)?Xn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Gn(n,Yn)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.c;n?Mn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Fn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Un(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Wn=/[#\?:]/g,Xn=/[#\?]/g,Qn=/[#\?@]/g,Yn=/#/g;function Jn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $n(t){t.a||(t.a=new On,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=Nn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Jn(null,void 0);t=Dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){$n(t),e=ir(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function er(t,e){return $n(t),e=ir(t,e),Pn(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),Z(n)),t.b+=n.length)}function rr(t){var e=new Jn;return e.c=t.c,t.a&&(e.a=new On(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return sr(new ar,t,e),e.join("")}function ar(){}function sr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),sr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),hr(r,n),n.push(":"),sr(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":hr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Jn.prototype).add=function(t,e){$n(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){$n(this),this.a.forEach((function(n,r){G(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){$n(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){$n(this);var e=[];if("string"==typeof t)er(this,t)&&(e=$(e,this.a.get(ir(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return $n(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function lr(){var t=Or();return Yt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function fr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function pr(t,e){e=e||s.window;var n="about:blank";t&&(n=Pt(Ft(t)||jt)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||Or()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function gr(t){t=t||s.window;try{t.close()}catch(t){}}function mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Or().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Cr(Or())==Sr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Ft(void 0!==n.href?n.href:String(n))||jt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(a=ge(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:Ut(e),a.href=Pt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Kt("",r,n,a),t=Pt(e),a&&($t&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new Bt(t=(r=Tt())?r.createHTML(t):t,null,qt),r=a.document)&&(r.write(function(t){return t instanceof Bt&&t.constructor===Bt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Kt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function wr(){var t=null;return new Ee((function(e){"complete"==s.document.readyState?e():(t=function(){e()},pn(window,"load",t))})).o((function(e){throw dn(window,"load",t),e}))}function _r(t){return t=t||Or(),!("file:"!==Mr()&&"ionic:"!==Mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Er(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Ir(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function kr(){return Q.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Q.INTERNAL.hasOwnProperty("node")?"Node":Ir()?"Worker":"Browser"}function Tr(){var t=kr();return"ReactNative"===t||"Node"===t}var Sr="Firefox",Ar="Chrome";function Cr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Sr:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ar:"Safari"}var Dr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Nr(t,e){e=e||[];var n,r=[],i={};for(n in Dr)i[Dr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=kr())?r=Cr(i=Or()):"Worker"===r&&(r=Cr(i=Or())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Or(){return s.navigator&&s.navigator.userAgent||""}function Rr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pr(){try{var t=s.localStorage,e=Br();if(t)return t.setItem(e,"1"),t.removeItem(e),!lr()||!!s.indexedDB}catch(t){return Ir()&&!!s.indexedDB}return!1}function xr(){return(Lr()||"chrome-extension:"===Mr()||_r())&&!Tr()&&Pr()&&!Ir()}function Lr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return s.location&&s.location.protocol||null}function Fr(t){return!vr(t=t||Or())&&Cr(t)!=Sr}function Ur(t){return void 0===t?null:or(t)}function Vr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function jr(t){if(null!==t)return JSON.parse(t)}function Br(t){return t||Math.floor(1e9*Math.random()).toString()}function qr(t){return"Safari"!=Cr(t=t||Or())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Kr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Gr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Or(),e=kr(),this.b=vr(t)||"ReactNative"===e}function Hr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Wr(){return!(!Rr("fireauth.oauthhelper",s)&&!Rr("fireauth.iframe",s))}Gr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Lr()&&"chrome-extension:"!==Mr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Xr,Qr={};function Yr(t){Qr[t]||(Qr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Jr={};Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Xr=2==Jr.abcd}catch(Xt){Xr=!1}function $r(t,e,n){Xr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&$r(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)$r(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[si]?"phone":null);if(!(e&&t&&t[ai]))throw new S("internal-error","Internal assert: invalid MultiFactorInfo object");$r(this,"uid",t[ai]),$r(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),$r(this,"enrollmentTime",n),$r(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",ai="mfaEnrollmentId",si="phoneInfo";function ui(t){ni.call(this,t),$r(this,"phoneNumber",t[si])}function ci(t){var e={},n=t[pi],r=t[vi],i=t[gi];if(t=ri(t[di]),!i||i!=li&&i!=fi&&!n||i==fi&&!r||i==hi&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[yi]=n||null,e[wi]=n||null,e[mi]=r):(e[yi]=r||null,e[wi]=r||null,e[mi]=n||null),e[bi]=t||null,$r(this,Ei,i),$r(this,_i,ei(e))}k(ui,ni),ui.prototype.w=function(){var t=ui.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var hi="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",pi="email",di="mfaInfo",vi="newEmail",gi="requestType",mi="email",yi="fromEmail",bi="multiFactorInfo",wi="previousEmail",_i="data",Ei="operation";function Ii(t){var e=jn(t=Bn(t),ki)||null,n=jn(t,Ti)||null,r=jn(t,Ci)||null;if(r=r&&Ni[r]||null,!e||!n||!r)throw new S("argument-error",ki+", "+Ti+"and "+Ci+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:jn(t,Si)||null,languageCode:jn(t,Ai)||null,tenantId:jn(t,Di)||null})}var ki="apiKey",Ti="oobCode",Si="continueUrl",Ai="languageCode",Ci="mode",Di="tenantId",Ni={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:li,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Oi(t){try{return new Ii(t)}catch(t){return null}}function Ri(t){var e=t[Fi];if(void 0===e)throw new S("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new S("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pi];if(n&&"object"==typeof n){e=n[ji];var r=n[Ui];if(n=n[Vi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new S("argument-error",Ui+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new S("argument-error",Vi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new S("argument-error",ji+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new S("missing-android-pkg-name")}}else if(void 0!==n)throw new S("argument-error",Pi+" property must be a non null object when specified.");if(this.f=null,(e=t[Mi])&&"object"==typeof e){if("string"==typeof(e=e[Bi])&&e.length)this.f=e;else if(void 0!==e)throw new S("argument-error",Bi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new S("argument-error",Mi+" property must be a non null object when specified.");if(void 0!==(e=t[Li])&&"boolean"!=typeof e)throw new S("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[xi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new S("argument-error",xi+" property must be a non empty string when specified.");this.i=t||null}var Pi="android",xi="dynamicLinkDomain",Li="handleCodeInApp",Mi="iOS",Fi="url",Ui="installApp",Vi="minimumVersion",ji="packageName",Bi="bundleId";function qi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ki=null;function Gi(t){var e=zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Hi(t){try{return new Gi(t)}catch(t){return null}}function zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ki[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ki){Ki={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ki[o]&&(Ki[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}Gi.prototype.T=function(){return this.f},Gi.prototype.l=function(){return this.c},Gi.prototype.toString=function(){return this.h};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Xi=["client_id","response_type","scope","redirect_uri","state"],Qi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Xi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Xi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Xi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Wi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Yi(t){for(var e in Qi)if(Qi[e].fa==t)return Qi[e];return null}function Ji(t){var e={};e["facebook.com"]=no,e["google.com"]=io,e["github.com"]=ro,e["twitter.com"]=oo;var n=t&&t[Zi];try{if(n)return e[n]?new e[n](t):new eo(t);if(void 0!==t[$i])return new to(t)}catch(t){}return null}var $i="idToken",Zi="providerId";function to(t){var e=t[Zi];if(!e&&t[$i]){var n=Hi(t[$i]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),$r(this,"providerId",e),$r(this,"isNewUser",n)}function eo(t){to.call(this,t),$r(this,"profile",ei((t=jr(t.rawUserInfo||"{}"))||{}))}function no(t){if(eo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(eo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",this.profile&&this.profile.login||null)}function io(t){if(eo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(eo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",t.screenName||null)}function ao(t){var e=Bn(t),n=jn(e,"link"),r=jn(Bn(n),"link");return e=jn(e,"deep_link_id"),jn(Bn(e),"link")||e||r||n||t}function so(t,e){if(!t&&!e)throw new S("internal-error","Internal assert: no raw session string available");if(t&&e)throw new S("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?uo:co}k(eo,to),k(no,eo),k(ro,eo),k(io,eo),k(oo,eo);var uo="enroll",co="signin";function ho(){}function lo(t,e){return t.then((function(t){if(t[Za]){var n=Hi(t[Za]);if(!n||e!=n.i)throw new S("user-mismatch");return t}throw new S("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==D+"user-not-found"?new S("user-mismatch"):t}))}function fo(t,e){if(!e)throw new S("internal-error","failed to construct a credential");this.a=e,$r(this,"providerId",t),$r(this,"signInMethod",t)}function po(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function vo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new fo(t.providerId,t.pendingToken)}catch(t){}return null}function go(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&$r(this,"idToken",e.idToken),e.accessToken&&$r(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&$r(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new S("internal-error","failed to construct a credential");$r(this,"accessToken",e.oauthToken),$r(this,"secret",e.oauthTokenSecret)}$r(this,"providerId",t),$r(this,"signInMethod",n)}function mo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new go(t.providerId,e,t.signInMethod)}catch(t){}}return null}function bo(t,e){this.Qc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Yi(t)||{}).Ja||null,this.ob=null}function wo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new S("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function _o(t){bo.call(this,t,Xi),this.a=[]}function Eo(){_o.call(this,"facebook.com")}function Io(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function ko(){_o.call(this,"github.com")}function To(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new ko).credential({accessToken:e})}function So(){_o.call(this,"google.com"),this.Ca("profile")}function Ao(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new So).credential({idToken:n,accessToken:e})}function Co(){bo.call(this,"twitter.com",Wi)}function Do(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new S("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new go("twitter.com",n,"twitter.com")}function No(t,e,n){this.a=t,this.f=e,$r(this,"providerId","password"),$r(this,"signInMethod",n===Ro.EMAIL_LINK_SIGN_IN_METHOD?Ro.EMAIL_LINK_SIGN_IN_METHOD:Ro.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Oo(t){return t&&t.email&&t.password?new No(t.email,t.password,t.signInMethod):null}function Ro(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Po(t,e){if(!(e=xo(e)))throw new S("argument-error","Invalid email link!");return new No(t,e.code,Ro.EMAIL_LINK_SIGN_IN_METHOD)}function xo(t){return(t=Oi(t=ao(t)))&&t.operation===li?t:null}function Lo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new S("internal-error");this.a=t,$r(this,"providerId","phone"),this.fa="phone",$r(this,"signInMethod","phone")}function Mo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Lo(e)}return null}function Fo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Uo(t){try{this.a=t||Q.auth()}catch(t){throw new S("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Vo(t,e){if(!t)throw new S("missing-verification-id");if(!e)throw new S("missing-verification-code");return new Lo({eb:t,cb:e})}function jo(t){if(t.temporaryProof&&t.phoneNumber)return new Lo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Ao(o,n);case"facebook.com":return Io(n);case"github.com":return To(n);case"twitter.com":return Do(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new fo(e,a):new go(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new _o(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Bo(t){if(!t.isOAuthProvider)throw new S("invalid-oauth-provider")}function qo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new S("invalid-auth-event");if(this.g&&this.a)throw new S("invalid-auth-event");if(this.g&&!this.f)throw new S("invalid-auth-event")}function Ko(t){return(t=t||{}).type?new qo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&A(t.error),t.postBody,t.tenantId):null}function Go(){this.b=null,this.a=[]}so.prototype.Ha=function(){return this.a?De(this.a):De(this.b)},so.prototype.w=function(){return this.type==uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ho.prototype.ka=function(){},ho.prototype.b=function(){},ho.prototype.c=function(){},ho.prototype.w=function(){},fo.prototype.ka=function(t){return ws(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,_s(t,n)},fo.prototype.c=function(t,e){return lo(Es(t,po(this)),e)},fo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},go.prototype.ka=function(t){return ws(t,mo(this))},go.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,_s(t,n)},go.prototype.c=function(t,e){return lo(Es(t,mo(this)),e)},go.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Ib=gt(t),this},k(wo,bo),k(_o,bo),_o.prototype.Ca=function(t){return X(this.a,t)||this.a.push(t),this},_o.prototype.Qb=function(){return Z(this.a)},_o.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new S("argument-error","credential failed: must provide the ID token and/or the access token.");return new go(this.providerId,n,this.providerId)},k(Eo,_o),$r(Eo,"PROVIDER_ID","facebook.com"),$r(Eo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),k(ko,_o),$r(ko,"PROVIDER_ID","github.com"),$r(ko,"GITHUB_SIGN_IN_METHOD","github.com"),k(So,_o),$r(So,"PROVIDER_ID","google.com"),$r(So,"GOOGLE_SIGN_IN_METHOD","google.com"),k(Co,bo),$r(Co,"PROVIDER_ID","twitter.com"),$r(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ka=function(t){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ns,{email:this.a,oobCode:this.f}):ru(t,$s,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Os,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Gs,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return lo(this.ka(t),e)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Ro,{PROVIDER_ID:"password"}),Zr(Ro,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Ro,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Lo.prototype.ka=function(t){return t.fb(Fo(this))},Lo.prototype.b=function(t,e){var n=Fo(this);return n.idToken=e,ru(t,tu,n)},Lo.prototype.c=function(t,e){var n=Fo(this);return n.operation="REAUTH",lo(t=ru(t,eu,n),e)},Lo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Uo.prototype.fb=function(t,e){var n=this.a.a;return De(e.verify()).then((function(r){if("string"!=typeof r)throw new S("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(i&&i.type==uo?i.Ha().then((function(t){return function(t,e){return ru(t,zs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==co?i.Ha().then((function(e){return function(t,e){return ru(t,Ws,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,qs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new S("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(Uo,{PROVIDER_ID:"phone"}),Zr(Uo,{PHONE_SIGN_IN_METHOD:"phone"}),qo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},qo.prototype.T=function(){return this.h},qo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ho,zo=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=Bn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Gt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Gt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",S.call(this,e,n)}function Xo(t,e,n){S.call(this,t,n),(t=e||{}).Jb&&$r(this,"email",t.Jb),t.ea&&$r(this,"phoneNumber",t.ea),t.credential&&$r(this,"credential",t.credential),t.Zb&&$r(this,"tenantId",t.Zb)}function Qo(t){if(t.code){var e=t.code||"";0==e.indexOf(D)&&(e=e.substring(D.length));var n={credential:jo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new S(e,t.message||void 0);return new Xo(e,n,t.message)}return null}function Yo(){}function Jo(t){return t.c||(t.c=t.b())}function $o(){}function Zo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ta(){}function ea(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Sb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function na(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ra(t,e,n){this.reset(t,e,n,void 0,void 0)}function ia(t){this.f=t,this.b=this.c=this.a=null}function oa(t,e){this.name=t,this.value=e}k(Wo,S),k(Xo,S),Xo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Xo.prototype.toJSON=function(){return this.w()},Yo.prototype.c=null,k($o,Yo),$o.prototype.a=function(){var t=Zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},$o.prototype.b=function(){var t={};return Zo(this)&&(t[0]=!0,t[1]=!0),t},Ho=new $o,k(ta,Yo),ta.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ea;throw Error("Unsupported browser")},ta.prototype.b=function(){return{}},(t=ea.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,na(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",na(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,na(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ra.prototype.a=null,ra.prototype.reset=function(t,e,n,r,i){r||I(),delete this.a},oa.prototype.toString=function(){return this.name};var aa=new oa("SEVERE",1e3),sa=new oa("WARNING",900),ua=new oa("CONFIG",700),ca=new oa("FINE",500);function ha(t){return t.c?t.c:t.a?ha(t.a):(M("Root logger has no level set."),null)}ia.prototype.log=function(t,e,n){if(t.value>=ha(this).value)for(d(e)&&(e=e()),t=new ra(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var la={},fa=null;function pa(t){var e;if(fa||(fa=new ia(""),la[""]=fa,fa.c=ua),!(e=la[t])){e=new ia(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=pa(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,la[t]=e}return e}function da(t,e){t&&t.log(ca,e,void 0)}function va(t){this.f=t}function ga(t){In.call(this),this.u=t,this.h=void 0,this.readyState=ma,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=pa("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}k(va,Yo),va.prototype.a=function(){return new ga(this.f)},va.prototype.b=function(t){return function(){return t}}({}),k(ga,In);var ma=0;function ya(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ba(t){t.readyState=4,t.g=null,t.c=null,t.m=null,wa(t)}function wa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function _a(t){In.call(this),this.headers=new On,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ea,this.u=this.S=!1}(t=ga.prototype).open=function(t,e){if(this.readyState!=ma)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,wa(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ba(this)),this.readyState=ma},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,wa(this)),this.a&&(this.readyState=3,wa(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ya(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ba(this):wa(this),3==this.readyState&&ya(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ba(this))},t.sc=function(t){this.a&&(this.response=t,ba(this))},t.Ua=function(t){var e=this.i;e&&e.log(sa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ba(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(sa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(sa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),k(_a,In);var Ea="";_a.prototype.b=pa("goog.net.XhrIo");var Ia=/^https?$/i,ka=["POST","PUT"];function Ta(t){return"content-type"==t.toLowerCase()}function Sa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Aa(t),Da(t)}function Aa(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ca(t){if(t.c&&void 0!==a)if(t.C[1]&&4==Oa(t)&&2==Ra(t))da(t.b,Pa(t,"Local request error detected and ignored"));else if(t.i&&4==Oa(t))An(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Oa(t)){da(t.b,Pa(t,"Request complete")),t.c=!1;try{var e,n=Ra(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(xn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!Ia.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Oa(t)?t.a.statusText:""}catch(e){da(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Ra(t)+"]",Aa(t)}}finally{Da(t)}}}function Da(t,e){if(t.a){Na(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(aa,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Na(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Oa(t){return t.a?t.a.readyState:0}function Ra(t){try{return 2<Oa(t)?t.a.status:-1}catch(t){return-1}}function Pa(t,e){return e+" ["+t.R+" "+t.l+" "+Ra(t)+"]"}function xa(t){var e=Ha;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function La(t,e,n){t.a=!0,t.c=n,t.f=!e,Va(t)}function Ma(t){if(t.a){if(!t.v)throw new ja(t);t.v=!1}}function Fa(t,e,n,r){t.g.push([e,n,r]),t.a&&Va(t)}function Ua(t){return W(t.g,(function(t){return d(t[1])}))}function Va(t){if(t.h&&t.a&&Ua(t)){var e=t.h,n=Ka[e];n&&(s.clearTimeout(n.a),delete Ka[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(P(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ua(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof xa?(Fa(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new qa(e),Ka[e.a]=e,t.h=e.a)}function ja(){x.call(this)}function Ba(){x.call(this)}function qa(t){this.a=s.setTimeout(_(this.c,this),0),this.b=t}(t=_a.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",da(this.b,Pa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(da(this.b,Pa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Da(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Da(this,!0)),_a.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Ca(this):this.Jc())},t.Jc=function(){Ca(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ea:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(aa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return da(this.b,"Can not get response: "+t.message),null}},xa.prototype.cancel=function(t){if(this.a)this.c instanceof xa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ba(this),Ma(this),La(this,!1,t))}},xa.prototype.m=function(t,e){this.i=!1,La(this,t,e)},xa.prototype.then=function(t,e,n){var r,i,o=new Ee((function(t,e){r=t,i=e}));return Fa(this,r,(function(t){t instanceof Ba?o.cancel():i(t)})),o.then(t,e,n)},xa.prototype.$goog_Thenable=!0,k(ja,x),ja.prototype.message="Deferred has already fired",ja.prototype.name="AlreadyCalledError",k(Ba,x),Ba.prototype.message="Deferred was canceled",Ba.prototype.name="CanceledError",qa.prototype.c=function(){throw delete Ka[this.a],this.b};var Ka={};function Ga(t){var e={},n=e.document||document,r=At(t).toString(),i=ge(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new xa(o),u=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(u=window.setTimeout((function(){za(i,!0);var t=new Qa(Xa,"Timeout reached for loading script "+r);Ma(a),La(a,!1,t)}),l),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(za(i,e.xd||!1,u),Ma(a),La(a,!0,null))},i.onerror=function(){za(i,!0,u);var t=new Qa(Wa,"Error while loading script "+r);Ma(a),La(a,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),le(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=At(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=h(e.document):(null===c&&(c=h(s.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ha(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&za(t,!0,this.Ma)}}function za(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Wa=0,Xa=1;function Qa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),x.call(this,n),this.code=t}function Ya(t){this.f=t}function Ja(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ts,this.g=gt(t.secureTokenHeaders||es),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ns,this.a=gt(t.firebaseHeaders||rs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==kr(),!(n=s.XMLHttpRequest||n&&Q.INTERNAL.node&&Q.INTERNAL.node.XMLHttpRequest)&&!Ir())throw new S("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Ir()?this.f=new va(self):Tr()?this.f=new Ya(n):this.f=new ta,this.b=null}k(Qa,x),k(Ya,Yo),Ya.prototype.a=function(){return new this.f},Ya.prototype.b=function(){return{}};var $a,Za="idToken",ts=new Gr(3e4,6e4),es={"Content-Type":"application/x-www-form-urlencoded"},ns=new Gr(3e4,6e4),rs={"Content-Type":"application/json"};function is(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function os(t,e){e&&(t.l=as("https://securetoken.googleapis.com/v1/token",e),t.h=as("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=as("https://identitytoolkit.googleapis.com/v2/",e))}function as(t,e){return t=Bn(t),e=Bn(e.url),t.f=t.a+t.f,Mn(t,e.c),t.a=e.a,Fn(t,e.g),t.toString()}function ss(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function us(t,e,n,r,i,o,a){(function(){var t=Or();return!((t=Cr(t)!=Ar?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Yt&&ue&&!(9<ue))})()||Ir()?t=_(t.u,t):($a||($a=new Ee((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[hs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Fa(t,null,e,void 0)}(Ga(Ct(cs,{onload:hs})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=_(t.s,t)),t(e,n,r,i,o,a)}Ja.prototype.T=function(){return this.b},Ja.prototype.u=function(t,e,n,r,i,o){if(Ir()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new S("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new _a(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}kn(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return da(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Tn(a,"ready",(function(){u&&clearTimeout(u),We(this)})),Tn(a,"timeout",(function(){u&&clearTimeout(u),We(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ho.a(),t.C=t.D?Jo(t.D):Jo(Ho),t.a.onreadystatechange=_(t.Vb,t);try{da(t.b,Pa(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return da(t.b,Pa(t,"Error opening Xhr: "+e.message)),void Sa(t,e)}e=r||"";var o=new On(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)G(t,e,void 0);else for(var n=Nn(t),r=Dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ta,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!X(ka,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Na(t),0<t.g&&(t.u=function(t){return Yt&&se(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),da(t.b,Pa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=An(t.Ma,t.g,t)),da(t.b,Pa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){da(t.b,Pa(t,"Send error: "+e.message)),Sa(t,e)}}(a,t,n,r,i)};var cs=new wt(kt,"https://apis.google.com/js/client.js?onload=%{onload}"),hs="__fcb"+Math.floor(1e6*Math.random()).toString();function ls(t){if("string"!=typeof(t=t.email)||!br.test(t))throw new S("invalid-email")}function fs(t){"email"in t&&ls(t)}function ps(t){if(!t[Za]){if(t.mfaPendingCredential)throw new S("multi-factor-auth-required",null,gt(t));throw new S("internal-error")}}function ds(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new S("internal-error")}else{if(!t.sessionInfo)throw new S("missing-verification-id");if(!t.code)throw new S("missing-verification-code")}}Ja.prototype.s=function(t,e,n,r,i){var o=this;$a.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ja.prototype.zb=function(){return ru(this,Hs,{})},Ja.prototype.Bb=function(t,e){return ru(this,Ks,{idToken:t,email:e})},Ja.prototype.Cb=function(t,e){return ru(this,Gs,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function gs(t){if(!t.phoneVerificationInfo)throw new S("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new S("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new S("missing-verification-code")}function ms(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new S("internal-error")}function ys(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&er(t=new Jn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function bs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Qo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Qo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Qo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ps(t)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,Xs,e)}function _s(t,e){return e.returnIdpCredential=!0,ru(t,Ys,e)}function Es(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Qs,e)}function Is(t){if(!t.oobCode)throw new S("invalid-action-code")}(t=Ja.prototype).Db=function(t,e){var n={idToken:t},r=[];return dt(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ks,n)},t.vb=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Us,t)},t.wb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ls,t)},t.ub=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ms,t)},t.Eb=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fs,t)},t.fb=function(t){return ru(this,Zs,t)},t.nb=function(t,e){return ru(this,Bs,{oobCode:t,newPassword:e})},t.Ra=function(t){return ru(this,Ts,{oobCode:t})},t.jb=function(t){return ru(this,ks,{oobCode:t})};var ks={endpoint:"setAccountInfo",A:Is,Z:"email",B:!0},Ts={endpoint:"resetPassword",A:Is,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new S("internal-error")},B:!0},Ss={endpoint:"signupNewUser",A:function(t){if(ls(t),!t.password)throw new S("weak-password")},G:ps,V:!0,B:!0},As={endpoint:"createAuthUri",B:!0},Cs={endpoint:"deleteAccount",N:["idToken"]},Ds={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new S("internal-error")}},Ns={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ls,G:ps,V:!0,B:!0},Os={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ls,G:ps,V:!0},Rs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:gs,G:ps,B:!0,Na:!0},Ps={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:gs,G:ps,B:!0,Na:!0},xs={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new S("internal-error");ls(t)},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",B:!0},Us={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new S("internal-error");ls(t)},Z:"email",B:!0},Vs={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},js={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new S("internal-error")}},Bs={endpoint:"resetPassword",A:Is,Z:"email",B:!0},qs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ks={endpoint:"setAccountInfo",N:["idToken"],A:fs,V:!0},Gs={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(fs(t),!t.password)throw new S("weak-password")},G:ps,V:!0},Hs={endpoint:"signupNewUser",G:ps,V:!0,B:!0},zs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new S("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new S("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},Ws={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},Xs={endpoint:"verifyAssertion",A:ms,Ya:ys,G:bs,V:!0,B:!0},Qs={endpoint:"verifyAssertion",A:ms,Ya:ys,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new S("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ps(t)},V:!0,B:!0},Ys={endpoint:"verifyAssertion",A:function(t){if(ms(t),!t.idToken)throw new S("internal-error")},Ya:ys,G:bs,V:!0},Js={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new S("invalid-custom-token")},G:ps,V:!0,B:!0},$s={endpoint:"verifyPassword",A:function(t){if(ls(t),!t.password)throw new S("wrong-password")},G:ps,V:!0,B:!0},Zs={endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new S("internal-error");ds(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Qo(t);ps(t)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Za]^!!t.refreshToken)throw new S("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Ne(new S("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return De(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=Bn(e+n);Vn(s,"key",t.c),a&&Vn(s,"cb",I().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(s,c,i[c]);return new Ee((function(e,n){us(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new S("network-request-failed"))}),r,u?void 0:or(Vr(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new S("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new S(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new S(r[i],e);return!e&&t&&(e=Ur(t)),new S("internal-error",e)}function au(t){this.b=t,this.a=null,this.rb=function(t){return(hu||(hu=new Ee((function(t,e){function n(){Kr(),Rr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Kr(),e(Error("Network Error"))},timeout:uu.get()})}if(Rr("gapi.iframes.Iframe"))t();else if(Rr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Rr("gapi.load")?n():e(Error("Network Error"))},De(Ga(r=Ct(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new Ee((function(e,n){Rr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new wt(kt,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Gr(3e4,6e4),cu=new Gr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?qn((t=Bn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):qn("https",this.l,null,"/__/auth/iframe"),this.a=t,Vn(this.a,"apiKey",this.h),Vn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return Q.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=fr();return function(t){return ru(t,Vs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Bn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Bn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:yr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Wo(fr())}))}function gu(t){return t.m||(t.m=wr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ko(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",De(n)}return n.status="ERROR",De(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?Nr(t.c,pu(t.b)):null,t.l=new Ja(t.g,R(t.i),t.C),t.f&&os(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=gt(u||null),t.f=c,t.yb(h).toString()}function bu(t){if(this.a=t||Q.INTERNAL.reactNative&&Q.INTERNAL.reactNative.AsyncStorage,!this.a)throw new S("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=_(this.c,this)}lu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},fu.prototype.yb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Bn(this.v.url);t=qn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=qn("https",this.u,null,"/__/auth/handler");if(Vn(t,"apiKey",this.s),Vn(t,"appName",this.c),Vn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Q.app(this.c).auth().la()}catch(t){n=null}for(var r in e.ob=n,Vn(t,"providerId",this.a.providerId),e=Vr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=gt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),vt(e)||Vn(t,"customParameters",Ur(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Vn(t,"scopes",n.join(",")),this.l?Vn(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Vn(t,"eventId",this.g):tr(t.b,"eventId"),this.i?Vn(t,"v",this.i):tr(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!jn(t,a)&&Vn(t,a,this.b[a]);return this.h?Vn(t,"tid",this.h):tr(t.b,"tid"),this.f?Vn(t,"eid",this.f):tr(t.b,"eid"),(a=pu(this.c)).length&&Vn(t,"fw",a.join(",")),t.toString()},(t=du.prototype).Ob=function(t,e,n){var r=new S("popup-closed-by-user"),i=new S("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.rb.then((function(){return new Ee((function(n){t.a.send(e.type,e,n,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&gr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Ee((function(e){return function n(){Cn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Cn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=Or();return!Fr(t)&&!qr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return Ne(new S("popup-blocked"));if(a&&!Fr())return this.ma().o((function(e){gr(t),i(e)})),r(),De();this.a||(this.a=vu(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw gr(t),i(e),e}));return r(),e})).then((function(){Bo(n),a||pr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=vu(mu(this)));var i=this;return this.a.then((function(){Bo(e),pr(yu(i.s,i.g,i.b,t,e,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new S("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){J(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return De(this.a.getItem(t)).then((function(t){return t&&jr(t)}))},t.set=function(t,e){return De(this.a.setItem(t,Ur(e)))},t.U=function(t){return De(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var _u,Eu=[];function Iu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function ku(t){this.a=t}function Tu(t){this.c=t,this.b=!1,this.a=[]}function Su(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Ne(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ee((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Au(t,c),e})).o((function(e){throw Au(t,c),e}))}function Au(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),J(t.a,(function(t){return t==e}))}}function Cu(){if(!Ru())throw new S("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Ir()&&self?(this.v=function(){var t=Ir()?self:null;if(G(Eu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Eu.push(e)}return e}(),Iu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&G(t.a,(function(t){t(e)})),{keyProcessed:X(e,n.key)}}))})),Iu(this.v,"ping",(function(){return De(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?De().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):De(null)}().then((function(e){(t.h=e)&&(t.g=new Tu(new ku(e)),Su(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&X(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Du(t){return new Ee((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ee((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Du(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Nu(t){return t.i||(t.i=Du(t)),t.i}function Ou(t,e){var n=0;return new Ee((function r(i,o){Nu(t).then(e).then(i).o((function(e){if(!(3<++n))return Nu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!s.indexedDB}catch(t){return!1}}function Pu(t){return t.objectStore("firebaseLocalStorage")}function xu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new Ee((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Su(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):De()}function Fu(t){return Nu(t).then((function(t){var e=Pu(xu(t,!1));return e.getAll?Lu(e.getAll()):new Ee((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Vu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=De().then((function(){if(Ru()){var t=Br(),r="__sak"+t;return _u||(_u=new Cu),(n=_u).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){G(e.a,(function(e){e(t)}))})),t}))}function ju(){this.a={},this.type="inMemory"}function Bu(){if(!function(){var t="Node"==kr();if(!(t=qu()||t&&Q.INTERNAL.node&&Q.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==kr())throw new S("internal-error","The LocalStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=qu()||Q.INTERNAL.node.localStorage,this.type="localStorage"}function qu(){try{var t=s.localStorage,e=Br();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ku(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==kr();if(!(t=Hu()||t&&Q.INTERNAL.node&&Q.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==kr())throw new S("internal-error","The SessionStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=Hu()||Q.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=s.sessionStorage,e=Br();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){var t={};t.Browser=Qu,t.Node=Yu,t.ReactNative=Ju,t.Worker=$u,this.a=t[kr()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];G(r,(function(e){i.push(De().then((function(){return e(t.origin,t.data.data)})))})),Re(i).then((function(r){var i=[];G(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),G(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},ku.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Tu.prototype.close=function(){for(;0<this.a.length;)Au(this,this.a[0]);this.b=!0},(t=Cu.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return Lu((e=Pu(xu(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=Pu(xu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Lu(o.add(a))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return Lu(Pu(xu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,Lu(Pu(xu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){Uu(t),function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&G(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){J(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(t=Vu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){J(this.a,(function(e){return e==t}))},(t=ju.prototype).get=function(t){return De(this.a[t])},t.set=function(t,e){return this.a[t]=e,De()},t.U=function(t){return delete this.a[t],De()},t.ca=function(){},t.ia=function(){},(t=Bu.prototype).get=function(t){var e=this;return De().then((function(){return jr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return De().then((function(){var r=Ur(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&ln(s.window,"storage",t)},t.ia=function(t){s.window&&dn(s.window,"storage",t)},(t=Ku.prototype).get=function(){return De(null)},t.set=function(){return De()},t.U=function(){return De()},t.ca=function(){},t.ia=function(){},(t=Gu.prototype).get=function(t){var e=this;return De().then((function(){return jr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return De().then((function(){var r=Ur(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Wu,Xu,Qu={F:Bu,bb:Gu},Yu={F:Bu,bb:Gu},Ju={F:bu,bb:Ku},$u={F:Bu,bb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(qr(Or())||!Er()),e=Fr(),n=Pr();this.m=t,this.h=e,this.l=n,this.a={},Wu||(Wu=new zu),t=Wu;try{this.g=!lr()&&Wr()||!s.indexedDB?new t.a.F:new Vu(Ir()?new ju:new t.a.F)}catch(t){this.g=new ju,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new ju}this.v=new ju,this.f=_(this.Yb,this),this.b={}}function ec(){return Xu||(Xu=new tc),Xu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),vt(this.a)&&(nc(this,"local").ca(this.f),this.h||(lr()||!Wr())&&s.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(J(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.mb(e))},Yt&&ue&&10==ue&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else G(t,_(this.mb,this))},t.mb=function(t){this.a[t]&&G(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=s.Int32Array?new Int32Array(yc):yc),this.reset()}k(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=$(128,pc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|sc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):Z(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,wc)}k(bc,hc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function _c(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ec(t){return new S("invalid-cordova-configuration",t)}function Ic(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function kc(t){return t.f||(t.f=t.ma().then((function(){return new Ee((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Tc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ao(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=jr(jn(o=Bn(i),"firebaseError")||null))?A(o):null)?new qo(r.c,r.b,null,null,o,null,r.T()):new qo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ic(t,i)}))}var n=new qo("unknown",null,null,null,new S("no-auth-event")),r=!1,i=Cn(500).then((function(){return Tc(t).then((function(){r||Ic(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Rr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},zo||(zo=new Go),function(t){var e=zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Rr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Tc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Ko(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Sc(t){this.a=t,this.b=ec()}(t=_c.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(_r(void 0)?wr().then((function(){return new Ee((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ne(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Rr("universalLinks.subscribe",s))throw Ec("cordova-universal-links-plugin-fix is not installed");if(void 0===Rr("BuildInfo.packageName",s))throw Ec("cordova-plugin-buildinfo is not installed");if("function"!=typeof Rr("cordova.plugins.browsertab.openUrl",s))throw Ec("cordova-plugin-browsertab is not installed");if("function"!=typeof Rr("cordova.InAppBrowser.open",s))throw Ec("cordova-plugin-inappbrowser is not installed")}),(function(){throw new S("cordova-not-ready")}))},t.Ob=function(t,e){return e(new S("operation-not-supported-in-this-environment")),De()},t.Mb=function(){return Ne(new S("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Ne(new S("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=De().then((function(){return Bo(e),kc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new qo(e,r,null,o,new S("no-auth-event"),null,i),u=Rr("BuildInfo.packageName",s);if("string"!=typeof u)throw new S("invalid-cordova-configuration");var c=Rr("BuildInfo.displayName",s),h={};if(Or().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Or().toLowerCase().match(/android/))return Ne(new S("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=function(t){var e=new bc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,vc,56-e.c):mc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var l=yu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Rr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new S("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Rr("cordova.plugins.browsertab.openUrl",s)))throw new S("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Rr("cordova.InAppBrowser.open",s)))throw new S("invalid-cordova-configuration");e=Or(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ee((function(t,e){u=function(){var e=Rr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Cn(2e3).then((function(){e(new S("redirect-cancelled-by-user"))})))},h=function(){Hr()&&c()},o.addEventListener("resume",c,!1),Or().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Tc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),kc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new qo("unknown",null,null,null,new S("no-auth-event")),t(e))}))},t.Sa=function(t){J(this.b,(function(e){return e==t}))};var Ac={name:"pendingRedirect",F:"session"};function Cc(t){return ic(t.b,Ac,t.a)}function Dc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Gc,this.C=new Qc,this.g=new Sc(qc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Nc(this.D,this.v,this.m,C,this.J)}function Nc(t,e,n,r,i){var o=Q.SDK_VERSION||null;return _r()?new _c(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function Oc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Rc(t){t.a.Xb()&&Oc(t).o((function(e){var n=new qo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)})),t.a.Tb()||Hc(t.b)}function Pc(t,e){X(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ac,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Cc(t.g).then((function(){Oc(t).o((function(e){var n=new qo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)}))})):Rc(t)})).o((function(){Rc(t)}))}function xc(t,e){J(t.h,(function(t){return t==e}))}Dc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Nc(this.D,this.v,this.m,null,this.J),this.i={}},Dc.prototype.s=function(t){if(!t)throw new S("invalid-auth-event");if(6e5<=I()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=I())),e=!0;break}}return Hc(this.b),e};var Lc=new Gr(2e3,1e4),Mc=new Gr(3e4,6e4);function Fc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Uc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Vc(t,e,n,r,i){var o;return function(t){return t.b.set(Ac,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Uc(e))throw new S("operation-not-supported-in-this-environment");return o=e,Cc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Ee((function(){})):Cc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function jc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Lc.get())}Dc.prototype.qa=function(){return this.b.qa()};var Bc={};function qc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Kc(t,e,n,r){var i=qc(e,n,r);return Bc[i]||(Bc[i]=new Dc(t,e,n,r)),Bc[i]}function Gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Hc(t){t.g||(t.g=!0,Xc(t,!1,null,null))}function zc(t){t.g&&!t.i&&Xc(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return De(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Xc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ne(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Qc(){}function Yc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Jc(t,e){this.a=e,$r(this,"verificationId",t)}function $c(t,e,n,r){return new Uo(t).fb(e,n).then((function(t){return new Jc(t,r)}))}function Zc(t){var e=zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new S("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function th(t,e,n){var r=e&&e[nh];if(!r)throw new S("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new so(null,r),this.b=[];var i=this;G(e[eh]||[],(function(t){(t=ri(t))&&i.b.push(t)})),$r(this,"auth",this.a),$r(this,"session",this.c),$r(this,"hints",this.b)}Gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Gc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Xc(this,!0,null,t.a),De()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Xc(t,s,e,null)})).o((function(e){Xc(t,s,null,e)}))}(this,t,e):Ne(new S("invalid-auth-event")):(Xc(this,!1,null,null),De())}else Ne(new S("invalid-auth-event"))},Gc.prototype.qa=function(){var t=this;return new Ee((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new S("timeout");t.a&&t.a.cancel(),t.a=Cn(Mc.get()).then((function(){t.b||(t.g=!0,Xc(t,!0,null,e))}))}(t))}))},Qc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),De()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ne(new S("invalid-auth-event"))}else Ne(new S("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Vo(this.verificationId,t),this.a(t)};var eh="mfaInfo",nh="mfaPendingCredential";function rh(t,e,n,r){S.call(this,"multi-factor-auth-required",r,e),this.b=new th(t,e,n),$r(this,"resolver",this.b)}function ih(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new rh(e,t.serverResponse,n,t.message)}catch(t){}return null}function oh(){}function ah(t){$r(this,"factorId",t.fa),this.a=t}function sh(t){if(ah.call(this,t),this.a.fa!=Uo.PROVIDER_ID)throw new S("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uh(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function ch(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),ln(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&G(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ai]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[si]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),hh(this,n)}function hh(t,e){t.b=e,$r(t,"enrolledFactors",e)}function lh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function fh(t,e){t.stop(),t.b=Cn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Hr()||!t?De():new Ee((function(n){e=function(){Hr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){fh(t,!0)})).o((function(e){t.i(e)&&fh(t,!1)}))}function ph(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function dh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function vh(t,e){t.b=Hi(e[Za]||""),t.a=e.refreshToken,dh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function gh(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function mh(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function yh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Q.SDK_VERSION?Nr(Q.SDK_VERSION):null;this.a=new Ja(this.l,R(C),r),t.emulatorConfig&&os(this.a,t.emulatorConfig),this.b=new ph(this.a),Sh(this,e[Za]),vh(this.b,e),$r(this,"refreshToken",this.b.a),Dh(this,n||{}),In.call(this),this.R=!1,this.s&&xr()&&(this.i=Kc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new lh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=_(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){os(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){_h(i,t.f)},this.ba=null,this.O=new ch(this,n),$r(this,"multiFactor",this.O)}function bh(t,e){t.ja&&dn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&ln(e,"languageCodeChanged",t.Oa)}function wh(t,e){t.X&&dn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&ln(e,"emulatorConfigChanged",t.Aa)}function _h(t,e){t.$=e,ss(t.a,Q.SDK_VERSION?Nr(Q.SDK_VERSION,t.$):null)}function Eh(t,e){t.ba&&dn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&ln(e,"frameworkChanged",t.Ba)}function Ih(t){try{return Q.app(t.m).auth()}catch(e){throw new S("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function kh(t){t.D||t.u.b||(t.u.start(),dn(t,"tokenChanged",t.aa),ln(t,"tokenChanged",t.aa))}function Th(t){dn(t,"tokenChanged",t.aa),t.u.stop()}function Sh(t,e){t.za=e,$r(t,"_lat",e)}function Ah(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Re(e).then((function(){return t}))}function Ch(t){t.i&&!t.R&&(t.R=!0,Pc(t.i,t))}function Dh(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new gh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Nh(){}function Oh(t){return De().then((function(){if(t.D)throw new S("app-deleted")}))}function Rh(t){return z(t.providerData,(function(t){return t.providerId}))}function Ph(t,e){e&&(xh(t,e.providerId),t.providerData.push(e))}function xh(t,e){J(t.providerData,(function(t){return t.providerId==e}))}function Lh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&$r(t,e,n)}function Mh(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?$r(t,"metadata",function(t){return new gh(t.a,t.b)}(e.metadata)):$r(t,"metadata",new gh),G(e.providerData,(function(e){Ph(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),$r(t,"refreshToken",t.b.a),hh(t.O,e.O.b))}function Fh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,xs,{idToken:e}).then(_(t.Kc,t))}(t,e).then((function(){return n||Lh(t,"isAnonymous",!1),e}))}))}function Uh(t,e){e[Za]&&t.za!=e[Za]&&(vh(t.b,e),t.dispatchEvent(new uh("tokenChanged")),Sh(t,e[Za]),Lh(t,"refreshToken",t.b.a))}function Vh(t,e){return Fh(t).then((function(){if(X(Rh(t),e))return Ah(t).then((function(){throw new S("provider-already-linked")}))}))}function jh(t,e,n){return ti({user:t,credential:jo(e),additionalUserInfo:e=Ji(e),operationType:n})}function Bh(t,e){return Uh(t,e),t.reload().then((function(){return t}))}function qh(t,e,n,r,i){if(!xr())return Ne(new S("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ne(t.h);var o=Yi(n.providerId),a=Br(t.uid+":::"),s=null;(!Fr()||Er())&&t.s&&n.isOAuthProvider&&(s=yu(t.s,t.l,t.m,e,n,null,a,Q.SDK_VERSION||null,null,null,t.tenantId));var u=mr(s,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return Fc(t.i,u,e,n,a,!!s,t.tenantId)})).then((function(){return new Ee((function(n,r){t.na(e,null,new S("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=jc(t.i,t,e,u,a)}))})).then((function(t){return u&&gr(u),t?ti(t):null})).o((function(t){throw u&&gr(u),t})),Hh(t,r,i)}function Kh(t,e,n,r,i){if(!xr())return Ne(new S("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ne(t.h);var o=null,a=Br(t.uid+":::");return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Ah(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xh,t.w(),e.a)),e})).then((function(){return Vc(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Qh(t.ha);throw o})).then((function(){if(o)throw o})),Hh(t,r,i)}function Gh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new S("internal-error");throw new S("auth-domain-config-required")}}function Hh(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Ne(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new uh("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){Y(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),Ih(t),_(t.jc,t))),n||e}))}function zh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Za]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new yh(e,n,t);return t.providerData&&G(t.providerData,(function(t){t&&Ph(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Wh(t){this.a=t,this.b=ec()}th.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=gt(e.f);return delete n[eh],delete n[nh],yt(n,t),e.g(n)}))},k(rh,S),oh.prototype.sb=function(t,e,n){return e.type==uo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:Fo(t.a)}),ru(e,Rs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:Fo(t.a)}),ru(e,Ps,n)}))}(this,t,e)},k(ah,oh),k(sh,ah),k(uh,$e),(t=ch.prototype).yc=function(t){hh(this,function(t){var e=[];return G(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new so(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Uh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return hh(e,r),Uh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},lh.prototype.start=function(){this.a=this.c,fh(this,!0)},lh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ph.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ph.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ne(new S("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Ee((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?us(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new S("internal-error")):r(new S("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.m.get()):r(new S("internal-error"))}))}(t.f,e).then((function(e){return t.b=Hi(e.access_token),t.a=e.refresh_token,dh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):De(null):De({accessToken:this.b.toString(),refreshToken:this.a})},gh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},k(yh,In),yh.prototype.wa=function(t){this.ya=t,is(this.a,t)},yh.prototype.la=function(){return this.ya},yh.prototype.Ga=function(){return Z(this.$)},yh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},$r(yh.prototype,"providerId","firebase"),(t=yh.prototype).reload=function(){var t=this;return Hh(this,Oh(this).then((function(){return Fh(t).then((function(){return Ah(t)})).then(Nh)})))},t.oc=function(t){return this.I(t).then((function(t){return new Zc(t)}))},t.I=function(t){var e=this;return Hh(this,Oh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new S("internal-error");return t.accessToken!=e.za&&(Sh(e,t.accessToken),e.dispatchEvent(new uh("tokenChanged"))),Lh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new S("internal-error");Dh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new mh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Ph(this,e[n]);Lh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new uh("userReloaded",{hd:t}))},t.Lc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Hh(this,t.c(this.a,this.uid).then((function(t){return Uh(e,t),n=jh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Hh(this,Vh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=jh(e,t,"link"),Bh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Hh(this,Vh(this,"phone").then((function(){return $c(Ih(n),t,e,_(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Hh(this,De().then((function(){return $c(Ih(n),t,e,_(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Hh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},t.ed=function(t){var e=this;return Hh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Uh(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Hh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Oh(this);var e=this;return Hh(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Uh(e,t),Lh(e,"displayName",t.displayName||null),Lh(e,"photoURL",t.photoUrl||null),G(e.providerData,(function(t){"password"===t.providerId&&($r(t,"displayName",e.displayName),$r(t,"photoURL",e.photoURL))})),Ah(e)})).then(Nh))},t.cd=function(t){var e=this;return Hh(this,Fh(this).then((function(n){return X(Rh(e),t)?function(t,e,n){return ru(t,Ds,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return G(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),G(Rh(e),(function(t){n[t]||xh(e,t)})),n[Uo.PROVIDER_ID]||$r(e,"phoneNumber",null),Ah(e)})):Ah(e).then((function(){throw new S("no-such-provider")}))})))},t.delete=function(){var t=this;return Hh(this,this.I().then((function(e){return ru(t.a,Cs,{idToken:e})})).then((function(){t.dispatchEvent(new uh("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");bh(t,null),wh(t,null),Eh(t,null),t.J=[],t.D=!0,Th(t),$r(t,"refreshToken",null),t.i&&xc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):null},t.Ec=function(t){var e=this;return qh(this,"linkViaPopup",t,(function(){return Vh(e,t.providerId).then((function(){return Ah(e)}))}),!1)},t.Nc=function(t){return qh(this,"reauthViaPopup",t,(function(){return De()}),!0)},t.Fc=function(t){var e=this;return Kh(this,"linkViaRedirect",t,(function(){return Vh(e,t.providerId)}),!1)},t.Oc=function(t){return Kh(this,"reauthViaRedirect",t,(function(){return De()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hh(this,this.I().then((function(n){return _s(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=jh(i,t,"link"),Bh(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hh(this,De().then((function(){return lo(Es(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=jh(i,t,"reauthenticate"),Uh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return Hh(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:qi(new Ri(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Hh(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:qi(new Ri(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Hh(this,t=lo(De(t),n.uid).then((function(t){return e=jh(n,t,"reauthenticate"),Uh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),G(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.O.w()),t};var Xh={name:"redirectUser",F:"session"};function Qh(t){return ic(t.b,Xh,t.a)}function Yh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=Zh("local"),n=Zh("session"),r=Zh("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=jr(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get($h,t.a).then((function(t){return t?Zh(t):e}))}))}))})).then((function(e){return t.c=e,Jh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Zh("local"),this.a,_(this.g,this))}function Jh(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,Zh(Zu[n]),t.a));return r.push(ic(t.b,$h,t.a)),function(t){return new Ee((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Oe(t[s],E(o,s),a);else e(i)}))}(r)}Yh.prototype.g=function(){var t=this,e=Zh("local");rl(this,(function(){return De().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Jh(t,"local").then((function(){t.c=e}))}))}))};var $h={name:"persistence",F:"session"};function Zh(t){return{name:"authUser",F:t}}function tl(t,e){return rl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function el(t){return rl(t,(function(){return ic(t.b,t.c,t.a)}))}function nl(t,e,n){return rl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),zh(t||{})}))}))}function rl(t,e){return t.f=t.f.then(e,e),t.f}function il(t){if(this.l=!1,$r(this,"settings",new Yc),$r(this,"app",t),!fl(this).options||!fl(this).options.apiKey)throw new S("invalid-api-key");t=Q.SDK_VERSION?Nr(Q.SDK_VERSION):null,this.a=new Ja(fl(this).options&&fl(this).options.apiKey,R(C),t),this.R=[],this.s=[],this.O=[],this.hb=Q.INTERNAL.createSubscribe(_(this.zc,this)),this.X=void 0,this.bc=Q.INTERNAL.createSubscribe(_(this.Ac,this)),hl(this,null),this.i=new Yh(fl(this).options.apiKey+":"+fl(this).name),this.D=new Wh(fl(this).options.apiKey+":"+fl(this).name),this.$=gl(this,function(t){var e=fl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xh,t.a).then((function(t){return t&&e&&(t.authDomain=e),zh(t||{})}))}(t.D,fl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Qh(t.D)}));return gl(t,e)}(t).then((function(){return nl(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return tl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:el(t.i)}))):null})).then((function(e){hl(t,e||null)}));return gl(t,n)}(this)),this.h=gl(this,function(t){return t.$.then((function(){return cl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Zh("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.ya=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=fl(t).options.authDomain,n=fl(t).options.apiKey;e&&xr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Kc(e,n,fl(t).name,t.P),Pc(t.b,t),pl(t)&&Ch(pl(t)),t.m){Ch(t.m);var r=t.m;r.wa(t.la()),bh(r,t),_h(r=t.m,t.J),Eh(r,t),os((r=t.m).a,t.P),wh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,In.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Bn(this.P.url);t=ti({protocol:t.c,host:t.a,port:t.g,options:ti({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function ol(t){$e.call(this,"languageCodeChanged"),this.h=t}function al(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function sl(t){$e.call(this,"frameworkChanged"),this.f=t}function ul(t){return t.Oa||Ne(new S("auth-domain-config-required"))}function cl(t){if(!xr())return Ne(new S("operation-not-supported-in-this-environment"));var e=ul(t).then((function(){return t.b.qa()})).then((function(t){return t?ti(t):null}));return gl(t,e)}function hl(t,e){pl(t)&&(function(t,e){J(t.S,(function(t){return t==e}))}(pl(t),t.Ba),dn(pl(t),"tokenChanged",t.ya),dn(pl(t),"userDeleted",t.za),dn(pl(t),"userInvalidated",t.Aa),Th(pl(t))),e&&(e.S.push(t.Ba),ln(e,"tokenChanged",t.ya),ln(e,"userDeleted",t.za),ln(e,"userInvalidated",t.Aa),0<t.u&&kh(e)),$r(t,"currentUser",e),e&&(e.wa(t.la()),bh(e,t),_h(e,t.J),Eh(e,t),os(e.a,t.P),wh(e,t))}function ll(t,e){var n=null,r=null;return gl(t,e.then((function(e){return n=jo(e),r=Ji(e),function(t,e){var n={};return n.apiKey=fl(t).options.apiKey,n.authDomain=fl(t).options.authDomain,n.appName=fl(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new yh(t,e);return n&&(i.ha=n),r&&_h(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return pl(t)&&e.uid==pl(t).uid?(Mh(pl(t),e),t.da(e)):(hl(t,e),Ch(e),t.da(e))})).then((function(){vl(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),t,_(t.kc,t))),n||e})).then((function(){return ti({user:pl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function fl(t){return t.app}function pl(t){return t.currentUser}function dl(t){return pl(t)&&pl(t)._lat||null}function vl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](dl(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](dl(t))}}function gl(t,e){return t.R.push(e),e.oa((function(){Y(t.R,e)})),e}function ml(){}function yl(){this.a={},this.b=1e12}Yh.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new S("invalid-persistence-type"),n=new S("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(kr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Pr()&&"none"!==t)throw n}}(t),rl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Jh(n,t)})).then((function(){if(n.c=Zh(t),e)return n.b.set(n.c,e,n.a)})):De()}))},k(il,In),k(ol,$e),k(al,$e),k(sl,$e),(t=il.prototype).xb=function(t){return gl(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,is(this.a,this.aa),this.dispatchEvent(new ol(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new S("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&wr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,os(this.a,this.P),this.dispatchEvent(new al(this.P))}},t.Gc=function(t){this.J.push(t),ss(this.a,Q.SDK_VERSION?Nr(Q.SDK_VERSION,this.J):null),this.dispatchEvent(new sl(this.J))},t.Ga=function(){return Z(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:fl(this).options.apiKey,authDomain:fl(this).options.authDomain,appName:fl(this).name,currentUser:pl(this)&&pl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return ll(i,ws(i.a,o))}))},t.Xc=function(t){if(!xr())return Ne(new S("operation-not-supported-in-this-environment"));var e=this,n=Yi(t.providerId),r=Br(),i=null;(!Fr()||Er())&&fl(this).options.authDomain&&t.isOAuthProvider&&(i=yu(fl(this).options.authDomain,fl(this).options.apiKey,fl(this).name,"signInViaPopup",t,null,r,Q.SDK_VERSION||null,null,null,this.T(),this.P));var o=mr(i,n&&n.ua,n&&n.ta);return gl(this,n=ul(this).then((function(n){return Fc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Ee((function(t,n){e.na("signInViaPopup",null,new S("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=jc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&gr(o),t?ti(t):null})).o((function(t){throw o&&gr(o),t})))},t.Yc=function(t){if(!xr())return Ne(new S("operation-not-supported-in-this-environment"));var e=this;return gl(this,ul(this).then((function(){return function(t){return rl(t,(function(){return t.b.set($h,t.c.F,t.a)}))}(e.i)})).then((function(){return Vc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return cl(this).then((function(e){return t.b&&zc(t.b.b),e})).o((function(e){throw t.b&&zc(t.b.b),e}))},t.dd=function(t){if(!t)return Ne(new S("null-user"));if(this.S!=t.tenantId)return Ne(new S("tenant-id-mismatch"));var e=this,n={};n.apiKey=fl(this).options.apiKey,n.authDomain=fl(this).options.authDomain,n.appName=fl(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Za]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new yh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&_h(e,r),Mh(e,t),e}(t,n,e.D,e.Ga());return gl(this,this.h.then((function(){if(fl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return pl(e)&&t.uid==pl(e).uid?(Mh(pl(e),t),e.da(t)):(hl(e,r),Ch(r),e.da(r))})).then((function(){vl(e)})))},t.Ab=function(){var t=this;return gl(this,this.h.then((function(){return t.b&&zc(t.b.b),pl(t)?(hl(t,null),el(t.i).then((function(){vl(t)}))):De()})))},t.Zc=function(){var t=this;return nl(this.i,fl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=pl(t)&&e){n=pl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Mh(pl(t),e),pl(t).I();(pl(t)||e)&&(hl(t,e),e&&(Ch(e),e.ha=t.D),t.b&&Pc(t.b,t),vl(t))}}))},t.da=function(t){return tl(this.i,t)},t.mc=function(){vl(this),this.da(pl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return ll(e,De(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(pl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),gl(t,t.h.then((function(){!t.l&&X(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(dl(t)))})))}(this,(function(){t.next(pl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(pl(r)):"function"==typeof t.next&&t.next(pl(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(pl(r)):"function"==typeof t.next&&t.next(pl(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return gl(this,this.h.then((function(){return pl(e)?pl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return ll(e,ru(e.a,Js,{token:t}))})).then((function(t){var n=t.user;return Lh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return ll(n,ru(n.a,$s,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return ll(n,ru(n.a,Ss,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return ll(e,t.ka(e.a))}))},t.Sc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=pl(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ll(t,t.a.zb()).then((function(e){var n=e.user;return Lh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return pl(this)&&pl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&pl(this)&&kh(pl(this))},t.Pc=function(t){var e=this;G(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&pl(this)&&Th(pl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),gl(this,this.h.then((function(){e.l||X(e.s,t)&&t(dl(e))})))},t.removeAuthTokenListener=function(t){J(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Zh("local"),t.a,this.ja),this.b&&(xc(this.b,this),zc(this.b.b)),Promise.resolve()},t.hc=function(t){return gl(this,function(t,e){return ru(t,As,{identifier:e,continueUri:Lr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!xo(t)},t.wb=function(t,e){var n=this;return gl(this,De().then((function(){var t=new Ri(e);if(!t.c)throw new S("argument-error",Li+" must be true when sending sign in link to email");return qi(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return gl(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return gl(this,this.a.Ra(t).then((function(t){return new ci(t)})))},t.jb=function(t){return gl(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return gl(this,De().then((function(){return void 0===e||vt(e)?{}:qi(new Ri(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return gl(this,$c(this,t,e,_(this.$a,this)))},t.Vc=function(t,e){var n=this;return gl(this,De().then((function(){var r=e||fr(),i=Po(t,r);if(!(r=xo(r)))throw new S("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new S("tenant-id-mismatch");return n.$a(i)})))},ml.prototype.render=function(){},ml.prototype.reset=function(){},ml.prototype.getResponse=function(){},ml.prototype.execute=function(){};var bl=null;function wl(t,e){return(e=_l(e))&&t.a[e]||null}function _l(t){return(t=void 0===t?1e12:t)?t.toString():null}function El(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=he(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ln(this.f,"click",this.i)}function Il(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function kl(){}function Tl(){}yl.prototype.render=function(t,e){return this.a[this.b.toString()]=new El(t,e),this.b++},yl.prototype.reset=function(t){var e=wl(this,t);t=_l(t),e&&t&&(e.delete(),delete this.a[t])},yl.prototype.getResponse=function(t){return(t=wl(this,t))?t.getResponse():null},yl.prototype.execute=function(t){(t=wl(this,t))&&t.execute()},El.prototype.getResponse=function(){return Il(this),this.b},El.prototype.execute=function(){Il(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},El.prototype.delete=function(){Il(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},$r(kl,"FACTOR_ID","phone"),Tl.prototype.g=function(){return bl||(bl=new yl),De(bl)},Tl.prototype.c=function(){};var Sl=null;function Al(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Cl=new wt(kt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Dl=new Gr(3e4,6e4);Al.prototype.g=function(t){var e=this;return new Ee((function(n,r){var i=setTimeout((function(){r(new S("network-request-failed"))}),Dl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new S("internal-error"));delete s[e.a]},De(Ga(Ct(Cl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new S("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Al.prototype.c=function(){this.b--};var Nl=null;function Ol(t,e,n,r,i,o,a){if($r(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(Sl||(Sl=new Tl),a=Sl):(Nl||(Nl=new Al),a=Nl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[xl])throw new S("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ll],!s.document)throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.i&&he(e).hasChildNodes())throw new S("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ja(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Rl];this.a[Rl]=function(t){if(Ml(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Rr(c,s);"function"==typeof e&&e(t)}};var h=this.a[Pl];this.a[Pl]=function(){if(Ml(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Rr(h,s);"function"==typeof t&&t()}}}var Rl="callback",Pl="expired-callback",xl="sitekey",Ll="size";function Ml(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Fl(t,e){return t.h.push(e),e.oa((function(){Y(t.h,e)})),e}function Ul(t){if(t.D)throw new S("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vl(t,e,n){var r=!1;try{this.b=n||Q.app()}catch(t){throw new S("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new S("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Q.SDK_VERSION?Nr(Q.SDK_VERSION,o):null,Ol.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,R(C),r)}function jl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new S("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Bl.length)throw new S("internal-error","Argument validator received an unsupported number of arguments.");n=Bl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new S("argument-error",t+" failed: "+r)}(t=Ol.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Fl(this,De().then((function(){if(Lr()&&!Ir())return wr();throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,js,{})})).then((function(e){t.a[xl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Ul(this);var t=this;return Fl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=he(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ce&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ht(a.name),'"'),a.type){o.push(' type="',Ht(a.type),'"');var s={};yt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ge(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):le(o,a)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Ul(this);var t=this;return Fl(this,this.render().then((function(e){return new Ee((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){J(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Ul(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ul(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=he(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},k(Vl,Ol);var Bl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function ql(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Kl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Gl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function Hl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function zl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Wl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Xl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Ql(t){return v(t)&&"string"==typeof t.uid}function Yl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Jl(t,e){for(var n in e){var r=e[n].name;t[r]=tf(r,t[n],e[n].j)}}function $l(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){jl(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function Zl(t,e,n,r){t[e]=tf(e,n,r)}function tf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return jl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Jl(il.prototype,{jb:{name:"applyActionCode",j:[ql("code")]},Ra:{name:"checkActionCode",j:[ql("code")]},nb:{name:"confirmPasswordReset",j:[ql("code"),ql("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[ql("email"),ql("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[ql("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[ql("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Yl(Gl(),Hl(),"nextOrObserver"),Hl("opt_error",!0),Hl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Yl(Gl(),Hl(),"nextOrObserver"),Hl("opt_error",!0),Hl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[ql("email"),Yl(Gl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[ql("email"),Gl("actionCodeSettings")]},xb:{name:"setPersistence",j:[ql("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Wl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Wl()]},Tc:{name:"signInWithCustomToken",j:[ql("token")]},Uc:{name:"signInWithEmailAndPassword",j:[ql("email"),ql("password")]},Vc:{name:"signInWithEmailLink",j:[ql("email"),ql("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[ql("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Yl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof yh)}},zl(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[ql(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[ql("url"),Gl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[ql("code")]}}),$l(il.prototype,{lc:{name:"languageCode",kb:Yl(ql(),zl(),"languageCode")},ti:{name:"tenantId",kb:Yl(ql(),zl(),"tenantId")}}),il.Persistence=Zu,il.Persistence.LOCAL="local",il.Persistence.SESSION="session",il.Persistence.NONE="none",Jl(yh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Kl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Kl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Wl()]},qb:{name:"linkWithCredential",j:[Wl()]},Dc:{name:"linkWithPhoneNumber",j:[ql("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wl()]},tb:{name:"reauthenticateWithCredential",j:[Wl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[ql("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Yl(Gl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[ql(null,!0)]},cd:{name:"unlink",j:[ql("provider")]},Bb:{name:"updateEmail",j:[ql("email")]},Cb:{name:"updatePassword",j:[ql("password")]},ed:{name:"updatePhoneNumber",j:[Wl("phone")]},Db:{name:"updateProfile",j:[Gl("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[ql("email"),Yl(Gl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]}}),Jl(yl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(ml.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(Ee.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$l(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Kl("appVerificationDisabledForTesting")}}),Jl(Jc.prototype,{confirm:{name:"confirm",j:[ql("verificationCode")]}}),Zl(ho,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,Oo,Mo,vo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Yl(ql(),Gl(),"json")]),Zl(Ro,"credential",(function(t,e){return new No(t,e)}),[ql("email"),ql("password")]),Jl(No.prototype,{w:{name:"toJSON",j:[ql(null,!0)]}}),Jl(Eo.prototype,{Ca:{name:"addScope",j:[ql("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Zl(Eo,"credential",Io,[Yl(ql(),Gl(),"token")]),Zl(Ro,"credentialWithLink",Po,[ql("email"),ql("emailLink")]),Jl(ko.prototype,{Ca:{name:"addScope",j:[ql("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Zl(ko,"credential",To,[Yl(ql(),Gl(),"token")]),Jl(So.prototype,{Ca:{name:"addScope",j:[ql("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Zl(So,"credential",Ao,[Yl(ql(),Yl(Gl(),zl()),"idToken"),Yl(ql(),zl(),"accessToken",!0)]),Jl(Co.prototype,{Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Zl(Co,"credential",Do,[Yl(ql(),Gl(),"token"),ql("secret",!0)]),Jl(_o.prototype,{Ca:{name:"addScope",j:[ql("scope")]},credential:{name:"credential",j:[Yl(ql(),Yl(Gl(),zl()),"optionsOrIdToken"),Yl(ql(),zl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Jl(go.prototype,{w:{name:"toJSON",j:[ql(null,!0)]}}),Jl(fo.prototype,{w:{name:"toJSON",j:[ql(null,!0)]}}),Zl(Uo,"credential",Vo,[ql("verificationId"),ql("verificationCode")]),Jl(Uo.prototype,{fb:{name:"verifyPhoneNumber",j:[Yl(ql(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Xl(t.session,uo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Xl(t.session,co)&&Ql(t.multiFactorHint):t.session&&t.multiFactorUid?Xl(t.session,co)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Jl(Lo.prototype,{w:{name:"toJSON",j:[ql(null,!0)]}}),Jl(S.prototype,{toJSON:{name:"toJSON",j:[ql(null,!0)]}}),Jl(Xo.prototype,{toJSON:{name:"toJSON",j:[ql(null,!0)]}}),Jl(Wo.prototype,{toJSON:{name:"toJSON",j:[ql(null,!0)]}}),Jl(rh.prototype,{toJSON:{name:"toJSON",j:[ql(null,!0)]}}),Jl(th.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Jl(ch.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},ql("displayName",!0)]},bd:{name:"unenroll",j:[Yl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Ql},ql(),"multiFactorInfoIdentifier")]}}),Jl(Vl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zl(Ii,"parseLink",Oi,[ql("link")]),Zl(kl,"assertion",(function(t){return new sh(t)}),[Wl("phone")]),function(){if(void 0===Q||!Q.INTERNAL||!Q.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:il,AuthCredential:ho,Error:S};Zl(t,"EmailAuthProvider",Ro,[]),Zl(t,"FacebookAuthProvider",Eo,[]),Zl(t,"GithubAuthProvider",ko,[]),Zl(t,"GoogleAuthProvider",So,[]),Zl(t,"TwitterAuthProvider",Co,[]),Zl(t,"OAuthProvider",_o,[ql("providerId")]),Zl(t,"SAMLAuthProvider",wo,[ql("providerId")]),Zl(t,"PhoneAuthProvider",Uo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof il)}}]),Zl(t,"RecaptchaVerifier",Vl,[Yl(ql(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Gl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Q.app.App)}}]),Zl(t,"ActionCodeURL",Ii,[]),Zl(t,"PhoneMultiFactorGenerator",kl,[]),Q.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new il(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Q.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Q.registerVersion("@firebase/auth","0.16.4"),Q.INTERNAL.extendNamespace({User:yh})}()}.apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Y=function(t,e){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function J(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var $,Z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},tt=tt||{},et=Z||self;function nt(){}function rt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function it(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ot="closure_uid_"+(1e9*Math.random()>>>0),at=0;function st(t,e,n){return t.call.apply(t.bind,arguments)}function ut(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ct(t,e,n){return(ct=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?st:ut).apply(null,arguments)}function ht(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function lt(){return Date.now()}function ft(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function pt(){this.j=this.j,this.i=this.i}pt.prototype.j=!1,pt.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,ot)&&t[ot]||(t[ot]=++at)}(this)},pt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var dt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},vt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function gt(t){return Array.prototype.concat.apply([],arguments)}function mt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function yt(t){return/^[\s\xa0]*$/.test(t)}var bt,wt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function _t(t,e){return-1!=t.indexOf(e)}function Et(t,e){return t<e?-1:t>e?1:0}t:{var It=et.navigator;if(It){var kt=It.userAgent;if(kt){bt=kt;break t}}bt=""}function Tt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function St(t){var e={};for(var n in t)e[n]=t[n];return e}var At="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ct(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<At.length;o++)n=At[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Dt(t){return Dt[" "](t),t}Dt[" "]=nt;var Nt,Ot,Rt=_t(bt,"Opera"),Pt=_t(bt,"Trident")||_t(bt,"MSIE"),xt=_t(bt,"Edge"),Lt=xt||Pt,Mt=_t(bt,"Gecko")&&!(_t(bt.toLowerCase(),"webkit")&&!_t(bt,"Edge"))&&!(_t(bt,"Trident")||_t(bt,"MSIE"))&&!_t(bt,"Edge"),Ft=_t(bt.toLowerCase(),"webkit")&&!_t(bt,"Edge");function Ut(){var t=et.document;return t?t.documentMode:void 0}t:{var Vt="",jt=(Ot=bt,Mt?/rv:([^\);]+)(\)|;)/.exec(Ot):xt?/Edge\/([\d\.]+)/.exec(Ot):Pt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ot):Ft?/WebKit\/(\S+)/.exec(Ot):Rt?/(?:Version)[ \/]?(\S+)/.exec(Ot):void 0);if(jt&&(Vt=jt?jt[1]:""),Pt){var Bt=Ut();if(null!=Bt&&Bt>parseFloat(Vt)){Nt=String(Bt);break t}}Nt=Vt}var qt,Kt={};function Gt(t){return function(t,e){var n=Kt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=wt(String(Nt)).split("."),r=wt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=Et(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Et(0==a[2].length,0==s[2].length)||Et(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}et.document&&Pt?qt=Ut()||parseInt(Nt,10)||void 0:qt=void 0;var Ht=qt,zt=!Pt||9<=Number(Ht),Wt=Pt&&!Gt("9"),Xt=function(){if(!et.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{et.addEventListener("test",nt,e),et.removeEventListener("test",nt,e)}catch(t){}return t}();function Qt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Yt(t,e){if(Qt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Mt){t:{try{Dt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Jt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Qt.prototype.b=function(){this.defaultPrevented=!0},ft(Yt,Qt);var Jt={2:"touch",3:"pen",4:"mouse"};Yt.prototype.b=function(){Yt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Wt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var $t="closure_listenable_"+(1e6*Math.random()|0),Zt=0;function te(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Zt,this.Y=this.Z=!1}function ee(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ne(t){this.src=t,this.a={},this.b=0}function re(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=dt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ee(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ie(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ne.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ie(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new te(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var oe="closure_lm_"+(1e6*Math.random()|0),ae={};function se(t,e,n,r,i){if(r&&r.once)return ce(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)se(t,e[o],n,r,i);return null}return n=me(n),t&&t[$t]?t.va(e,n,it(r)?!!r.capture:!!r,i):ue(t,e,n,!1,r,i)}function ue(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=it(i)?!!i.capture:!!i;if(a&&!zt)return null;var s=ve(t);if(s||(t[oe]=s=new ne(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=de,e=zt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fe(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ce(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ce(t,e[o],n,r,i);return null}return n=me(n),t&&t[$t]?t.wa(e,n,it(r)?!!r.capture:!!r,i):ue(t,e,n,!0,r,i)}function he(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)he(t,e[o],n,r,i);else r=it(r)?!!r.capture:!!r,n=me(n),t&&t[$t]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ie(o=t.a[e],n,r,i))&&(ee(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=ve(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ie(e,n,r,i)),(n=-1<t?e[t]:null)&&le(n))}function le(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[$t])re(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fe(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ve(e))?(re(n,t),0==n.b&&(n.src=null,e[oe]=null)):ee(t)}}}function fe(t){return t in ae?ae[t]:ae[t]="on"+t}function pe(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&le(t),n.call(r,e)}function de(t,e){if(t.Y)return!0;if(!zt){if(!e)t:{e=["window","event"];for(var n=et,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return pe(t,e=new Yt(e,this))}return pe(t,new Yt(e,this))}function ve(t){return(t=t[oe])instanceof ne?t:null}var ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(t){return"function"==typeof t?t:(t[ge]||(t[ge]=function(e){return t.handleEvent(e)}),t[ge])}function ye(){pt.call(this),this.c=new ne(this),this.J=this,this.C=null}function be(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Qt(e,t);else if(e instanceof Qt)e.target=e.target||t;else{var i=e;Ct(e=new Qt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=we(a,r,!0,e)&&i}if(i=we(a=e.a=t,r,!0,e)&&i,i=we(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=we(a=e.a=n[o],r,!1,e)&&i}function we(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&re(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}ft(ye,pt),ye.prototype[$t]=!0,($=ye.prototype).addEventListener=function(t,e,n,r){se(this,t,e,n,r)},$.removeEventListener=function(t,e,n,r){he(this,t,e,n,r)},$.G=function(){if(ye.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ee(n[r]);delete e.a[t],e.b--}}this.C=null},$.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},$.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var _e=et.JSON.stringify;function Ee(){this.b=this.a=null}var Ie,ke=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Se}),(function(t){t.reset()}));function Te(){var t=Ne,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Se(){this.next=this.b=this.a=null}function Ae(t){et.setTimeout((function(){throw t}),0)}function Ce(t,e){Ie||function(){var t=et.Promise.resolve(void 0);Ie=function(){t.then(Oe)}}(),De||(Ie(),De=!0),Ne.add(t,e)}Ee.prototype.add=function(t,e){var n=ke.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Se.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Se.prototype.reset=function(){this.next=this.b=this.a=null};var De=!1,Ne=new Ee;function Oe(){for(var t;t=Te();){try{t.a.call(t.b)}catch(t){Ae(t)}var e=ke;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}De=!1}function Re(t,e){ye.call(this),this.b=t||1,this.a=e||et,this.f=ct(this.Za,this),this.g=lt()}function Pe(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function xe(t,e,n){if("function"==typeof t)n&&(t=ct(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ct(t.handleEvent,t)}return 2147483647<Number(e)?-1:et.setTimeout(t,e||0)}function Le(t){t.a=xe((function(){t.a=null,t.c&&(t.c=!1,Le(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ft(Re,ye),($=Re.prototype).aa=!1,$.M=null,$.Za=function(){if(this.aa){var t=lt()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),be(this,"tick"),this.aa&&(Pe(this),this.start()))}},$.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=lt())},$.G=function(){Re.X.G.call(this),Pe(this),delete this.a};var Me=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Le(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(et.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(pt);function Fe(t){pt.call(this),this.b=t,this.a={}}ft(Fe,pt);var Ue=[];function Ve(t,e,n,r){Array.isArray(n)||(n&&(Ue[0]=n.toString()),n=Ue);for(var i=0;i<n.length;i++){var o=se(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function je(t){Tt(t.a,(function(t,e){this.a.hasOwnProperty(e)&&le(t)}),t),t.a={}}function Be(){this.a=!0}function qe(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return _e(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Fe.prototype.G=function(){Fe.X.G.call(this),je(this)},Fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Be.prototype.info=function(){};var Ke={},Ge=null;function He(){return Ge=Ge||new ye}function ze(t){Qt.call(this,Ke.Fa,t)}function We(t){var e=He();be(e,new ze(e,t))}function Xe(t,e){Qt.call(this,Ke.STAT_EVENT,t),this.stat=e}function Qe(t){var e=He();be(e,new Xe(e,t))}function Ye(t){Qt.call(this,Ke.Ga,t)}function Je(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return et.setTimeout((function(){t()}),e)}Ke.Fa="serverreachability",ft(ze,Qt),Ke.STAT_EVENT="statevent",ft(Xe,Qt),Ke.Ga="timingevent",ft(Ye,Qt);var $e={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ze={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function tn(){}function en(t){var e;return(e=t.a)||(e=t.a={}),e}function nn(){}tn.prototype.a=null;var rn,on={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function an(){Qt.call(this,"d")}function sn(){Qt.call(this,"c")}function un(){}function cn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Fe(this),this.P=hn,t=Lt?125:void 0,this.R=new Re(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ft(an,Qt),ft(sn,Qt),ft(un,tn),rn=new un;var hn=45e3,ln={},fn={};function pn(t,e,n){t.H=1,t.i=Ln(Dn(e)),t.j=n,t.I=!0,dn(t,null)}function dn(t,e){t.u=lt(),mn(t),t.l=Dn(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Xn(n.b,"t",r),t.D=0,t.a=qr(t.g,t.g.C?e:null),0<t.O&&(t.F=new Me(ct(t.Ca,t,t.a),t.O)),Ve(t.J,t.a,"readystatechange",t.Xa),e=t.B?St(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),We(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function vn(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=gn(t,n);if(i==fn){4==e&&(t.h=4,Qe(14),r=!1),qe(t.c,t.f,null,"[Incomplete Response]");break}if(i==ln){t.h=4,Qe(15),qe(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}qe(t.c,t.f,i,null),En(t,i)}4==e&&0==n.length&&(t.h=1,Qe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),xr(e),e.F=!0,Qe(11))):(qe(t.c,t.f,n,"[Invalid Chunked Response]"),_n(t),wn(t))}function gn(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?fn:(n=Number(e.substring(n,r)),isNaN(n)?ln:(r+=1)+n>e.length?fn:(e=e.substr(r,n),t.D=r+n,e))}function mn(t){t.T=lt()+t.P,yn(t,t.P)}function yn(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Je(ct(t.Va,t),e)}function bn(t){t.o&&(et.clearTimeout(t.o),t.o=null)}function wn(t){0==t.g.v||t.A||Fr(t.g,t)}function _n(t){bn(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Pe(t.R),je(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function En(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||er(n.b,t)))if(n.I=t.N,!t.C&&er(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Mr(n),Tr(n)}Pr(n),Qe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Je(ct(n.Sa,n),6e3));if(1>=tr(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Vr(n,11)}else if((t.C||n.a==t)&&Mr(n),!yt(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(_t(h,"spdy")||_t(h,"quic")||_t(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(nr(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,xn(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=lt()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Br(u,u.C?u.ga:null,u.fa),p.C){rr(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(bn(d),mn(d)),u.a=p}else Rr(u);0<n.g.length&&Cr(n)}else"stop"!=i[0]&&"close"!=i[0]||Vr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Vr(n,7):kr(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);We(4)}catch(t){}}function In(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(rt(t)||"string"==typeof t)vt(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(rt(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(rt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Tn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Sn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Sn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Sn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}($=cn.prototype).setTimeout=function(t){this.P=t},$.Xa=function(t){t=t.target;var e=this.F;e&&3==wr(t)?e.f():this.Ca(t)},$.Ca=function(t){try{if(t==this.a)t:{var e=wr(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Lt&&!this.a.$())){this.A||4!=e||7==n||We(8==n||0>=r?3:2),bn(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yt(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,Qe(12),_n(this),wn(this);break t}qe(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,En(this,u)}this.I?(vn(this,e,o),Lt&&this.b&&3==e&&(Ve(this.J,this.R,"tick",this.Wa),this.R.start())):(qe(this.c,this.f,o,null),En(this,o)),4==e&&_n(this),this.b&&!this.A&&(4==e?Fr(this.g,this):(this.b=!1,mn(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Qe(12)):(this.h=0,Qe(13)),_n(this),wn(this)}}}catch(t){}},$.Wa=function(){if(this.a){var t=wr(this.a),e=this.a.$();this.D<e.length&&(bn(this),vn(this,t,e),this.b&&4!=t&&mn(this))}},$.cancel=function(){this.A=!0,_n(this)},$.Va=function(){this.o=null;var t=lt();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(We(3),Qe(17)),_n(this),this.h=2,wn(this)):yn(this,this.T-t)},($=kn.prototype).K=function(){Tn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},$.L=function(){return Tn(this),this.a.concat()},$.get=function(t,e){return Sn(this.b,t)?this.b[t]:e},$.set=function(t,e){Sn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},$.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var An=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Cn){this.a=void 0!==e?e:t.a,Nn(this,t.f),this.j=t.j,On(this,t.c),Rn(this,t.h),this.g=t.g,e=t.b;var n=new Gn;n.c=e.c,e.a&&(n.a=new kn(e.a),n.b=e.b),Pn(this,n),this.i=t.i}else t&&(n=String(t).match(An))?(this.a=!!e,Nn(this,n[1]||"",!0),this.j=Mn(n[2]||""),On(this,n[3]||"",!0),Rn(this,n[4]),this.g=Mn(n[5]||"",!0),Pn(this,n[6]||"",!0),this.i=Mn(n[7]||"")):(this.a=!!e,this.b=new Gn(null,this.a))}function Dn(t){return new Cn(t)}function Nn(t,e,n){t.f=n?Mn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function On(t,e,n){t.c=n?Mn(e,!0):e}function Rn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Pn(t,e,n){e instanceof Gn?(t.b=e,function(t,e){e&&!t.f&&(Hn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(zn(this,e),Xn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Fn(e,qn)),t.b=new Gn(e,t.a))}function xn(t,e,n){t.b.set(e,n)}function Ln(t){return xn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^lt()).toString(36)),t}function Mn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Un),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Un(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Cn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Fn(e,Vn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Fn(e,Vn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fn(n,"/"==n.charAt(0)?Bn:jn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Fn(n,Kn)),t.join("")};var Vn=/[#\/\?@]/g,jn=/[#\?:]/g,Bn=/[#\?]/g,qn=/[#\?@]/g,Kn=/#/g;function Gn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Hn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function zn(t,e){Hn(t),e=Qn(t,e),Sn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Sn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Tn(t)))}function Wn(t,e){return Hn(t),e=Qn(t,e),Sn(t.a.b,e)}function Xn(t,e,n){zn(t,e),0<n.length&&(t.c=null,t.a.set(Qn(t,e),mt(n)),t.b+=n.length)}function Qn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}($=Gn.prototype).add=function(t,e){Hn(this),this.c=null,t=Qn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},$.forEach=function(t,e){Hn(this),this.a.forEach((function(n,r){vt(n,(function(n){t.call(e,n,r,this)}),this)}),this)},$.L=function(){Hn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},$.K=function(t){Hn(this);var e=[];if("string"==typeof t)Wn(this,t)&&(e=gt(e,this.a.get(Qn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=gt(e,t[n])}return e},$.set=function(t,e){return Hn(this),this.c=null,Wn(this,t=Qn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},$.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},$.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Yn=function(t,e){this.b=t,this.a=e};function Jn(t){this.g=t||$n,t=et.PerformanceNavigationTiming?0<(t=et.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(et.ia&&et.ia.ya&&et.ia.ya()&&et.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var $n=10;function Zn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function tr(t){return t.b?1:t.a?t.a.size:0}function er(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function nr(t,e){t.a?t.a.add(e):t.b=e}function rr(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ir(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=J(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return mt(t.c)}function or(){}function ar(){this.a=new or}function sr(t,e,n){var r=n||"";try{In(t,(function(t,n){var i=t;it(t)&&(i=_e(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function ur(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Jn.prototype.cancel=function(){var t,e;if(this.c=ir(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=J(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},or.prototype.stringify=function(t){return et.JSON.stringify(t,void 0)},or.prototype.parse=function(t){return et.JSON.parse(t,void 0)};var cr=et.JSON.parse;function hr(t){ye.call(this),this.headers=new kn,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=lr,this.D=this.F=!1}ft(hr,ye);var lr="",fr=/^https?$/i,pr=["POST","PUT"];function dr(t){return"content-type"==t.toLowerCase()}function vr(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,gr(t),yr(t)}function gr(t){t.u||(t.u=!0,be(t,"complete"),be(t,"error"))}function mr(t){if(t.b&&void 0!==tt&&(!t.s[1]||4!=wr(t)||2!=t.W()))if(t.l&&4==wr(t))xe(t.za,0,t);else if(be(t,"readystatechange"),4==wr(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(An)[1]||null;if(!o&&et.self&&et.self.location){var a=et.self.location.protocol;o=a.substr(0,a.length-1)}i=!fr.test(o?o.toLowerCase():"")}e=i}if(e)be(t,"complete"),be(t,"success");else{t.h=6;try{var s=2<wr(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",gr(t)}}finally{yr(t)}}}function yr(t,e){if(t.a){br(t);var n=t.a,r=t.s[0]?nt:null;t.a=null,t.s=null,e||be(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function br(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(et.clearTimeout(t.m),t.m=null)}function wr(t){return t.a?t.a.readyState:0}function _r(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Tt(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):xn(t,e,n))}function Er(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ir(t){this.pa=0,this.g=[],this.c=new Be,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Er("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Er("baseRetryDelayMs",5e3,t),this.Ra=Er("retryDelaySeedMs",1e4,t),this.Ma=Er("forwardChannelMaxRetries",2,t),this.ma=Er("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Jn(t&&t.concurrentRequestLimit),this.ka=new ar,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function kr(t){if(Sr(t),3==t.v){var e=t.R++,n=Dn(t.B);xn(n,"SID",t.J),xn(n,"RID",e),xn(n,"TYPE","terminate"),Nr(t,n),(e=new cn(t,t.c,e,void 0)).H=2,e.i=Ln(Dn(n)),n=!1,et.navigator&&et.navigator.sendBeacon&&(n=et.navigator.sendBeacon(e.i.toString(),"")),!n&&et.Image&&((new Image).src=e.i,n=!0),n||(e.a=qr(e.g,null),e.a.ba(e.i)),e.u=lt(),mn(e)}jr(t)}function Tr(t){t.a&&(xr(t),t.a.cancel(),t.a=null)}function Sr(t){Tr(t),t.j&&(et.clearTimeout(t.j),t.j=null),Mr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&et.clearTimeout(t.h),t.h=null)}function Ar(t,e){t.g.push(new Yn(t.Oa++,e)),3==t.v&&Cr(t)}function Cr(t){Zn(t.b)||t.h||(t.h=!0,Ce(t.Ba,t),t.u=0)}function Dr(t,e){var n;n=e?e.f:t.R++;var r=Dn(t.B);xn(r,"SID",t.J),xn(r,"RID",n),xn(r,"AID",t.P),Nr(t,r),t.i&&t.l&&_r(r,t.i,t.l),n=new cn(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Or(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),nr(t.b,n),pn(n,r,e)}function Nr(t,e){t.f&&In({},(function(t,n){xn(e,n,t)}))}function Or(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ct(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{sr(h,a,"req"+c+"_")}catch(t){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Rr(t){t.a||t.j||(t.T=1,Ce(t.Aa,t),t.o=0)}function Pr(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Je(ct(t.Aa,t),Ur(t,t.o)),t.o++,0))}function xr(t){null!=t.s&&(et.clearTimeout(t.s),t.s=null)}function Lr(t){t.a=new cn(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Dn(t.la);xn(e,"RID","rpc"),xn(e,"SID",t.J),xn(e,"CI",t.H?"0":"1"),xn(e,"AID",t.P),Nr(t,e),xn(e,"TYPE","xmlhttp"),t.i&&t.l&&_r(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ln(Dn(e)),n.j=null,n.I=!0,dn(n,t)}function Mr(t){null!=t.m&&(et.clearTimeout(t.m),t.m=null)}function Fr(t,e){var n=null;if(t.a==e){Mr(t),xr(t),t.a=null;var r=2}else{if(!er(t.b,e))return;n=e.s,rr(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=lt()-e.u;var i=t.u;be(r=He(),new Ye(r,n,e,i)),Cr(t)}else Rr(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(tr(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Je(ct(t.Ba,t,e),Ur(t,t.u)),t.u++,0)))}(t,e)||2==r&&Pr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Vr(t,5);break;case 4:Vr(t,10);break;case 3:Vr(t,6);break;default:Vr(t,2)}}function Ur(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Vr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ct(t.Ya,t);n||(n=new Cn("//www.google.com/images/cleardot.gif"),et.location&&"http"==et.location.protocol||Nn(n,"https"),Ln(n)),function(t,e){var n=new Be;if(et.Image){var r=new Image;r.onload=ht(ur,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ht(ur,n,r,"TestLoadImage: error",!1,e),r.onabort=ht(ur,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ht(ur,n,r,"TestLoadImage: timeout",!1,e),et.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Qe(2);t.v=0,t.f&&t.f.ra(e),jr(t),Sr(t)}function jr(t){t.v=0,t.I=-1,t.f&&(0==ir(t.b).length&&0==t.g.length||(t.b.c.length=0,mt(t.g),t.g.length=0),t.f.qa())}function Br(t,e,n){var r=function(t){return t instanceof Cn?Dn(t):new Cn(t,void 0)}(n);if(""!=r.c)e&&On(r,e+"."+r.c),Rn(r,r.h);else{var i=et.location;r=function(t,e,n,r){var i=new Cn(null,void 0);return t&&Nn(i,t),e&&On(i,e),n&&Rn(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Tt(t.V,(function(t,e){xn(r,e,t)})),e=t.A,n=t.na,e&&n&&xn(r,e,n),xn(r,"VER",t.ha),Nr(t,r),r}function qr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hr(t.Na)).F=t.C,e}function Kr(){}function Gr(){if(Pt&&!(10<=Number(Ht)))throw Error("Environmental error: no available transport.")}function Hr(t,e){ye.call(this),this.a=new Ir(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!yt(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yt(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Xr(this)}function zr(t){an.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Wr(){sn.call(this),this.status=1}function Xr(t){this.a=t}($=hr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?en(this.H):en(rn),this.a.onreadystatechange=ct(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void vr(this,t)}t=n||"";var i=new kn(this.headers);r&&In(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=dr,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=et.FormData&&t instanceof et.FormData,!(0<=dt(pr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{br(this),0<this.o&&((this.D=function(t){return Pt&&Gt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ct(this.xa,this)):this.m=xe(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){vr(this,t)}},$.xa=function(){void 0!==tt&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,be(this,"timeout"),this.abort(8))},$.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,be(this,"complete"),be(this,"abort"),yr(this))},$.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),yr(this,!0)),hr.X.G.call(this)},$.za=function(){this.j||(this.A||this.l||this.g?mr(this):this.Ua())},$.Ua=function(){mr(this)},$.W=function(){try{return 2<wr(this)?this.a.status:-1}catch(t){return-1}},$.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},$.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),cr(e)}},$.ua=function(){return this.h},$.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},($=Ir.prototype).ha=8,$.v=1,$.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new cn(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ct(r=St(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Or(this,n,e),xn(i=Dn(this.B),"RID",t),xn(i,"CVER",22),this.A&&xn(i,"X-HTTP-Session-Id",this.A),Nr(this,i),this.i&&r&&_r(i,this.i,r),nr(this.b,n),this.Ia&&xn(i,"TYPE","init"),this.da?(xn(i,"$req",e),xn(i,"SID","null"),n.U=!0,pn(n,i,null)):pn(n,i,e),this.v=2}}else 3==this.v&&(t?Dr(this,t):0==this.g.length||Zn(this.b)||Dr(this))},$.Aa=function(){if(this.j=null,Lr(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Je(ct(this.Ta,this),t)}},$.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Qe(10),Tr(this),Lr(this))},$.Sa=function(){null!=this.m&&(this.m=null,Tr(this),Pr(this),Qe(19))},$.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Qe(2)):(this.c.info("Failed to ping google.com"),Qe(1))},($=Kr.prototype).ta=function(){},$.sa=function(){},$.ra=function(){},$.qa=function(){},$.Ja=function(){},Gr.prototype.a=function(t,e){return new Hr(t,e)},ft(Hr,ye),Hr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Qe(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Br(t,null,t.fa),Cr(t)},Hr.prototype.close=function(){kr(this.a)},Hr.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Ar(this.a,e)}else this.l?((e={}).__data__=_e(t),Ar(this.a,e)):Ar(this.a,t)},Hr.prototype.G=function(){this.a.f=null,delete this.f,kr(this.a),delete this.a,Hr.X.G.call(this)},ft(zr,an),ft(Wr,sn),ft(Xr,Kr),Xr.prototype.ta=function(){be(this.a,"a")},Xr.prototype.sa=function(t){be(this.a,new zr(t))},Xr.prototype.ra=function(t){be(this.a,new Wr(t))},Xr.prototype.qa=function(){be(this.a,"b")},Gr.prototype.createWebChannel=Gr.prototype.a,Hr.prototype.send=Hr.prototype.h,Hr.prototype.open=Hr.prototype.g,Hr.prototype.close=Hr.prototype.close,$e.NO_ERROR=0,$e.TIMEOUT=8,$e.HTTP_ERROR=6,Ze.COMPLETE="complete",nn.EventType=on,on.OPEN="a",on.CLOSE="b",on.ERROR="c",on.MESSAGE="d",ye.prototype.listen=ye.prototype.va,hr.prototype.listenOnce=hr.prototype.wa,hr.prototype.getLastError=hr.prototype.Qa,hr.prototype.getLastErrorCode=hr.prototype.ua,hr.prototype.getStatus=hr.prototype.W,hr.prototype.getResponseJson=hr.prototype.Pa,hr.prototype.getResponseText=hr.prototype.$,hr.prototype.send=hr.prototype.ba;var Qr=$e,Yr=Ze,Jr=Ke,$r=10,Zr=11,ti=nn,ei=hr,ni=function(t,e){return(ni=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ri(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ni(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function ii(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function oi(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function ai(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var si=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();si.o=-1;var ui=new x("@firebase/firestore");function ci(){return ui.logLevel}function hi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ui.logLevel<=A.DEBUG){var r=e.map(pi);ui.debug.apply(ui,ai(["Firestore (8.3.1): "+t],r))}}function li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ui.logLevel<=A.ERROR){var r=e.map(pi);ui.error.apply(ui,ai(["Firestore (8.3.1): "+t],r))}}function fi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ui.logLevel<=A.WARN){var r=e.map(pi);ui.warn.apply(ui,ai(["Firestore (8.3.1): "+t],r))}}function pi(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function di(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw li(e),new Error(e)}function vi(t,e){t||di()}function gi(t,e){return t}function mi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var yi=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=mi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function bi(t,e){return t<e?-1:t>e?1:0}function wi(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function _i(t){return t+"\0"}function Ei(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ii(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ki(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ti(t){return null==t}function Si(t){return 0===t&&1/t==-1/0}function Ai(t){return"number"==typeof t&&Number.isInteger(t)&&!Si(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ci={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Di=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return ri(e,t),e}(Error),Ni=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&di(),void 0===n?n=t.length-e:n>t.length-e&&di(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Oi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ri(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Di(Ci.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Ni),Ri=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ri(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Ri.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Di(Ci.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Di(Ci.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Di(Ci.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Di(Ci.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Ni),xi=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Oi.fromString(e))},t.fromName=function(e){return new t(Oi.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Oi.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Oi.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Oi(e.slice()))},t}(),Li=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return bi(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Li.EMPTY_BYTE_STRING=new Li("");var Mi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fi(t){if(vi(!!t),"string"==typeof t){var e=0,n=Mi.exec(t);if(vi(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ui(t.seconds),nanos:Ui(t.nanos)}}function Ui(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Vi(t){return"string"==typeof t?Li.fromBase64String(t):Li.fromUint8Array(t)}var ji=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Di(Ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Di(Ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Di(Ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Di(Ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?bi(this.nanoseconds,t.nanoseconds):bi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function Bi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qi(t){var e=t.mapValue.fields.__previous_value__;return Bi(e)?qi(e):e}function Ki(t){var e=Fi(t.mapValue.fields.__local_write_time__.timestampValue);return new ji(e.seconds,e.nanos)}function Gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bi(t)?4:10:di()}function Hi(t,e){var n=Gi(t);if(n!==Gi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ki(t).isEqual(Ki(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Fi(t.timestampValue),r=Fi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Vi(t.bytesValue).isEqual(Vi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ui(t.geoPointValue.latitude)===Ui(e.geoPointValue.latitude)&&Ui(t.geoPointValue.longitude)===Ui(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ui(t.integerValue)===Ui(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ui(t.doubleValue),r=Ui(e.doubleValue);return n===r?Si(n)===Si(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return wi(t.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ei(n)!==Ei(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Hi(n[i],r[i])))return!1;return!0}(t,e);default:return di()}}function zi(t,e){return void 0!==(t.values||[]).find((function(t){return Hi(t,e)}))}function Wi(t,e){var n=Gi(t),r=Gi(e);if(n!==r)return bi(n,r);switch(n){case 0:return 0;case 1:return bi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ui(t.integerValue||t.doubleValue),r=Ui(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Xi(t.timestampValue,e.timestampValue);case 4:return Xi(Ki(t),Ki(e));case 5:return bi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Vi(t),r=Vi(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=bi(n[i],r[i]);if(0!==o)return o}return bi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=bi(Ui(t.latitude),Ui(e.latitude));return 0!==n?n:bi(Ui(t.longitude),Ui(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Wi(n[i],r[i]);if(o)return o}return bi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=bi(r[a],o[a]);if(0!==s)return s;var u=Wi(n[r[a]],i[o[a]]);if(0!==u)return u}return bi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw di()}}function Xi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return bi(t,e);var n=Fi(t),r=Fi(e),i=bi(n.seconds,r.seconds);return 0!==i?i:bi(n.nanos,r.nanos)}function Qi(t){return Yi(t)}function Yi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Fi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Vi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,xi.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Yi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Yi(t.fields[o])}return e+"}"}(t.mapValue):di();var e,n}function Ji(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function $i(t){return!!t&&"integerValue"in t}function Zi(t){return!!t&&"arrayValue"in t}function to(t){return!!t&&"nullValue"in t}function eo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function no(t){return!!t&&"mapValue"in t}var ro=function(t,e){this.key=t,this.version=e},io=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return ri(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(ro),oo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return ri(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ro),ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ri(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ro),so=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function uo(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new so(t,e,n,r,i,o,a)}function co(t){var e=gi(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Qi(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Ti(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Io(e.startAt)),e.endAt&&(n+="|ub:",n+=Io(e.endAt)),e.h=n}return e.h}function ho(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!To(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Hi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ao(t.startAt,e.startAt)&&Ao(t.endAt,e.endAt)}function lo(t){return xi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var fo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return ri(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new po(t,n,r):"array-contains"===n?new yo(t,r):"in"===n?new bo(t,r):"not-in"===n?new wo(t,r):"array-contains-any"===n?new _o(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new vo(t,n):new go(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(Wi(e,this.value)):null!==e&&Gi(this.value)===Gi(e)&&this.m(Wi(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return di()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),po=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=xi.fromName(r.referenceValue),i}return ri(e,t),e.prototype.matches=function(t){var e=xi.comparator(t.key,this.key);return this.m(e)},e}(fo),vo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=mo(0,n),r}return ri(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(fo),go=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=mo(0,n),r}return ri(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(fo);function mo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return xi.fromName(t.referenceValue)}))}var yo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return ri(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Zi(e)&&zi(e.arrayValue,this.value)},e}(fo),bo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return ri(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&zi(this.value.arrayValue,e)},e}(fo),wo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return ri(e,t),e.prototype.matches=function(t){if(zi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!zi(this.value.arrayValue,e)},e}(fo),_o=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return ri(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Zi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return zi(e.value.arrayValue,t)}))},e}(fo),Eo=function(t,e){this.position=t,this.before=e};function Io(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Qi(t)})).join(",")}var ko=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function To(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function So(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?xi.comparator(xi.fromName(a.referenceValue),n.key):Wi(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ao(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Hi(t.position[n],e.position[n]))return!1;return!0}var Co=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Do(t,e,n,r,i,o,a,s){return new Co(t,e,n,r,i,o,a,s)}function No(t){return new Co(t)}function Oo(t){return!Ti(t.limit)&&"F"===t.limitType}function Ro(t){return!Ti(t.limit)&&"L"===t.limitType}function Po(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function xo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Lo(t){return null!==t.collectionGroup}function Mo(t){var e=gi(t);if(null===e.p){e.p=[];var n=xo(e),r=Po(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ko(n)),e.p.push(new ko(Pi.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ko(Pi.keyField(),u))}}}return e.p}function Fo(t){var e=gi(t);if(!e.T)if("F"===e.limitType)e.T=uo(e.path,e.collectionGroup,Mo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Mo(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new ko(o.field,a))}var s=e.endAt?new Eo(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Eo(e.startAt.position,!e.startAt.before):null;e.T=uo(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function Uo(t,e,n){return new Co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vo(t,e){return ho(Fo(t),Fo(e))&&t.limitType===e.limitType}function jo(t){return co(Fo(t))+"|lt:"+t.limitType}function Bo(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Qi(e.value);var e})).join(", ")+"]"),Ti(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Io(t.startAt)),t.endAt&&(e+=", endAt: "+Io(t.endAt)),"Target("+e+")"}(Fo(t))+"; limitType="+t.limitType+")"}function qo(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):xi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!So(t.startAt,Mo(t),e)||t.endAt&&So(t.endAt,Mo(t),e))}(t,e)}function Ko(t){return function(e,n){for(var r=!1,i=0,o=Mo(t);i<o.length;i++){var a=o[i],s=Go(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Go(t,e,n){var r=t.field.isKeyField()?xi.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Wi(r,i):di()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return di()}}var Ho=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new ji(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),zo=function(){function t(t){this.fields=t,t.sort(Pi.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return wi(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Wo=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!no(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return Hi(this.proto,t.proto)},t}(),Xo=function(){function t(t){void 0===t&&(t=Wo.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Gi(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(Pi.emptyPath(),this.A);return null!=t?new Wo(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=no(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.P(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Qo(t){var e=[];return Ii(t.fields||{},(function(t,n){var r=new Pi([t]);if(no(n)){var i=Qo(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new zo(e)}function Yo(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Si(e)?"-0":e}}function Jo(t){return{integerValue:""+t}}function $o(t,e){return Ai(e)?Jo(e):Yo(t,e)}var Zo=function(){this._=void 0};function ta(t,e,n){return t instanceof ra?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ia?oa(t,e):t instanceof aa?sa(t,e):function(t,e){var n=na(t,e),r=ca(n)+ca(t.S);return $i(n)&&$i(t.S)?Jo(r):Yo(t.D,r)}(t,e)}function ea(t,e,n){return t instanceof ia?oa(t,e):t instanceof aa?sa(t,e):n}function na(t,e){return t instanceof ua?$i(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ra=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ri(e,t),e}(Zo),ia=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ri(e,t),e}(Zo);function oa(t,e){for(var n=ha(e),r=function(t){n.some((function(e){return Hi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var aa=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ri(e,t),e}(Zo);function sa(t,e){for(var n=ha(e),r=function(t){n=n.filter((function(e){return!Hi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ua=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return ri(e,t),e}(Zo);function ca(t){return Ui(t.integerValue||t.doubleValue)}function ha(t){return Zi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var la=function(t,e){this.field=t,this.transform=e},fa=function(t,e){this.version=t,this.transformResults=e},pa=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function da(t,e){return void 0!==t.updateTime?e instanceof io&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof io}var va=function(){};function ga(t,e,n){return t instanceof _a?function(t,e,n){var r=t.value,i=ka(t.fieldTransforms,e,n.transformResults);return r=Sa(t.fieldTransforms,r,i),new io(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ea?function(t,e,n){if(!da(t.precondition,e))return new ao(t.key,n.version);var r=Ia(t,e,ka(t.fieldTransforms,e,n.transformResults));return new io(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new oo(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function ma(t,e,n){return t instanceof _a?function(t,e,n){if(!da(t.precondition,e))return e;var r=t.value,i=Ta(t.fieldTransforms,n,e);r=Sa(t.fieldTransforms,r,i);var o=wa(e);return new io(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof Ea?function(t,e,n){if(!da(t.precondition,e))return e;var r=wa(e),i=Ia(t,e,Ta(t.fieldTransforms,n,e));return new io(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return da(t.precondition,e)?new oo(t.key,Ho.min()):e}(t,e)}function ya(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],a=e instanceof io?e.field(o.field):void 0,s=na(o.transform,a||null);null!=s&&(n=null==n?(new Xo).set(o.field,s):n.set(o.field,s))}return n?n.v():null}(t.fieldTransforms,e)}function ba(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&wi(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ia&&e instanceof ia||t instanceof aa&&e instanceof aa?wi(t.elements,e.elements,Hi):t instanceof ua&&e instanceof ua?Hi(t.S,e.S):t instanceof ra&&e instanceof ra}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function wa(t){return t instanceof io?t.version:Ho.min()}var _a=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return ri(e,t),e}(va),Ea=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return ri(e,t),e}(va);function Ia(t,e,n){var r;return r=function(t,e){var n=new Xo(e);return t.fieldMask.fields.forEach((function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.v()}(t,r=e instanceof io?e.data():Wo.empty()),Sa(t.fieldTransforms,r,n)}function ka(t,e,n){var r=[];vi(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=null;e instanceof io&&(s=e.field(o.field)),r.push(ea(a,s,n[i]))}return r}function Ta(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=null;n instanceof io&&(u=n.field(a.field)),r.push(ta(s,u,e))}return r}function Sa(t,e,n){for(var r=new Xo(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.v()}var Aa,Ca,Da=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return ri(e,t),e}(va),Na=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return ri(e,t),e}(va),Oa=function(t){this.count=t};function Ra(t){switch(t){case Ci.OK:return di();case Ci.CANCELLED:case Ci.UNKNOWN:case Ci.DEADLINE_EXCEEDED:case Ci.RESOURCE_EXHAUSTED:case Ci.INTERNAL:case Ci.UNAVAILABLE:case Ci.UNAUTHENTICATED:return!1;case Ci.INVALID_ARGUMENT:case Ci.NOT_FOUND:case Ci.ALREADY_EXISTS:case Ci.PERMISSION_DENIED:case Ci.FAILED_PRECONDITION:case Ci.ABORTED:case Ci.OUT_OF_RANGE:case Ci.UNIMPLEMENTED:case Ci.DATA_LOSS:return!0;default:return di()}}function Pa(t){if(void 0===t)return li("GRPC error has no .code"),Ci.UNKNOWN;switch(t){case Aa.OK:return Ci.OK;case Aa.CANCELLED:return Ci.CANCELLED;case Aa.UNKNOWN:return Ci.UNKNOWN;case Aa.DEADLINE_EXCEEDED:return Ci.DEADLINE_EXCEEDED;case Aa.RESOURCE_EXHAUSTED:return Ci.RESOURCE_EXHAUSTED;case Aa.INTERNAL:return Ci.INTERNAL;case Aa.UNAVAILABLE:return Ci.UNAVAILABLE;case Aa.UNAUTHENTICATED:return Ci.UNAUTHENTICATED;case Aa.INVALID_ARGUMENT:return Ci.INVALID_ARGUMENT;case Aa.NOT_FOUND:return Ci.NOT_FOUND;case Aa.ALREADY_EXISTS:return Ci.ALREADY_EXISTS;case Aa.PERMISSION_DENIED:return Ci.PERMISSION_DENIED;case Aa.FAILED_PRECONDITION:return Ci.FAILED_PRECONDITION;case Aa.ABORTED:return Ci.ABORTED;case Aa.OUT_OF_RANGE:return Ci.OUT_OF_RANGE;case Aa.UNIMPLEMENTED:return Ci.UNIMPLEMENTED;case Aa.DATA_LOSS:return Ci.DATA_LOSS;default:return di()}}(Ca=Aa||(Aa={}))[Ca.OK=0]="OK",Ca[Ca.CANCELLED=1]="CANCELLED",Ca[Ca.UNKNOWN=2]="UNKNOWN",Ca[Ca.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ca[Ca.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ca[Ca.NOT_FOUND=5]="NOT_FOUND",Ca[Ca.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ca[Ca.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ca[Ca.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ca[Ca.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ca[Ca.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ca[Ca.ABORTED=10]="ABORTED",Ca[Ca.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ca[Ca.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ca[Ca.INTERNAL=13]="INTERNAL",Ca[Ca.UNAVAILABLE=14]="UNAVAILABLE",Ca[Ca.DATA_LOSS=15]="DATA_LOSS";var xa=function(){function t(t,e){this.comparator=t,this.root=e||Ma.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ma.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ma.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new La(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new La(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new La(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new La(this.root,t,this.comparator,!0)},t}(),La=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ma=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw di();if(this.right.isRed())throw di();var t=this.left.check();if(t!==this.right.check())throw di();return t+(this.isRed()?0:1)},t}();Ma.EMPTY=null,Ma.RED=!0,Ma.BLACK=!1,Ma.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw di()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw di()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw di()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw di()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw di()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ma(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Fa=function(){function t(t){this.comparator=t,this.data=new xa(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ua(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ua(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ua=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Va=new xa(xi.comparator);function ja(){return Va}function Ba(){return ja()}var qa=new xa(xi.comparator);function Ka(){return qa}var Ga=new xa(xi.comparator);function Ha(){return Ga}var za=new Fa(xi.comparator);function Wa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=za,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Xa=new Fa(bi);function Qa(){return Xa}var Ya=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Ja.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Ho.min(),r,Qa(),ja(),Wa())},t}(),Ja=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Li.EMPTY_BYTE_STRING,n,Wa(),Wa(),Wa())},t}(),$a=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},Za=function(t,e){this.targetId=t,this.$=e},ts=function(t,e,n,r){void 0===n&&(n=Li.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},es=function(){function t(){this.F=0,this.O=is(),this.k=Li.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=Wa(),e=Wa(),n=Wa();return this.O.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:di()}})),new Ja(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=is()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),ns=function(){function t(t){this.X=t,this.Z=new Map,this.tt=ja(),this.et=rs(),this.nt=new Fa(bi)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof io?this.it(r,t.N):t.N instanceof oo&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.rt(r,t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:di()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach((function(t,r){n.at(r)&&e(r)}))},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(lo(i))if(0===n){var o=new xi(i.path);this.rt(e,o,new oo(o,Ho.min()))}else vi(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach((function(r,i){var o=e.lt(i);if(o){if(r.current&&lo(o.target)){var a=new xi(o.target.path);null!==e.tt.get(a)||e.wt(i,a)||e.rt(i,a,new oo(a,t))}r.q&&(n.set(i,r.K()),r.W())}}));var r=Wa();this.et.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Ya(t,n,this.nt,this.tt,r);return this.tt=ja(),this.et=rs(),this.nt=new Fa(bi),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new es,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new Fa(bi),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||hi("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new es),this.X.getRemoteKeysForTarget(t).forEach((function(n){e.rt(t,n,null)}))},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function rs(){return new xa(xi.comparator)}function is(){return new xa(xi.comparator)}var os={asc:"ASCENDING",desc:"DESCENDING"},as={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ss=function(t,e){this.databaseId=t,this.V=e};function us(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function cs(t,e){return t.V?e.toBase64():e.toUint8Array()}function hs(t,e){return us(t,e.toTimestamp())}function ls(t){return vi(!!t),Ho.fromTimestamp(function(t){var e=Fi(t);return new ji(e.seconds,e.nanos)}(t))}function fs(t,e){return function(t){return new Oi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function ps(t){var e=Oi.fromString(t);return vi(Fs(e)),e}function ds(t,e){return fs(t.databaseId,e.path)}function vs(t,e){var n=ps(e);if(n.get(1)!==t.databaseId.projectId)throw new Di(Ci.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Di(Ci.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xi(bs(n))}function gs(t,e){return fs(t.databaseId,e)}function ms(t){var e=ps(t);return 4===e.length?Oi.emptyPath():bs(e)}function ys(t){return new Oi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bs(t){return vi(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ws(t,e,n){return{name:ds(t,e),fields:n.proto.mapValue.fields}}function _s(t,e,n){var r=vs(t,e.name),i=ls(e.updateTime),o=new Wo({mapValue:{fields:e.fields}});return new io(r,i,o,{hasCommittedMutations:!!n})}function Es(t,e){var n;if(e instanceof _a)n={update:ws(t,e.key,e.value)};else if(e instanceof Da)n={delete:ds(t,e.key)};else if(e instanceof Ea)n={update:ws(t,e.key,e.data),updateMask:Ms(e.fieldMask)};else{if(!(e instanceof Na))return di();n={verify:ds(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ra)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ia)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof aa)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ua)return{fieldPath:e.field.canonicalString(),increment:n.S};throw di()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:hs(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:di()}(t,e.precondition)),n}function Is(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?pa.updateTime(ls(t.updateTime)):void 0!==t.exists?pa.exists(t.exists):pa.none()}(e.currentDocument):pa.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)vi("REQUEST_TIME"===e.setToServerValue),n=new ra;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ia(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new aa(i)}else"increment"in e?n=new ua(t,e.increment):di();var o=Pi.fromServerFormat(e.fieldPath);return new la(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=vs(t,e.update.name),o=new Wo({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new zo(e.map((function(t){return Pi.fromServerFormat(t)})))}(e.updateMask);return new Ea(i,o,a,n,r)}return new _a(i,o,n,r)}if(e.delete){var s=vs(t,e.delete);return new Da(s,n)}if(e.verify){var u=vs(t,e.verify);return new Na(u,n)}return di()}function ks(t,e){return{documents:[gs(t,e.path)]}}function Ts(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=gs(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=gs(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(eo(t.value))return{unaryFilter:{field:Rs(t.field),op:"IS_NAN"}};if(to(t.value))return{unaryFilter:{field:Rs(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(eo(t.value))return{unaryFilter:{field:Rs(t.field),op:"IS_NOT_NAN"}};if(to(t.value))return{unaryFilter:{field:Rs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rs(t.field),op:Os(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Rs(t.field),direction:Ns(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.V||Ti(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Cs(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Cs(e.endAt)),n}function Ss(t){var e=ms(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){vi(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=As(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new ko(Ps(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Ti(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ds(n.startAt));var h=null;return n.endAt&&(h=Ds(n.endAt)),Do(e,i,s,a,u,"F",c,h)}function As(t){return t?void 0!==t.unaryFilter?[Ls(t)]:void 0!==t.fieldFilter?[xs(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return As(t)})).reduce((function(t,e){return t.concat(e)})):di():[]}function Cs(t){return{before:t.before,values:t.position}}function Ds(t){var e=!!t.before,n=t.values||[];return new Eo(n,e)}function Ns(t){return os[t]}function Os(t){return as[t]}function Rs(t){return{fieldPath:t.canonicalString()}}function Ps(t){return Pi.fromServerFormat(t.fieldPath)}function xs(t){return fo.create(Ps(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return di()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ls(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ps(t.unaryFilter.field);return fo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ps(t.unaryFilter.field);return fo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ps(t.unaryFilter.field);return fo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ps(t.unaryFilter.field);return fo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return di()}}function Ms(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Fs(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Us(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=js(e)),e=Vs(t.get(n),e);return js(e)}function Vs(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function js(t){return t+""}function Bs(t){var e=t.length;if(vi(e>=2),2===e)return vi(""===t.charAt(0)&&""===t.charAt(1)),Oi.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&di(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:di()}o=a+2}return new Oi(r)}var qs=function(t,e){this.seconds=t,this.nanoseconds=e},Ks=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ks.store="owner",Ks.key="owner";var Gs=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Gs.store="mutationQueues",Gs.keyPath="userId";var Hs=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Hs.store="mutations",Hs.keyPath="batchId",Hs.userMutationsIndex="userMutationsIndex",Hs.userMutationsKeyPath=["userId","batchId"];var zs=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Us(e)]},t.key=function(t,e,n){return[t,Us(e),n]},t}();zs.store="documentMutations",zs.PLACEHOLDER=new zs;var Ws=function(t,e){this.path=t,this.readTime=e},Xs=function(t,e){this.path=t,this.version=e},Qs=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Qs.store="remoteDocuments",Qs.readTimeIndex="readTimeIndex",Qs.readTimeIndexPath="readTime",Qs.collectionReadTimeIndex="collectionReadTimeIndex",Qs.collectionReadTimeIndexPath=["parentPath","readTime"];var Ys=function(t){this.byteSize=t};Ys.store="remoteDocumentGlobal",Ys.key="remoteDocumentGlobalKey";var Js=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Js.store="targets",Js.keyPath="targetId",Js.queryTargetsIndexName="queryTargetsIndex",Js.queryTargetsKeyPath=["canonicalId","targetId"];var $s=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};$s.store="targetDocuments",$s.keyPath=["targetId","path"],$s.documentTargetsIndex="documentTargetsIndex",$s.documentTargetsKeyPath=["path","targetId"];var Zs=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Zs.key="targetGlobalKey",Zs.store="targetGlobal";var tu=function(t,e){this.collectionId=t,this.parent=e};tu.store="collectionParents",tu.keyPath=["collectionId","parent"];var eu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};eu.store="clientMetadata",eu.keyPath="clientId";var nu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};nu.store="bundles",nu.keyPath="bundleId";var ru=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ru.store="namedQueries",ru.keyPath="name";var iu=ai(ai([],ai(ai([],ai(ai([],ai(ai([],[Gs.store,Hs.store,zs.store,Qs.store,Js.store,Ks.store,Zs.store,$s.store]),[eu.store])),[Ys.store])),[tu.store])),[nu.store,ru.store]),ou="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",au=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),su=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},uu=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&di(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),cu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new su,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new fu(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=mu(e.target.error);n.gt.reject(new fu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new fu(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(hi("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new du(e)},t}(),hu=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(u())&&li("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return hi("SimpleDb","Removing database:",t),vu(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=u(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return ii(this,void 0,void 0,(function(){var e,n=this;return oi(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(hi("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new fu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Di(Ci.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new fu(t,n))},i.onupgradeneeded=function(t){hi("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Tt.St(e,i.transaction,t.oldVersion,n.version).next((function(){hi("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}}))}))},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return ii(this,void 0,void 0,(function(){var i,o,a,s,u;return oi(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,h;return oi(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,s.Vt(t)];case 2:return s.db=l.sent(),e=cu.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),uu.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.Et];case 3:return[2,(u.value=(l.sent(),a),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,hi("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),lu=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return vu(this.xt.delete())},t}(),fu=function(t){function e(e,n){var r=this;return(r=t.call(this,Ci.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return ri(e,t),e}(Di);function pu(t){return"IndexedDbTransactionError"===t.name}var du=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(hi("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(hi("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),vu(n)},t.prototype.add=function(t){return hi("SimpleDb","ADD",this.store.name,t,t),vu(this.store.add(t))},t.prototype.get=function(t){var e=this;return vu(this.store.get(t)).next((function(n){return void 0===n&&(n=null),hi("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return hi("SimpleDb","DELETE",this.store.name,t),vu(this.store.delete(t))},t.prototype.count=function(){return hi("SimpleDb","COUNT",this.store.name),vu(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Lt=function(t,e){hi("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,(function(t,e,n){return n.delete()}))},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new uu((function(n,r){e.onerror=function(t){var e=mu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Mt=function(t,e){var n=[];return new uu((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new lu(i),a=e(i.primaryKey,i.value,o);if(a instanceof uu){var s=a.catch((function(t){return o.done(),uu.reject(t)}));n.push(s)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}})).next((function(){return uu.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function vu(t){return new uu((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=mu(t.target.error);n(e)}}))}var gu=!1;function mu(t){var e=hu.It(u());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Di("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return gu||(gu=!0,setTimeout((function(){throw r}),0)),r}}return t}var yu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return ri(e,t),e}(au);function bu(t,e){var n=gi(t);return hu.Pt(n.Qt,e)}var wu=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=ga(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=ma(a,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var a;(a=o[i]).key.isEqual(t)&&(e=ma(a,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Wa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&wi(this.mutations,t.mutations,(function(t,e){return ba(t,e)}))&&wi(this.baseMutations,t.baseMutations,(function(t,e){return ba(t,e)}))},t}(),_u=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){vi(e.mutations.length===r.length);for(var i=Ha(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Eu=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Ho.min()),void 0===o&&(o=Ho.min()),void 0===a&&(a=Li.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Iu=function(t){this.Kt=t};function ku(t,e){if(e.document)return _s(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=xi.fromSegments(e.noDocument.path),r=Du(e.noDocument.readTime);return new oo(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=xi.fromSegments(e.unknownDocument.path);return r=Du(e.unknownDocument.version),new ao(i,r)}return di()}function Tu(t,e,n){var r=Su(n),i=e.key.path.popLast().toArray();if(e instanceof io){var o=function(t,e){return{name:ds(t,e.key),fields:e.toProto().mapValue.fields,updateTime:us(t,e.version.toTimestamp())}}(t.Kt,e),a=e.hasCommittedMutations;return new Qs(null,null,o,a,r,i)}if(e instanceof oo){var s=e.key.path.toArray(),u=Cu(e.version);return a=e.hasCommittedMutations,new Qs(null,new Ws(s,u),null,a,r,i)}if(e instanceof ao){var c=e.key.path.toArray(),h=Cu(e.version);return new Qs(new Xs(c,h),null,null,!0,r,i)}return di()}function Su(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Au(t){var e=new ji(t[0],t[1]);return Ho.fromTimestamp(e)}function Cu(t){var e=t.toTimestamp();return new qs(e.seconds,e.nanoseconds)}function Du(t){var e=new ji(t.seconds,t.nanoseconds);return Ho.fromTimestamp(e)}function Nu(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Is(t.Kt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return Is(t.Kt,e)})),s=ji.fromMillis(e.localWriteTimeMs);return new wu(e.batchId,s,n,a)}function Ou(t){var e,n,r=Du(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Du(t.lastLimboFreeSnapshotVersion):Ho.min();return void 0!==t.query.documents?(vi(1===(n=t.query).documents.length),e=Fo(No(ms(n.documents[0])))):e=function(t){return Fo(Ss(t))}(t.query),new Eu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Li.fromBase64String(t.resumeToken))}function Ru(t,e){var n,r=Cu(e.snapshotVersion),i=Cu(e.lastLimboFreeSnapshotVersion);n=lo(e.target)?ks(t.Kt,e.target):Ts(t.Kt,e.target);var o=e.resumeToken.toBase64();return new Js(e.targetId,co(e.target),r,o,e.sequenceNumber,i,n)}function Pu(t){var e=Ss({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Uo(e,e.limit,"L"):e}var xu=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Lu(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Du(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Lu(t).put({bundleId:(n=e).id,createTime:Cu(ls(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Mu(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Pu(e.bundledQuery),readTime:Du(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Mu(t).put(function(t){return{name:t.name,readTime:Cu(ls(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Lu(t){return bu(t,nu.store)}function Mu(t){return bu(t,ru.store)}var Fu=function(){function t(){this.Wt=new Uu}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),uu.resolve()},t.prototype.getCollectionParents=function(t,e){return uu.resolve(this.Wt.getEntries(e))},t}(),Uu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Fa(Oi.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Fa(Oi.comparator)).toArray()},t}(),Vu=function(){function t(){this.jt=new Uu}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.jt.add(e)}));var o={collectionId:r,parent:Us(i)};return ju(t).put(o)}return uu.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[_i(e),""],!1,!0);return ju(t).kt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Bs(o.parent))}return n}))},t}();function ju(t){return bu(t,tu.store)}var Bu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qu=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Ku(t,e,n){var r=t.store(Hs.store),i=t.store(zs.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.qt({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){vi(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=zs.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return uu.waitFor(o).next((function(){return c}))}function Gu(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw di();e=t.noDocument}return JSON.stringify(e).length}qu.DEFAULT_COLLECTION_PERCENTILE=10,qu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qu.DEFAULT=new qu(41943040,qu.DEFAULT_COLLECTION_PERCENTILE,qu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qu.DISABLED=new qu(-1,0,0);var Hu=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return vi(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wu(t).qt({index:Hs.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Xu(t),a=Wu(t);return a.add({}).next((function(s){vi("number"==typeof s);for(var u=new wu(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Es(t.Kt,e)})),i=n.mutations.map((function(e){return Es(t.Kt,e)}));return new Hs(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),h=[],l=new Fa((function(t,e){return bi(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=zs.key(i.userId,d.key.path,s);l=l.add(d.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,zs.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Gt.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.zt[s]=u.keys()})),uu.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Wu(t).get(e).next((function(t){return t?(vi(t.userId===n.userId),Nu(n.D,t)):null}))},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?uu.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Wu(t).qt({index:Hs.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(vi(e.batchId>=r),o=Nu(n.D,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Wu(t).qt({index:Hs.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wu(t).kt(Hs.userMutationsIndex,n).next((function(t){return t.map((function(t){return Nu(e.D,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=zs.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Xu(t).qt({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=Bs(u);if(s===n.userId&&e.path.isEqual(h))return Wu(t).get(c).next((function(t){if(!t)throw di();vi(t.userId===n.userId),o.push(Nu(n.D,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Fa(bi),i=[];return e.forEach((function(e){var o=zs.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Xu(t).qt({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Bs(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),uu.waitFor(i).next((function(){return n.Yt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=zs.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Fa(bi);return Xu(t).qt({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=Bs(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Yt(t,s)}))},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Wu(t).get(e).next((function(t){if(null===t)throw di();vi(t.userId===n.userId),r.push(Nu(n.D,t))})))})),uu.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Ku(t.Qt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Xt(e.batchId)})),uu.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return uu.resolve();var r=IDBKeyRange.lowerBound(zs.prefixForUser(e.userId)),i=[];return Xu(t).qt({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Bs(t[1]);i.push(o)}else r.done()})).next((function(){vi(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return zu(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return Qu(t).get(this.userId).next((function(t){return t||new Gs(e.userId,-1,"")}))},t}();function zu(t,e,n){var r=zs.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Xu(t).qt({range:o,Bt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Wu(t){return bu(t,Hs.store)}function Xu(t){return bu(t,zs.store)}function Qu(t){return bu(t,Gs.store)}var Yu=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),Ju=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next((function(n){var r=new Yu(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next((function(t){return Ho.fromTimestamp(new ji(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next((function(){return n.se(t).next((function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return $u(t).delete(e.targetId)})).next((function(){return n.se(t)})).next((function(e){return vi(e.targetCount>0),e.targetCount-=1,n.ie(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return $u(t).qt((function(a,s){var u=Ou(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return uu.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return $u(t).qt((function(t,n){var r=Ou(n);e(r)}))},t.prototype.se=function(t){return Zu(t).get(Zs.key).next((function(t){return vi(null!==t),t}))},t.prototype.ie=function(t,e){return Zu(t).put(Zs.key,e)},t.prototype.re=function(t,e){return $u(t).put(Ru(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=co(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return $u(t).qt({range:r,index:Js.queryTargetsIndexName},(function(t,n,r){var o=Ou(n);ho(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=tc(t);return e.forEach((function(e){var a=Us(e.path);i.push(o.put(new $s(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),uu.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=tc(t);return uu.forEach(e,(function(e){var o=Us(e.path);return uu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=tc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=tc(t),i=Wa();return r.qt({range:n,Bt:!0},(function(t,e,n){var r=Bs(t[1]),o=new xi(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Us(e.path),r=IDBKeyRange.bound([n],[_i(n)],!1,!0),i=0;return tc(t).qt({index:$s.documentTargetsIndex,Bt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.yt=function(t,e){return $u(t).get(e).next((function(t){return t?Ou(t):null}))},t}();function $u(t){return bu(t,Js.store)}function Zu(t){return bu(t,Zs.store)}function tc(t){return bu(t,$s.store)}function ec(t){return ii(this,void 0,void 0,(function(){return oi(this,(function(e){if(t.code!==Ci.FAILED_PRECONDITION||t.message!==ou)throw t;return hi("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function nc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=bi(n,i);return 0===a?bi(r,o):a}var rc=function(){function t(t){this.ce=t,this.buffer=new Fa(nc),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();nc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ic=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;hi("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return ii(e,void 0,void 0,(function(){var e;return oi(this,(function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return pu(e=n.sent())?(hi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ec(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),oc=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return uu.resolve(si.o);var r=new rc(e);return this.we.forEachTarget(t,(function(t){return r.he(t.sequenceNumber)})).next((function(){return n.we.me(t,(function(t){return r.he(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(hi("LruGarbageCollector","Garbage collection skipped; disabled"),uu.resolve(Bu)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(hi("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Bu):n.ye(t,e)}))},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(hi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),ci()<=A.DEBUG&&hi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),uu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),ac=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new oc(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.ge=function(t){var e=0;return this.me(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return sc(t,n)},t.prototype.removeReference=function(t,e,n){return sc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return sc(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return Qu(t).Ut((function(r){return zu(t,r,e).next((function(t){return t&&(n=!0),uu.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,(function(a,s){if(s<=e){var u=n.Ee(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),tc(t).delete([0,Us(a.path)])}))}));i.push(u)}})).next((function(){return uu.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return sc(t,e)},t.prototype.pe=function(t,e){var n,r=tc(t),i=si.o;return r.qt({index:$s.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==si.o&&e(new xi(Bs(n)),i),i=s,n=a):i=si.o})).next((function(){i!==si.o&&e(new xi(Bs(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function sc(t,e){return tc(t).put(function(t,e){return new $s(0,Us(t.path),e)}(e,t.currentSequenceNumber))}var uc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ii(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return ki(this.inner)},t}(),cc=function(){function t(){this.changes=new uc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Ho.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?uu.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),hc=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return pc(t).put(dc(e),n)},t.prototype.removeEntry=function(t,e){var n=pc(t),r=dc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Te(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return pc(t).get(dc(e)).next((function(t){return n.Ie(t)}))},t.prototype.Ae=function(t,e){var n=this;return pc(t).get(dc(e)).next((function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:Gu(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Ba();return this.Re(t,e,(function(t,e){var i=n.Ie(e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.be=function(t,e){var n=this,r=Ba(),i=new xa(xi.comparator);return this.Re(t,e,(function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,Gu(e))):(r=r.insert(t,null),i=i.insert(t,0))})).next((function(){return{ve:r,Pe:i}}))},t.prototype.Re=function(t,e,n){if(e.isEmpty())return uu.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return pc(t).qt({range:r},(function(t,e,r){for(var a=xi.fromSegments(t);o&&xi.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Ka(),o=e.path.length+1,a={};if(n.isEqual(Ho.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Su(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Qs.collectionReadTimeIndex}return pc(t).qt(a,(function(t,n,a){if(t.length===o){var s=ku(r.D,n);e.path.isPrefixOf(s.key.path)?s instanceof io&&qo(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new lc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return fc(t).get(Ys.key).next((function(t){return vi(!!t),t}))},t.prototype.Te=function(t,e){return fc(t).put(Ys.key,e)},t.prototype.Ie=function(t){if(t){var e=ku(this.D,t);return e instanceof oo&&e.version.isEqual(Ho.min())?null:e}return null},t}(),lc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new uc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return ri(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Fa((function(t,e){return bi(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Se.get(o);if(a.maybeDocument){var u=Tu(e.Ve.D,a.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=Gu(u);r+=c-s,n.push(e.Ve.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=Tu(e.Ve.D,new oo(o,Ho.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,h))}else n.push(e.Ve.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))})),n.push(this.Ve.updateMetadata(t,r)),uu.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next((function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next((function(t){var e=t.ve;return t.Pe.forEach((function(t,e){n.Se.set(t,e)})),e}))},e}(cc);function fc(t){return bu(t,Ys.store)}function pc(t){return bu(t,Qs.store)}function dc(t){return t.path.toArray()}var vc=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;vi(n<r&&n>=0&&r<=11);var o=new cu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ks.store)}(t),function(t){t.createObjectStore(Gs.store,{keyPath:Gs.keyPath}),t.createObjectStore(Hs.store,{keyPath:Hs.keyPath,autoIncrement:!0}).createIndex(Hs.userMutationsIndex,Hs.userMutationsKeyPath,{unique:!0}),t.createObjectStore(zs.store)}(t),gc(t),function(t){t.createObjectStore(Qs.store)}(t));var a=uu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore($s.store),t.deleteObjectStore(Js.store),t.deleteObjectStore(Zs.store)}(t),gc(t)),a=a.next((function(){return function(t){var e=t.store(Zs.store),n=new Zs(0,0,Ho.min().toTimestamp(),0);return e.put(Zs.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Hs.store).kt().next((function(n){t.deleteObjectStore(Hs.store),t.createObjectStore(Hs.store,{keyPath:Hs.keyPath,autoIncrement:!0}).createIndex(Hs.userMutationsIndex,Hs.userMutationsKeyPath,{unique:!0});var r=e.store(Hs.store),i=n.map((function(t){return r.put(t)}));return uu.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(eu.store,{keyPath:eu.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.De(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Ys.store)}(t),i.Ce(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.xe(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Ne(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Qs.store);e.createIndex(Qs.readTimeIndex,Qs.readTimeIndexPath,{unique:!1}),e.createIndex(Qs.collectionReadTimeIndex,Qs.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.$e(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(nu.store,{keyPath:nu.keyPath})}(t),function(t){t.createObjectStore(ru.store,{keyPath:ru.keyPath})}(t)}))),a},t.prototype.Ce=function(t){var e=0;return t.store(Qs.store).qt((function(t,n){e+=Gu(n)})).next((function(){var n=new Ys(e);return t.store(Ys.store).put(Ys.key,n)}))},t.prototype.De=function(t){var e=this,n=t.store(Gs.store),r=t.store(Hs.store);return n.kt().next((function(n){return uu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(Hs.userMutationsIndex,i).next((function(r){return uu.forEach(r,(function(r){vi(r.userId===n.userId);var i=Nu(e.D,r);return Ku(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.xe=function(t){var e=t.store($s.store),n=t.store(Qs.store);return t.store(Zs.store).get(Zs.key).next((function(t){var r=[];return n.qt((function(n,i){var o=new Oi(n),a=function(t){return[0,Us(t)]}(o);r.push(e.get(a).next((function(n){return n?uu.resolve():function(n){return e.put(new $s(0,Us(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return uu.waitFor(r)}))}))},t.prototype.Ne=function(t,e){t.createObjectStore(tu.store,{keyPath:tu.keyPath});var n=e.store(tu.store),r=new Uu,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Us(i)})}};return e.store(Qs.store).qt({Bt:!0},(function(t,e){var n=new Oi(t);return i(n.popLast())})).next((function(){return e.store(zs.store).qt({Bt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Bs(n));return i(r.popLast())}))}))},t.prototype.$e=function(t){var e=this,n=t.store(Js.store);return n.qt((function(t,r){var i=Ou(r),o=Ru(e.D,i);return n.put(o)}))},t}();function gc(t){t.createObjectStore($s.store,{keyPath:$s.keyPath}).createIndex($s.documentTargetsIndex,$s.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Js.store,{keyPath:Js.keyPath}).createIndex(Js.queryTargetsIndexName,Js.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Zs.store)}var mc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yc=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=a,this.document=s,this.Oe=c,this.ke=h,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new Di(Ci.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ac(this,i),this.We=n+"main",this.D=new Iu(u),this.je=new hu(this.We,11,new vc(this.D)),this.Ge=new Ju(this.referenceDelegate,this.D),this.Gt=new Vu,this.ze=function(t,e){return new hc(t,e)}(this.D,this.Gt),this.He=new xu,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===h&&li("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Di(Ci.FAILED_PRECONDITION,mc);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Ge.getHighestSequenceNumber(e)}))})).then((function(e){t.Me=new si(e,t.Oe)})).then((function(){t.Le=!0})).catch((function(e){return t.je&&t.je.close(),Promise.reject(e)}))},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return ii(e,void 0,void 0,(function(){return oi(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct((function(n){return ii(e,void 0,void 0,(function(){return oi(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget((function(){return ii(e,void 0,void 0,(function(){return oi(this,(function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return wc(e).put(new eu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.nn(e).next((function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable((function(){return t.Ke(!1)})))}))})).next((function(){return t.sn(e)})).next((function(n){return t.isPrimary&&!n?t.rn(e).next((function(){return!1})):!!n&&t.on(e).next((function(){return!0}))}))})).catch((function(e){if(pu(e))return hi("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return hi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable((function(){return t.Ke(e)})),t.isPrimary=e}))},t.prototype.nn=function(t){var e=this;return bc(t).get(Ks.key).next((function(t){return uu.resolve(e.cn(t))}))},t.prototype.an=function(t){return wc(t).delete(this.clientId)},t.prototype.un=function(){return ii(this,void 0,void 0,(function(){var t,e,n,r,i=this;return oi(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=bu(t,eu.store);return e.kt().next((function(t){var n=i.ln(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return uu.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Je)for(e=0,n=t;e<n.length;e++)r=n[e],this.Je.removeItem(this.fn(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.Ye().then((function(){return t.un()})).then((function(){return t.tn()}))}))},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?uu.resolve(!0):bc(t).get(Ks.key).next((function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new Di(Ci.FAILED_PRECONDITION,mc);return!1}}return!(!e.networkEnabled||!e.inForeground)||wc(t).kt().next((function(t){return void 0===e.ln(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&hi("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return ii(this,void 0,void 0,(function(){var t=this;return oi(this,(function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[Ks.store,eu.store],(function(e){var n=new yu(e,si.o);return t.rn(n).next((function(){return t.an(n)}))}))];case 1:return e.sent(),this.je.close(),this.yn(),[2]}}))}))},t.prototype.ln=function(t,e){var n=this;return t.filter((function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)}))},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return wc(e).kt().next((function(e){return t.ln(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Hu.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;hi("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.je.runTransaction(t,o,iu,(function(o){return i=new yu(o,r.Me?r.Me.next():si.o),"readwrite-primary"===e?r.nn(i).next((function(t){return!!t||r.sn(i)})).next((function(e){if(!e)throw li("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Fe.enqueueRetryable((function(){return r.Ke(!1)})),new Di(Ci.FAILED_PRECONDITION,ou);return n(i)})).next((function(t){return r.on(i).next((function(){return t}))})):r.pn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.pn=function(t){var e=this;return bc(t).get(Ks.key).next((function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Di(Ci.FAILED_PRECONDITION,mc)}))},t.prototype.on=function(t){var e=new Ks(this.clientId,this.allowTabSynchronization,Date.now());return bc(t).put(Ks.key,e)},t.At=function(){return hu.At()},t.prototype.rn=function(t){var e=this,n=bc(t);return n.get(Ks.key).next((function(t){return e.cn(t)?(hi("IndexedDbPersistence","Releasing primary lease."),n.delete(Ks.key)):uu.resolve()}))},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(li("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()}))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return hi("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return li("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){li("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function bc(t){return bu(t,Ks.store)}function wc(t){return bu(t,eu.store)}function _c(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Ec=function(t,e){this.progress=t,this.En=e},Ic=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.An(t,e,r)}))},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t}))},t.prototype.Rn=function(t,e,n){var r=Ba();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)})),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next((function(e){return n.vn(t,e)}))},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(r){var i=n.Rn(t,e,r),o=ja();return i.forEach((function(t,e){e||(e=new oo(t,Ho.min())),o=o.insert(t,e)})),o}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return xi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):Lo(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new xi(e)).next((function(t){var e=Ka();return t instanceof io&&(e=e.insert(t.key,t)),e}))},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=Ka();return this.Gt.getCollectionParents(t,i).next((function(a){return uu.forEach(a,(function(a){var s=function(t,e){return new Co(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.Sn(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Dn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=ma(u,r.get(c),o.localWriteTime);r=h instanceof io?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){qo(e,n)||(r=r.remove(t))})),r}))},t.prototype.Dn=function(t,e,n){for(var r=Wa(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Ea&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof io&&(c=c.insert(t,e))})),c}))},t}(),kc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=Wa(),i=Wa(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Tc=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ho.min())?this.On(t,e):this.Fn.bn(t,r).next((function(o){var a=i.kn(e,o);return(Oo(e)||Ro(e))&&i.Mn(e.limitType,a,r,n)?i.On(t,e):(ci()<=A.DEBUG&&hi("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Bo(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.kn=function(t,e){var n=new Fa(Ko(t));return e.forEach((function(e,r){r instanceof io&&qo(t,r)&&(n=n.add(r))})),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return ci()<=A.DEBUG&&hi("QueryEngine","Using full collection scan to execute query:",Bo(e)),this.Fn.getDocumentsMatchingQuery(t,e,Ho.min())},t}(),Sc=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new xa(bi),this.qn=new uc((function(t){return co(t)}),ho),this.Un=Ho.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new Ic(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Bn)}))},t}();function Ac(t,e,n,r){return new Sc(t,e,n,r)}function Cc(t,e){return ii(this,void 0,void 0,(function(){var n,r,i,o;return oi(this,(function(a){switch(a.label){case 0:return n=gi(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Tn.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new Ic(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Wa(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];a=a.add(y.key)}}return i.bn(t,a).next((function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}}))}))}function Dc(t,e){var n=gi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=uu.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=e,a=n.docVersions.get(t);vi(null!==a),(!o||o.version.compareTo(a)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)}))})),a.next((function(){return t.Tn.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Tn.performConsistencyCheck(t)})).next((function(){return n.Kn.bn(t,r)}))}))}function Nc(t){var e=gi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Ge.getLastRemoteSnapshotVersion(t)}))}function Oc(t,e){var n=gi(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return vi(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.Ge.updateTargetData(t,c))}}}));var s=ja();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Rc(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Ho.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next((function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return uu.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Kn.vn(t,s)}))})).then((function(t){return n.Bn=i,t}))}function Rc(t,e,n,r,i){var o=Wa();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ja();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a instanceof oo&&a.version.isEqual(Ho.min())?(e.removeEntry(n,u),o=o.insert(n,a)):null==s||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):hi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Pc(t,e){var n=gi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)}))}function xc(t,e){var n=gi(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Ge.getTargetData(t,e).next((function(i){return i?(r=i,uu.resolve(r)):n.Ge.allocateTargetId(t).next((function(i){return r=new Eu(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t}))}function Lc(t,e,n){return ii(this,void 0,void 0,(function(){var r,i,o,a;return oi(this,(function(s){switch(s.label){case 0:r=gi(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!pu(a=s.sent()))throw a;return hi("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}}))}))}function Mc(t,e,n){var r=gi(t),i=Ho.min(),o=Wa();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=gi(t),i=r.qn.get(n);return void 0!==i?uu.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,Fo(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:Ho.min(),n?o:Wa())})).next((function(t){return{documents:t,jn:o}}))}))}function Fc(t,e){var n=gi(t),r=gi(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.yt(t,e).next((function(t){return t?t.target:null}))}))}function Uc(t){var e=gi(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=gi(t),i=ja(),o=Su(n),a=pc(e),s=IDBKeyRange.lowerBound(o,!0);return a.qt({index:Qs.readTimeIndex,range:s},(function(t,e){var n=ku(r.D,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{En:i,readTime:Au(o)}}))}(e.Qn,t,e.Un)})).then((function(t){var n=t.En,r=t.readTime;return e.Un=r,n}))}function Vc(t){return ii(this,void 0,void 0,(function(){var e;return oi(this,(function(n){return[2,(e=gi(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=pc(t),n=Ho.min();return e.qt({index:Qs.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Au(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Un=t}))]}))}))}function jc(t,e,n,r){return ii(this,void 0,void 0,(function(){var i,o,a,s,u,c,h,l,f,p;return oi(this,(function(d){switch(d.label){case 0:for(i=gi(t),o=Wa(),a=ja(),s=Ha(),u=0,c=n;u<c.length;u++)h=c[u],l=e.Gn(h.metadata.name),h.document&&(o=o.add(l)),a=a.insert(l,e.zn(h)),s=s.insert(l,e.Hn(h.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,xc(i,function(t){return Fo(No(Oi.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Rc(t,f,a,Ho.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.Ge.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.Ge.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Kn.vn(t,e)}))}))}))]}}))}))}function Bc(t,e,n){return void 0===n&&(n=Wa()),ii(this,void 0,void 0,(function(){var r,i;return oi(this,(function(o){switch(o.label){case 0:return[4,xc(t,Fo(Pu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=gi(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=ls(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var a=r.withResumeToken(Li.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(a.targetId,a),i.Ge.updateTargetData(t,a).next((function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.Ge.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.He.saveNamedQuery(t,e)}))}))]}}))}))}var qc=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return uu.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:ls(n.createTime)}),uu.resolve()},t.prototype.getNamedQuery=function(t,e){return uu.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:Pu(t.bundledQuery),readTime:ls(t.readTime)}}(e)),uu.resolve()},t}(),Kc=function(){function t(){this.Xn=new Fa(Gc.Zn),this.ts=new Fa(Gc.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Gc(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.ss(new Gc(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.os=function(t){var e=this,n=new xi(new Oi([])),r=new Gc(n,t),i=new Gc(n,t+1),o=[];return this.ts.forEachInRange([r,i],(function(t){e.ss(t),o.push(t.key)})),o},t.prototype.cs=function(){var t=this;this.Xn.forEach((function(e){return t.ss(e)}))},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new xi(new Oi([])),n=new Gc(e,t),r=new Gc(e,t+1),i=Wa();return this.ts.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Gc(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Gc=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return xi.comparator(t.key,e.key)||bi(t.hs,e.hs)},t.es=function(t,e){return bi(t.hs,e.hs)||xi.comparator(t.key,e.key)},t}(),Hc=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new Fa(Gc.Zn)}return t.prototype.checkEmpty=function(t){return uu.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++,this.Tn.length>0&&this.Tn[this.Tn.length-1];var o=new wu(i,e,n,r);this.Tn.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.fs=this.fs.add(new Gc(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return uu.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return uu.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.ws(n),i=r<0?0:r;return uu.resolve(this.Tn.length>i?this.Tn[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return uu.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return uu.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Gc(e,0),i=new Gc(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],(function(t){var e=n.ds(t.hs);o.push(e)})),uu.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Fa(bi);return e.forEach((function(t){var e=new Gc(t,0),i=new Gc(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],(function(t){r=r.add(t.hs)}))})),uu.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;xi.isDocumentKey(i)||(i=i.child(""));var o=new Gc(new xi(i),0),a=new Fa(bi);return this.fs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.hs)),!0)}),o),uu.resolve(this._s(a))},t.prototype._s=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.ds(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;vi(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return uu.forEach(e.mutations,(function(i){var o=new Gc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.fs=r}))},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new Gc(e,0),r=this.fs.firstAfterOrEqual(n);return uu.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this.Tn.length,uu.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),zc=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new xa(xi.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:a,readTime:n}),this.size+=a-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return uu.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ba();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)})),uu.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Ka(),i=new xi(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||c instanceof io&&qo(e,c)&&(r=r.insert(c.key,c))}return uu.resolve(r)},t.prototype.ps=function(t,e){return uu.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Wc(this)},t.prototype.getSize=function(t){return uu.resolve(this.size)},t}(),Wc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return ri(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)})),uu.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(cc),Xc=function(){function t(t){this.persistence=t,this.Es=new uc((function(t){return co(t)}),ho),this.lastRemoteSnapshotVersion=Ho.min(),this.highestTargetId=0,this.Ts=0,this.Is=new Kc,this.targetCount=0,this.As=Yu.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach((function(t,n){return e(n)})),uu.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return uu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return uu.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),uu.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),uu.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new Yu(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,uu.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),uu.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,uu.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.Es.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),uu.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return uu.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return uu.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),uu.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),uu.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),uu.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return uu.resolve(n)},t.prototype.containsKey=function(t,e){return uu.resolve(this.Is.containsKey(e))},t}(),Qc=function(){function t(t,e){var n=this;this.Rs={},this.Me=new si(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new Xc(this),this.Gt=new Fu,this.ze=function(t,e){return new zc(t,(function(t){return n.referenceDelegate.bs(t)}))}(this.Gt),this.D=new Iu(e),this.He=new qc(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new Hc(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;hi("MemoryPersistence","Starting transaction:",t);var i=new Yc(this.Me.next());return this.referenceDelegate.vs(),n(i).next((function(t){return r.referenceDelegate.Ps(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Vs=function(t,e){return uu.or(Object.values(this.Rs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Yc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return ri(e,t),e}(au),Jc=function(){function t(t){this.persistence=t,this.Ss=new Kc,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw di()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),uu.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),uu.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),uu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach((function(t){return n.xs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.xs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return uu.forEach(this.xs,(function(r){var i=xi.fromPath(r);return e.Ns(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Ds=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next((function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())}))},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return uu.or([function(){return uu.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),$c=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Zc(t,e){return"firestore_clients_"+t+"_"+e}function th(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function eh(t,e){return"firestore_targets_"+t+"_"+e}$c.UNAUTHENTICATED=new $c(null),$c.GOOGLE_CREDENTIALS=new $c("google-credentials-uid"),$c.FIRST_PARTY=new $c("first-party-uid");var nh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Di(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(li("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),rh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Di(i.error.code,i.error.message)),o?new t(e,i.state,r):(li("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ih=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Qa(),a=0;i&&a<r.activeTargetIds.length;++a)i=Ai(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(li("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),oh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(li("SharedClientState","Failed to parse online state: "+e),null)},t}(),ah=function(){function t(){this.activeTargetIds=Qa()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),sh=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new xa(bi),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=Zc(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new ah),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return ii(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,h,l=this;return oi(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(Zc(this.persistenceKey,r)))&&(o=ih.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(a=this.storage.getItem(this.zs))&&(s=this.Ys(a))&&this.Xs(s),u=0,c=this.Us;u<c.length;u++)h=c[u],this.Bs(h);return this.Us=[],this.window.addEventListener("unload",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(eh(this.persistenceKey,t));if(n){var r=rh.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(eh(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.ei(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return hi("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){hi("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){hi("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(hi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void li("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable((function(){return ii(e,void 0,void 0,(function(){var t,e,r,i,o,a;return oi(this,(function(s){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(a=function(t){var e=si.o;if(null!=t)try{var n=JSON.parse(t);vi("number"==typeof n),e=n}catch(t){li("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==si.o&&this.sequenceNumberHandler(a);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new nh(this.currentUser,t,e,n),i=th(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=th(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){var e={clientId:this.Ms,onlineState:t};this.storage.setItem(this.zs,JSON.stringify(e))},t.prototype.si=function(t,e,n){var r=eh(this.persistenceKey,t),i=new rh(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return ih.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return nh.$s(new $c(i),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return rh.$s(r,e)},t.prototype.Ys=function(t){return oh.$s(t)},t.prototype.hi=function(t){return ii(this,void 0,void 0,(function(){return oi(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(hi("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.mi(a,s).then((function(){n.qs=r}))},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=Qa();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),uh=function(){function t(){this.yi=new ah,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new ah,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),ch=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),hh=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){hi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){hi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),lh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},fh=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),ph=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return ri(e,t),e.prototype.qi=function(t,e,n,r){return new Promise((function(i,o){var a=new ei;a.listenOnce(Yr.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Qr.NO_ERROR:var e=a.getResponseJson();hi("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Qr.TIMEOUT:hi("Connection",'RPC "'+t+'" timed out'),o(new Di(Ci.DEADLINE_EXCEEDED,"Request time out"));break;case Qr.HTTP_ERROR:var n=a.getStatus();if(hi("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ci).indexOf(e)>=0?e:Ci.UNKNOWN}(r.status);o(new Di(s,r.message))}else o(new Di(Ci.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Di(Ci.UNAVAILABLE,"Connection failed."));break;default:di()}}finally{hi("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Qi=function(t,e){var n,r=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new Gr,o=He(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())||"object"==typeof navigator&&"ReactNative"===navigator.product||u().indexOf("Electron/")>=0||function(){var t=u();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||u().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");hi("Connection","Creating WebChannel: "+s,a);var c=i.createWebChannel(s,a),h=!1,l=!1,f=new fh({vi:function(t){l?hi("Connection","Not sending because WebChannel is closed:",t):(h||(hi("Connection","Opening WebChannel transport."),c.open(),h=!0),hi("Connection","WebChannel sending:",t),c.send(t))},Pi:function(){return c.close()}}),p=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return p(c,ti.EventType.OPEN,(function(){l||hi("Connection","WebChannel transport opened.")})),p(c,ti.EventType.CLOSE,(function(){l||(l=!0,hi("Connection","WebChannel transport closed"),f.$i())})),p(c,ti.EventType.ERROR,(function(t){l||(l=!0,fi("Connection","WebChannel transport errored:",t),f.$i(new Di(Ci.UNAVAILABLE,"The operation could not be completed")))})),p(c,ti.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];vi(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){hi("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Aa[t];if(void 0!==e)return Pa(e)}(o),s=i.message;void 0===a&&(a=Ci.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,f.$i(new Di(a,s)),c.close()}else hi("Connection","WebChannel received:",n),f.Fi(n)}})),p(o,Jr.STAT_EVENT,(function(t){t.stat===$r?hi("Connection","Detected buffering proxy"):t.stat===Zr&&hi("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Ni()}),0),f},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Oi=e+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);hi("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then((function(t){return hi("RestConnection","Received: ",t),t}),(function(e){throw fi("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){var n=lh[t];return this.Oi+"/v1/"+e+":"+n},t}());function dh(){return"undefined"!=typeof window?window:null}function vh(){return"undefined"!=typeof document?document:null}function gh(t){return new ss(t,!0)}var mh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&hi("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,(function(){return e.Hi=Date.now(),t()})),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),yh=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new mh(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return ii(this,void 0,void 0,(function(){return oi(this,(function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,(function(){return t.dr()})))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return ii(this,void 0,void 0,(function(){return oi(this,(function(t){return this.ar()?[2,this.close(0)]:[2]}))}))},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return ii(this,void 0,void 0,(function(){return oi(this,(function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===Ci.RESOURCE_EXHAUSTED?(li(e.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===Ci.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then((function(e){t.sr===n&&t.gr(e)}),(function(n){e((function(){var e=new Di(Ci.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)}))}))},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi((function(){n((function(){return e.state=2,e.listener.Vi()}))})),this.stream.Di((function(t){n((function(){return e.pr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi((function(){return ii(t,void 0,void 0,(function(){return oi(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.pr=function(t){return hi("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget((function(){return e.sr===t?n():(hi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),bh=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,a}return ri(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:di()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(vi(void 0===e||"string"==typeof e),Li.fromBase64String(e||"")):(vi(void 0===e||e instanceof Uint8Array),Li.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ci.UNKNOWN:Pa(t.code);return new Di(e,t.message||"")}(s);n=new ts(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=vs(t,r.document.name),o=ls(r.document.updateTime);var s=new Wo({mapValue:{fields:r.document.fields}}),u=(a=new io(i,o,s,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new $a(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=vs(t,r.document),o=r.readTime?ls(r.readTime):Ho.min(),s=new oo(i,o),a=r.removedTargetIds||[],n=new $a([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=vs(t,r.document),o=r.removedTargetIds||[],n=new $a([],o,i,null);else{if(!("filter"in e))return di();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Oa(r),o=h.targetId,n=new Za(o,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return Ho.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ho.min():e.readTime?ls(e.readTime):Ho.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=ys(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=lo(r)?{documents:ks(t,r)}:{query:Ts(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=cs(t,e.resumeToken):e.snapshotVersion.compareTo(Ho.min())>0&&(n.readTime=us(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return di()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.D,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=ys(this.D),e.removeTarget=t,this.wr(e)},e}(yh),wh=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,a.Rr=!1,a}return ri(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(vi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(vi(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ls(t.updateTime):ls(e);return n.isEqual(Ho.min())&&(n=ls(e)),new fa(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ls(t.commitTime);return this.listener.Pr(n,e)}return vi(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=ys(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Es(e.D,t)}))};this.wr(n)},e}(yh),_h=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return ri(e,t),e.prototype.Cr=function(){if(this.Dr)throw new Di(Ci.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.er.Mi(t,e,n,i)})).catch((function(t){throw t.code===Ci.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.er.Ui(t,e,n,i)})).catch((function(t){throw t.code===Ci.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.terminate=function(){this.Dr=!1},e}((function(){})),Eh=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()})))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(li(e),this.Fr=!1):hi("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),Ih=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi((function(t){n.enqueueAndForget((function(){return ii(o,void 0,void 0,(function(){return oi(this,(function(t){switch(t.label){case 0:return Rh(this)?(hi("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return ii(this,void 0,void 0,(function(){var e;return oi(this,(function(n){switch(n.label){case 0:return(e=gi(t)).Qr.add(4),[4,Th(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,kh(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.jr=new Eh(n,r)};function kh(t){return ii(this,void 0,void 0,(function(){var e,n;return oi(this,(function(r){switch(r.label){case 0:if(!Rh(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Th(t){return ii(this,void 0,void 0,(function(){var e,n;return oi(this,(function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Sh(t,e){var n=gi(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),Oh(n)?Nh(n):Wh(n).ar()&&Ch(n,e))}function Ah(t,e){var n=gi(t),r=Wh(n);n.Ur.delete(e),r.ar()&&Dh(n,e),0===n.Ur.size&&(r.ar()?r.lr():Rh(n)&&n.jr.set("Unknown"))}function Ch(t,e){t.Gr.H(e.targetId),Wh(t).Ir(e)}function Dh(t,e){t.Gr.H(e),Wh(t).Ar(e)}function Nh(t){t.Gr=new ns({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),Wh(t).start(),t.jr.Or()}function Oh(t){return Rh(t)&&!Wh(t).cr()&&t.Ur.size>0}function Rh(t){return 0===gi(t).Qr.size}function Ph(t){t.Gr=void 0}function xh(t){return ii(this,void 0,void 0,(function(){return oi(this,(function(e){return t.Ur.forEach((function(e,n){Ch(t,e)})),[2]}))}))}function Lh(t,e){return ii(this,void 0,void 0,(function(){return oi(this,(function(n){return Ph(t),Oh(t)?(t.jr.Lr(e),Nh(t)):t.jr.set("Unknown"),[2]}))}))}function Mh(t,e,n){return ii(this,void 0,void 0,(function(){var r,i,o;return oi(this,(function(a){switch(a.label){case 0:if(t.jr.set("Online"),!(e instanceof ts&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return ii(this,void 0,void 0,(function(){var n,r,i,o;return oi(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.Ur.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),hi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Fh(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof $a?t.Gr.st(e):e instanceof Za?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(Ho.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Nc(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(Li.EMPTY_BYTE_STRING,n.snapshotVersion)),Dh(t,e);var r=new Eu(n.target,e,1,n.sequenceNumber);Ch(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return hi("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Fh(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Fh(t,e,n){return ii(this,void 0,void 0,(function(){var r=this;return oi(this,(function(i){switch(i.label){case 0:if(!pu(e))throw e;return t.Qr.add(1),[4,Th(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return Nc(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return ii(r,void 0,void 0,(function(){return oi(this,(function(e){switch(e.label){case 0:return hi("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,kh(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Uh(t,e){return e().catch((function(n){return Fh(t,n,e)}))}function Vh(t){return ii(this,void 0,void 0,(function(){var e,n,r,i,o;return oi(this,(function(a){switch(a.label){case 0:e=gi(t),n=Xh(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Rh(t)&&t.qr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Pc(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=Xh(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Fh(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return jh(e)&&Bh(e),[2]}}))}))}function jh(t){return Rh(t)&&!Xh(t).cr()&&t.qr.length>0}function Bh(t){Xh(t).start()}function qh(t){return ii(this,void 0,void 0,(function(){return oi(this,(function(e){return Xh(t).Sr(),[2]}))}))}function Kh(t){return ii(this,void 0,void 0,(function(){var e,n,r,i;return oi(this,(function(o){for(e=Xh(t),n=0,r=t.qr;n<r.length;n++)i=r[n],e.vr(i.mutations);return[2]}))}))}function Gh(t,e,n){return ii(this,void 0,void 0,(function(){var r,i;return oi(this,(function(o){switch(o.label){case 0:return r=t.qr.shift(),i=_u.from(r,e,n),[4,Uh(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Vh(t)];case 2:return o.sent(),[2]}}))}))}function Hh(t,e){return ii(this,void 0,void 0,(function(){return oi(this,(function(n){switch(n.label){case 0:return e&&Xh(t).br?[4,function(t,e){return ii(this,void 0,void 0,(function(){var n,r;return oi(this,(function(i){switch(i.label){case 0:return Ra(r=e.code)&&r!==Ci.ABORTED?(n=t.qr.shift(),Xh(t).hr(),[4,Uh(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Vh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return jh(t)&&Bh(t),[2]}}))}))}function zh(t,e){return ii(this,void 0,void 0,(function(){var n;return oi(this,(function(r){switch(r.label){case 0:return n=gi(t),e?(n.Qr.delete(2),[4,kh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,Th(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Wh(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=gi(t);return r.Cr(),new bh(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:xh.bind(null,t),Di:Lh.bind(null,t),Tr:Mh.bind(null,t)}),t.Kr.push((function(n){return ii(e,void 0,void 0,(function(){return oi(this,(function(e){switch(e.label){case 0:return n?(t.zr.hr(),Oh(t)?Nh(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),Ph(t),e.label=3;case 3:return[2]}}))}))}))),t.zr}function Xh(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=gi(t);return r.Cr(),new wh(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:qh.bind(null,t),Di:Hh.bind(null,t),Vr:Kh.bind(null,t),Pr:Gh.bind(null,t)}),t.Kr.push((function(n){return ii(e,void 0,void 0,(function(){return oi(this,(function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,Vh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(hi("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Hr}var Qh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new su,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Di(Ci.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Yh(t,e){if(li("AsyncQueue",e+": "+t),pu(t))return new Di(Ci.UNAVAILABLE,e+": "+t);throw t}var Jh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||xi.comparator(e.key,n.key)}:function(t,e){return xi.comparator(t.key,e.key)},this.keyedMap=Ka(),this.sortedSet=new xa(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),$h=function(){function t(){this.Jr=new xa(xi.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):di():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Zh=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Jh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Vo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),tl=function(){this.Xr=void 0,this.listeners=[]},el=function(){this.queries=new uc((function(t){return jo(t)}),Vo),this.onlineState="Unknown",this.Zr=new Set};function nl(t,e){return ii(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return oi(this,(function(c){switch(c.label){case 0:if(n=gi(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new tl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Xr=c.sent(),[3,4];case 3:return s=c.sent(),u=Yh(s,"Initialization of query '"+Bo(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&al(n),[2]}}))}))}function rl(t,e){return ii(this,void 0,void 0,(function(){var n,r,i,o,a;return oi(this,(function(s){return n=gi(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function il(t,e){for(var n=gi(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].no(a)&&(r=!0);u.Xr=a}}r&&al(n)}function ol(t,e,n){var r=gi(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function al(t){t.Zr.forEach((function(t){t.next()}))}var sl=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Zh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.uo&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){if(t.docChanges.length>0)return!0;var e=this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=Zh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),ul=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),cl=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return vs(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?_s(this.D,t.document,!1):new oo(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return ls(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new cl(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.Gn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||Wa()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return ii(this,void 0,void 0,(function(){var t,e,n,r,i;return oi(this,(function(o){switch(o.label){case 0:return[4,jc(this.localStore,new cl(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Bc(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ec(Object.assign({},this.progress),t))]}}))}))}}();var hl=function(t){this.key=t},ll=function(t){this.key=t},fl=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=Wa(),this.mutatedKeys=Wa(),this.po=Ko(t),this.Eo=new Jh(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new $h,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Oo(this.query)&&i.size===this.query.limit?i.last():null,c=Ro(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=e instanceof io?e:null;l&&(l=qo(n.query,l)?l:null);var f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.Ro(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.po(l,u)>0||c&&n.po(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Oo(this.query)||Ro(this.query))for(;a.size>this.query.limit;){var h=Oo(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Eo:a,Ao:r,Mn:s,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return di()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)})),this.bo(n);var a=e?this.vo():[],s=0===this.yo.size&&this.current?1:0,u=s!==this.mo;return this.mo=s,0!==o.length||u?{snapshot:new Zh(this.query,t.Eo,i,o,t.mutatedKeys,0===s,u,!1),Po:a}:{Po:a}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new $h,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e._o=e._o.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e._o=e._o.delete(t)})),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=Wa(),this.Eo.forEach((function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))}));var n=[];return e.forEach((function(e){t.yo.has(e)||n.push(new ll(e))})),this.yo.forEach((function(t){e.has(t)||n.push(new hl(t))})),n},t.prototype.So=function(t){this._o=t.jn,this.yo=Wa();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return Zh.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),pl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},dl=function(t){this.key=t,this.Co=!1},vl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new uc((function(t){return jo(t)}),Vo),this.$o=new Map,this.Fo=new Set,this.Oo=new xa(xi.comparator),this.ko=new Map,this.Mo=new Kc,this.Lo={},this.Bo=new Map,this.qo=Yu.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function gl(t,e){return ii(this,void 0,void 0,(function(){var n,r,i,o,a,s;return oi(this,(function(u){switch(u.label){case 0:return n=Hl(t),(o=n.No.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Do(),[3,4]):[3,1];case 1:return[4,xc(n.localStore,Fo(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,ml(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&Sh(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function ml(t,e,n,r){return ii(this,void 0,void 0,(function(){var i,o,a,s,u,c;return oi(this,(function(h){switch(h.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return ii(this,void 0,void 0,(function(){var i,o,a;return oi(this,(function(s){switch(s.label){case 0:return(i=e.view.Io(n)).Mn?[4,Mc(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view.Io(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Nl(t,e.targetId,a.Po),a.snapshot)]}}))}))}(t,e,n,r)},[4,Mc(t.localStore,e,!0)];case 1:return i=h.sent(),o=new fl(e,i.jn),a=o.Io(i.documents),s=Ja.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),Nl(t,n,u.Po),c=new pl(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}}))}))}function yl(t,e){return ii(this,void 0,void 0,(function(){var n,r,i;return oi(this,(function(o){switch(o.label){case 0:return n=gi(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter((function(t){return!Vo(t,e)}))),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Lc(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Ah(n.remoteStore,r.targetId),Cl(n,r.targetId)})).catch(ec)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Cl(n,r.targetId),[4,Lc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function bl(t,e,n){return ii(this,void 0,void 0,(function(){var r,i,o,a;return oi(this,(function(s){switch(s.label){case 0:r=zl(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=gi(t),i=ji.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Wa());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Kn.bn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=ya(c,n.get(c.key));null!=h&&a.push(new Ea(c.key,h,Qo(h.proto.mapValue),pa.exists(!0)))}return r.Tn.addMutationBatch(t,i,a,e)}))})).then((function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new xa(bi)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Pl(r,i.changes)];case 3:return s.sent(),[4,Vh(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=Yh(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function wl(t,e){return ii(this,void 0,void 0,(function(){var n,r;return oi(this,(function(i){switch(i.label){case 0:n=gi(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Oc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.ko.get(e);r&&(vi(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?vi(r.Co):t.removedDocuments.size>0&&(vi(r.Co),r.Co=!1))})),[4,Pl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ec(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function _l(t,e,n){var r=gi(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach((function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=gi(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)})),r&&al(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function El(t,e,n){return ii(this,void 0,void 0,(function(){var r,i,o,a,s,u;return oi(this,(function(c){switch(c.label){case 0:return(r=gi(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(a=(a=new xa(xi.comparator)).insert(o,new oo(o,Ho.min())),s=Wa().add(o),u=new Ya(Ho.min(),new Map,new Fa(bi),a,s),[4,wl(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),Rl(r),[3,4];case 2:return[4,Lc(r.localStore,e,!1).then((function(){return Cl(r,e,n)})).catch(ec)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Il(t,e){return ii(this,void 0,void 0,(function(){var n,r,i;return oi(this,(function(o){switch(o.label){case 0:n=gi(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Dc(n.localStore,e)];case 2:return i=o.sent(),Al(n,r,null),Sl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Pl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ec(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function kl(t,e,n){return ii(this,void 0,void 0,(function(){var r,i;return oi(this,(function(o){switch(o.label){case 0:r=gi(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=gi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Tn.lookupMutationBatch(t,e).next((function(e){return vi(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)})).next((function(){return n.Tn.performConsistencyCheck(t)})).next((function(){return n.Kn.bn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Al(r,e,n),Sl(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Pl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ec(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Tl(t,e){return ii(this,void 0,void 0,(function(){var n,r,i,o,a;return oi(this,(function(s){switch(s.label){case 0:Rh((n=gi(t)).remoteStore)||hi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=gi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=s.sent(),a=Yh(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Sl(t,e){(t.Bo.get(e)||[]).forEach((function(t){t.resolve()})),t.Bo.delete(e)}function Al(t,e,n){var r=gi(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function Cl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach((function(e){t.Mo.containsKey(e)||Dl(t,e)}))}function Dl(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(Ah(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),Rl(t))}function Nl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof hl?(t.Mo.addReference(o.key,e),Ol(t,o)):o instanceof ll?(hi("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||Dl(t,o.key)):di()}}function Ol(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(hi("SyncEngine","New document in limbo: "+n),t.Fo.add(r),Rl(t))}function Rl(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new xi(Oi.fromString(e)),r=t.qo.next();t.ko.set(r,new dl(n)),t.Oo=t.Oo.insert(n,r),Sh(t.remoteStore,new Eu(Fo(No(n.path)),r,2,si.o))}}function Pl(t,e,n){return ii(this,void 0,void 0,(function(){var r,i,o,a;return oi(this,(function(s){switch(s.label){case 0:return r=gi(t),i=[],o=[],a=[],r.No.isEmpty()?[3,3]:(r.No.forEach((function(t,s){a.push(r.Qo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=kc.Nn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.xo.Tr(i),[4,function(t,e){return ii(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h;return oi(this,(function(l){switch(l.label){case 0:n=gi(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return uu.forEach(e,(function(e){return uu.forEach(e.Cn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return uu.forEach(e.xn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!pu(r=l.sent()))throw r;return hi("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Bn.get(s),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Bn=n.Bn.insert(s,h));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function xl(t,e){return ii(this,void 0,void 0,(function(){var n,r;return oi(this,(function(i){switch(i.label){case 0:return(n=gi(t)).currentUser.isEqual(e)?[3,3]:(hi("SyncEngine","User change. New user:",e.toKey()),[4,Cc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach((function(t){t.forEach((function(t){t.reject(new Di(Ci.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Pl(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Ll(t,e){var n=gi(t),r=n.ko.get(e);if(r&&r.Co)return Wa().add(r.key);var i=Wa(),o=n.$o.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.No.get(u);i=i.unionWith(c.view.To)}return i}function Ml(t,e){return ii(this,void 0,void 0,(function(){var n,r,i;return oi(this,(function(o){switch(o.label){case 0:return[4,Mc((n=gi(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&Nl(n,e.targetId,i.Po),i)]}}))}))}function Fl(t){return ii(this,void 0,void 0,(function(){var e;return oi(this,(function(n){return[2,Uc((e=gi(t)).localStore).then((function(t){return Pl(e,t)}))]}))}))}function Ul(t,e,n,r){return ii(this,void 0,void 0,(function(){var i,o;return oi(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=gi(t),r=gi(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Jt(t,e).next((function(e){return e?n.Kn.bn(t,e):uu.resolve(null)}))}))}((i=gi(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Vh(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Al(i,e,r||null),Sl(i,e),function(t,e){gi(gi(t).Tn).Xt(e)}(i.localStore,e)):di(),a.label=4;case 4:return[4,Pl(i,o)];case 5:return a.sent(),[3,7];case 6:hi("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function Vl(t,e){return ii(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return oi(this,(function(h){switch(h.label){case 0:return Hl(n=gi(t)),zl(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,jl(n,r.toArray())]);case 1:return i=h.sent(),n.Uo=!0,[4,zh(n.remoteStore,!0)];case 2:for(h.sent(),o=0,a=i;o<a.length;o++)s=a[o],Sh(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(u=[],c=Promise.resolve(),n.$o.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Cl(n,e),Lc(n.localStore,e,!0)})),Ah(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,jl(n,u)];case 5:return h.sent(),function(t){var e=gi(t);e.ko.forEach((function(t,n){Ah(e.remoteStore,n)})),e.Mo.cs(),e.ko=new Map,e.Oo=new xa(xi.comparator)}(n),n.Uo=!1,[4,zh(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function jl(t,e,n){return ii(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h,l,f,p,d,v;return oi(this,(function(g){switch(g.label){case 0:n=gi(t),r=[],i=[],o=0,a=e,g.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.$o.get(s))&&0!==c.length?[4,xc(n.localStore,Fo(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,l=c,g.label=3;case 3:return h<l.length?(f=l[h],p=n.No.get(f),[4,Ml(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Fc(n.localStore,s)];case 8:return v=g.sent(),[4,xc(n.localStore,v)];case 9:return u=g.sent(),[4,ml(n,Bl(v),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}}))}))}function Bl(t){return Do(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ql(t){var e=gi(t);return gi(gi(e.localStore).persistence).gn()}function Kl(t,e,n,r){return ii(this,void 0,void 0,(function(){var i,o,a;return oi(this,(function(s){switch(s.label){case 0:return(i=gi(t)).Uo?(hi("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Uc(i.localStore)];case 3:return o=s.sent(),a=Ya.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Pl(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Lc(i.localStore,e,!0)];case 6:return s.sent(),Cl(i,e,r),[3,8];case 7:di(),s.label=8;case 8:return[2]}}))}))}function Gl(t,e,n){return ii(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f;return oi(this,(function(p){switch(p.label){case 0:if(!(r=Hl(t)).Uo)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(a=o[i],r.$o.has(a)?(hi("SyncEngine","Adding an already active target "+a),[3,5]):[4,Fc(r.localStore,a)]):[3,6];case 2:return s=p.sent(),[4,xc(r.localStore,s)];case 3:return u=p.sent(),[4,ml(r,Bl(s),u.targetId,!1)];case 4:p.sent(),Sh(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return oi(this,(function(e){switch(e.label){case 0:return r.$o.has(t)?[4,Lc(r.localStore,t,!1).then((function(){Ah(r.remoteStore,t),Cl(r,t)})).catch(ec)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Hl(t){var e=gi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ll.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=El.bind(null,e),e.xo.Tr=il.bind(null,e.eventManager),e.xo.Ko=ol.bind(null,e.eventManager),e}function zl(t){var e=gi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Il.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kl.bind(null,e),e}var Wl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return ii(this,void 0,void 0,(function(){return oi(this,(function(e){switch(e.label){case 0:return this.D=gh(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}}))}))},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return Ac(this.persistence,new Tc,t.initialUser,this.D)},t.prototype.Go=function(t){return new Qc(Jc.Cs,this.D)},t.prototype.jo=function(t){return new uh},t.prototype.terminate=function(){return ii(this,void 0,void 0,(function(){return oi(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Xl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return ri(e,t),e.prototype.initialize=function(e){return ii(this,void 0,void 0,(function(){return oi(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Vc(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,zl(this.Jo.syncEngine)];case 4:return n.sent(),[4,Vh(this.Jo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ho=function(t){return Ac(this.persistence,new Tc,t.initialUser,this.D)},e.prototype.zo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new ic(e,t.asyncQueue)},e.prototype.Go=function(t){var e=_c(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?qu.withCacheSize(this.cacheSizeBytes):qu.DEFAULT;return new yc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,dh(),vh(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new uh},e}(Wl),Ql=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return ri(e,t),e.prototype.initialize=function(e){return ii(this,void 0,void 0,(function(){var n,r=this;return oi(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof sh?(this.sharedClientState.syncEngine={wi:Ul.bind(null,n),_i:Kl.bind(null,n),mi:Gl.bind(null,n),gn:ql.bind(null,n),di:Fl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en((function(t){return ii(r,void 0,void 0,(function(){return oi(this,(function(e){switch(e.label){case 0:return[4,Vl(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jo=function(t){var e=dh();if(!sh.At(e))throw new Di(Ci.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=_c(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new sh(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Xl),Yl=function(){function t(){}return t.prototype.initialize=function(t,e){return ii(this,void 0,void 0,(function(){var n=this;return oi(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return _l(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=xl.bind(null,this.syncEngine),[4,zh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new el},t.prototype.createDatastore=function(t){var e,n=gh(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new ph(e));return function(t,e,n){return new _h(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return _l(a.syncEngine,t,0)},o=hh.At()?new hh:new ch,new Ih(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new vl(t,e,n,r,i,o);return a&&(s.Uo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return ii(this,void 0,void 0,(function(){var e;return oi(this,(function(n){switch(n.label){case 0:return e=gi(t),hi("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,Th(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),Jl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),$l=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new su,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then((function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return ii(this,void 0,void 0,(function(){return oi(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Wo=function(){return ii(this,void 0,void 0,(function(){return oi(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}}))}))},t.prototype.ec=function(){return ii(this,void 0,void 0,(function(){var t,e,n,r;return oi(this,(function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new ul(JSON.parse(r),t.length+n)]}}))}))},t.prototype.rc=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.nc=function(){return ii(this,void 0,void 0,(function(){var t,e;return oi(this,(function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.ic=function(t){return ii(this,void 0,void 0,(function(){var e;return oi(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return ii(this,void 0,void 0,(function(){var t,e;return oi(this,(function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return ii(this,void 0,void 0,(function(){var e,n=this;return oi(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Di(Ci.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return ii(this,void 0,void 0,(function(){var n,r,i,o,a,s;return oi(this,(function(u){switch(u.label){case 0:return n=gi(t),r=ys(n.D)+"/documents",i={documents:e.map((function(t){return ds(n.D,t)}))},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){vi(!!e.found),e.found.name,e.found.updateTime;var n=vs(t,e.found.name),r=ls(e.found.updateTime),i=new Wo({mapValue:{fields:e.found.fields}});return new io(n,r,i,{})}(t,e):"missing"in e?function(t,e){vi(!!e.missing),vi(!!e.readTime);var n=vs(t,e.missing),r=ls(e.readTime);return new oo(n,r)}(t,e):di()}(n.D,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());vi(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof oo||t instanceof io?n.recordVersion(t):di()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Da(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return ii(this,void 0,void 0,(function(){var t,e=this;return oi(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=xi.fromPath(n);e.mutations.push(new Na(r,e.precondition(r)))})),[4,function(t,e){return ii(this,void 0,void 0,(function(){var n,r,i;return oi(this,(function(o){switch(o.label){case 0:return n=gi(t),r=ys(n.D)+"/documents",i={writes:e.map((function(t){return Es(n.D,t)}))},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t instanceof io)e=t.version;else{if(!(t instanceof oo))throw di();e=Ho.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Di(Ci.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?pa.updateTime(e):pa.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ho.min()))throw new Di(Ci.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pa.updateTime(e)}return pa.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Zl=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new mh(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi((function(){return ii(t,void 0,void 0,(function(){var t,e,n=this;return oi(this,(function(r){return t=new $l(this.datastore),(e=this.uc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.hc(t)}))}))})).catch((function(t){n.hc(t)})),[2]}))}))}))},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!Ti(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget((function(){return e.ac(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ra(e)}return!1},t}(),tf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=$c.UNAUTHENTICATED,this.clientId=yi.u(),this.credentialListener=function(){},this.receivedInitialUser=new su,this.credentials.setChangeListener((function(t){hi("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}return t.prototype.getConfiguration=function(){return ii(this,void 0,void 0,(function(){return oi(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Di(Ci.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new su;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return ii(t,void 0,void 0,(function(){var t,n;return oi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Yh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function ef(t,e){return ii(this,void 0,void 0,(function(){var n,r,i=this;return oi(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),hi("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return ii(i,void 0,void 0,(function(){return oi(this,(function(t){switch(t.label){case 0:return[4,Cc(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function nf(t,e){return ii(this,void 0,void 0,(function(){var n,r;return oi(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,rf(t)];case 1:return n=i.sent(),hi("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return ii(this,void 0,void 0,(function(){var n,r;return oi(this,(function(i){switch(i.label){case 0:return(n=gi(t)).asyncQueue.verifyOperationInProgress(),hi("RemoteStore","RemoteStore received new credentials"),r=Rh(n),n.Qr.add(3),[4,Th(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,kh(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function rf(t){return ii(this,void 0,void 0,(function(){return oi(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(hi("FirestoreClient","Using default OfflineComponentProvider"),[4,ef(t,new Wl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function of(t){return ii(this,void 0,void 0,(function(){return oi(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(hi("FirestoreClient","Using default OnlineComponentProvider"),[4,nf(t,new Yl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function af(t){return rf(t).then((function(t){return t.persistence}))}function sf(t){return rf(t).then((function(t){return t.localStore}))}function uf(t){return of(t).then((function(t){return t.remoteStore}))}function cf(t){return of(t).then((function(t){return t.syncEngine}))}function hf(t){return ii(this,void 0,void 0,(function(){var e,n;return oi(this,(function(r){switch(r.label){case 0:return[4,of(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=gl.bind(null,e.syncEngine),n.onUnlisten=yl.bind(null,e.syncEngine),n)]}}))}))}function lf(t,e,n){var r=this;void 0===n&&(n={});var i=new su;return t.asyncQueue.enqueueAndForget((function(){return ii(r,void 0,void 0,(function(){var r;return oi(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Jl({next:function(o){e.enqueueAndForget((function(){return rl(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Di(Ci.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Di(Ci.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new sl(No(n.path),o,{includeMetadataChanges:!0,uo:!0});return nl(t,a)},[4,hf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function ff(t,e,n){var r=this;void 0===n&&(n={});var i=new su;return t.asyncQueue.enqueueAndForget((function(){return ii(r,void 0,void 0,(function(){var r;return oi(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Jl({next:function(n){e.enqueueAndForget((function(){return rl(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Di(Ci.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new sl(n,o,{includeMetadataChanges:!0,uo:!0});return nl(t,a)},[4,hf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var pf=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},df=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),vf=new Map,gf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},mf=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t($c.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),yf=function(){function t(t){var e=this;this.fc=null,this.currentUser=$c.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then((function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.dc!==e?(hi("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(vi("string"==typeof n.accessToken),new gf(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return vi(null===t||"string"==typeof t),new $c(t)},t}(),bf=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=$c.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),wf=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new bf(this._c,this.mc))},t.prototype.setChangeListener=function(t){t($c.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function _f(t,e,n){if(!n)throw new Di(Ci.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ef(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Di(Ci.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function If(t,e,n,r){if(!0===e&&!0===r)throw new Di(Ci.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function kf(t){if(!xi.isDocumentKey(t))throw new Di(Ci.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Tf(t){if(xi.isDocumentKey(t))throw new Di(Ci.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Sf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":di()}function Af(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Di(Ci.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Sf(t);throw new Di(Ci.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Cf(t,e){if(e<=0)throw new Di(Ci.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Df=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Di(Ci.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Di(Ci.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,If("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Nf=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Df({}),this._settingsFrozen=!1,t instanceof df?(this._databaseId=t,this._credentials=new mf):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Di(Ci.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new df(t.options.projectId)}(t),this._credentials=new yf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Di(Ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Di(Ci.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Df(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new mf;switch(t.type){case"gapi":var e=t.client;return vi(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new wf(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Di(Ci.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=vf.get(this))&&(hi("ComponentProvider","Removing Datastore"),vf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Of=function(t){this._delegate=t},Rf=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new xf(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Pf=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),xf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,No(r))||this).firestore=e,i._path=r,i.type="collection",i}return ri(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Rf(this.firestore,null,new xi(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Pf);function Lf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Of&&(t=t._delegate),_f("collection","path",e),t instanceof Nf)return Tf(n=Oi.fromString.apply(Oi,ai([e],r))),new xf(t,null,n);if(!(t instanceof Rf||t instanceof xf))throw new Di(Ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Tf(n=Oi.fromString.apply(Oi,ai([t.path],r)).child(Oi.fromString(e))),new xf(t.firestore,null,n)}function Mf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Of&&(t=t._delegate),1===arguments.length&&(e=yi.u()),_f("doc","path",e),t instanceof Nf)return kf(n=Oi.fromString.apply(Oi,ai([e],r))),new Rf(t,null,new xi(n));if(!(t instanceof Rf||t instanceof xf))throw new Di(Ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return kf(n=t._path.child(Oi.fromString.apply(Oi,ai([e],r)))),new Rf(t.firestore,t instanceof xf?t._converter:null,new xi(n))}function Ff(t,e){return t instanceof Of&&(t=t._delegate),e instanceof Of&&(e=e._delegate),(t instanceof Rf||t instanceof xf)&&(e instanceof Rf||e instanceof xf)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Uf(t,e){return t instanceof Of&&(t=t._delegate),e instanceof Of&&(e=e._delegate),t instanceof Pf&&e instanceof Pf&&t.firestore===e.firestore&&Vo(t._query,e._query)&&t._converter===e._converter}var Vf=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new mh(this,"async_queue_retry"),this.bc=function(){var e=vh();e&&hi("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=vh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=vh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise((function(t){})):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.gc.push(t),e.Vc()}))},t.prototype.Vc=function(){return ii(this,void 0,void 0,(function(){var t,e=this;return oi(this,(function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!pu(t=n.sent()))throw t;return hi("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi((function(){return e.Vc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Pc=function(t){var e=this,n=this.yc.then((function(){return e.Ac=!0,t().catch((function(t){throw e.Ic=t,e.Ac=!1,li("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ac=!1,t}))}));return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=Qh.createAndSchedule(this,t,e,n,(function(t){return r.Sc(t)}));return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&di()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return ii(this,void 0,void 0,(function(){var t;return oi(this,(function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then((function(){e.Tc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()}))},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function jf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new su,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Bf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Vf,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return ri(e,t),e.prototype._terminate=function(){return this._firestoreClient||Kf(this),this._firestoreClient.terminate()},e}(Nf);function qf(t){return t._firestoreClient||Kf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Kf(t){var e=t._freezeSettings(),n=function(t,e,n){return new pf(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new tf(t._credentials,t._queue,n)}function Gf(t,e,n){var r=this,i=new su;return t.asyncQueue.enqueue((function(){return ii(r,void 0,void 0,(function(){var r;return oi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ef(t,n)];case 1:return o.sent(),[4,nf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ci.FAILED_PRECONDITION||t.code===Ci.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Hf(t){if(t._initialized||t._terminated)throw new Di(Ci.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var zf=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Di(Ci.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pi(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Wf=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Li.fromBase64String(e))}catch(e){throw new Di(Ci.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Li.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Xf=function(t){this._methodName=t},Qf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Di(Ci.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Di(Ci.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return bi(this._lat,t._lat)||bi(this._long,t._long)},t}(),Yf=/^__.*__$/,Jf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Ea(t,this.data,this.fieldMask,e,this.fieldTransforms):new _a(t,this.data,e,this.fieldTransforms)},t}(),$f=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Ea(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Zf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw di()}}var tp=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return wp(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(Zf(this.Fc)&&Yf.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),ep=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||gh(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new tp({Fc:t,methodName:e,Kc:n,path:Pi.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function np(t){var e=t._freezeSettings(),n=gh(t._databaseId);return new ep(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rp(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);gp("Data must be an object, but it was:",a,r);var s,u,c=dp(r,a);if(o.merge)s=new zo(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=mp(e,f[l],n);if(!a.contains(p))throw new Di(Ci.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");_p(h,p)||h.push(p)}s=new zo(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new Jf(new Wo(c),s,u)}var ip=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ri(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw 1===t.Fc?t.Uc(this._methodName+"() can only appear at the top level of your update data"):t.Uc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Xf);function op(t,e,n){return new tp({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var ap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ri(e,t),e.prototype._toFieldTransform=function(t){return new la(t.path,new ra)},e.prototype.isEqual=function(t){return t instanceof e},e}(Xf),sp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return ri(e,t),e.prototype._toFieldTransform=function(t){var e=op(this,t,!0),n=this.jc.map((function(t){return pp(t,e)})),r=new ia(n);return new la(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xf),up=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return ri(e,t),e.prototype._toFieldTransform=function(t){var e=op(this,t,!0),n=this.jc.map((function(t){return pp(t,e)})),r=new aa(n);return new la(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xf),cp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return ri(e,t),e.prototype._toFieldTransform=function(t){var e=new ua(t.D,$o(t.D,this.Gc));return new la(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Xf);function hp(t,e,n,r){var i=t.Wc(1,e,n);gp("Data must be an object, but it was:",i,r);var o=[],a=new Xo;Ii(r,(function(t,r){var s=bp(e,t,n);r instanceof Of&&(r=r._delegate);var u=i.Bc(s);if(r instanceof ip)o.push(s);else{var c=pp(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new zo(o);return new $f(a.v(),s,i.fieldTransforms)}function lp(t,e,n,r,i,o){var a=t.Wc(1,e,n),s=[mp(e,r,n)],u=[i];if(o.length%2!=0)throw new Di(Ci.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(mp(e,o[c])),u.push(o[c+1]);for(var h=[],l=new Xo,f=s.length-1;f>=0;--f)if(!_p(h,s[f])){var p=s[f],d=u[f];d instanceof Of&&(d=d._delegate);var v=a.Bc(p);if(d instanceof ip)h.push(p);else{var g=pp(d,v);null!=g&&(h.push(p),l.set(p,g))}}var m=new zo(h);return new $f(l.v(),m,a.fieldTransforms)}function fp(t,e,n,r){return void 0===r&&(r=!1),pp(n,t.Wc(r?4:3,e))}function pp(t,e){if(t instanceof Of&&(t=t._delegate),vp(t))return gp("Unsupported field value:",e,t),dp(t,e);if(t instanceof Xf)return function(t,e){if(!Zf(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=pp(o[i],e.qc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Of&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $o(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ji.fromDate(t);return{timestampValue:us(e.D,n)}}if(t instanceof ji)return n=new ji(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:us(e.D,n)};if(t instanceof Qf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wf)return{bytesValue:cs(e.D,t._byteString)};if(t instanceof Rf){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:fs(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+Sf(t))}(t,e)}function dp(t,e){var n={};return ki(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(t,(function(t,r){var i=pp(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function vp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ji||t instanceof Qf||t instanceof Wf||t instanceof Rf||t instanceof Xf)}function gp(t,e,n){if(!vp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Sf(n);throw"an object"===r?e.Uc(t+" a custom object"):e.Uc(t+" "+r)}}function mp(t,e,n){if(e instanceof Of&&(e=e._delegate),e instanceof zf)return e._internalPath;if("string"==typeof e)return bp(t,e);throw wp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var yp=new RegExp("[~\\*/\\[\\]]");function bp(t,e,n){if(e.search(yp)>=0)throw wp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(zf.bind.apply(zf,ai([void 0],e.split(".")))))._internalPath}catch(r){throw wp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function wp(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Di(Ci.INVALID_ARGUMENT,(s+=". ")+t+u)}function _p(t,e){return t.some((function(t){return t.isEqual(e)}))}var Ep=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Rf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Ip(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(kp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Ip=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ri(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Ep);function kp(t,e){return"string"==typeof e?bp(t,e):e instanceof Of?e._delegate._internalPath:e._internalPath}var Tp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Sp=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ri(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Ap(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(kp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Ep),Ap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ri(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Sp),Cp=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Tp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Ap(n._firestore,n._userDataWriter,r.key,r,new Tp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Di(Ci.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new Ap(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Tp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Ap(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Tp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Dp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Dp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return di()}}function Np(t,e){return t instanceof Sp&&e instanceof Sp?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Cp&&e instanceof Cp&&t._firestore===e._firestore&&Uf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Op(t){if(Ro(t)&&0===t.explicitOrderBy.length)throw new Di(Ci.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rp=function(){};function Pp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var xp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return ri(e,t),e.prototype._apply=function(t){var e=np(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Di(Ci.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Bp(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(jp(r,t,l))}s={arrayValue:{values:u}}}else s=jp(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Bp(a,o),s=fp(n,"where",a,"in"===o||"not-in"===o);var f=fo.create(i,o,s);return function(t,e){if(e.g()){var n=xo(t);if(null!==n&&!n.isEqual(e.field))throw new Di(Ci.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Po(t);null!==r&&qp(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Di(Ci.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Di(Ci.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new Pf(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Rp),Lp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return ri(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Di(Ci.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Di(Ci.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ko(e,n);return function(t,e){if(null===Po(t)){var n=xo(t);null!==n&&qp(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new Pf(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Co(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Rp),Mp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return ri(e,t),e.prototype._apply=function(t){return new Pf(t.firestore,t._converter,Uo(t._query,this.Xc,this.Zc))},e}(Rp),Fp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return ri(e,t),e.prototype._apply=function(t){var e=Vp(t,this.type,this.ta,this.ea);return new Pf(t.firestore,t._converter,function(t,e){return new Co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Rp),Up=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return ri(e,t),e.prototype._apply=function(t){var e=Vp(t,this.type,this.ta,this.ea);return new Pf(t.firestore,t._converter,function(t,e){return new Co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Rp);function Vp(t,e,n,r){if(n[0]instanceof Of&&(n[0]=n[0]._delegate),n[0]instanceof Ep)return function(t,e,n,r,i){if(!r)throw new Di(Ci.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Mo(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Ji(e,r.key));else{var c=r.field(u.field);if(Bi(c))throw new Di(Ci.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new Di(Ci.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Eo(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=np(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Di(Ci.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Di(Ci.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Lo(t)&&-1!==c.indexOf("/"))throw new Di(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Oi.fromString(c));if(!xi.isDocumentKey(h))throw new Di(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new xi(h);s.push(Ji(e,l))}else{var f=fp(n,r,c);s.push(f)}}return new Eo(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function jp(t,e,n){if(n instanceof Of&&(n=n._delegate),"string"==typeof n){if(""===n)throw new Di(Ci.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lo(e)&&-1!==n.indexOf("/"))throw new Di(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Oi.fromString(n));if(!xi.isDocumentKey(r))throw new Di(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ji(t,new xi(r))}if(n instanceof Rf)return Ji(t,n._key);throw new Di(Ci.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Sf(n)+".")}function Bp(t,e){if(!Array.isArray(t)||0===t.length)throw new Di(Ci.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Di(Ci.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function qp(t,e,n){if(!n.isEqual(e))throw new Di(Ci.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Kp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Gi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ui(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Vi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw di()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Ii(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Qf(Ui(t.latitude),Ui(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=qi(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ki(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Fi(t);return new ji(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Oi.fromString(t);vi(Fs(n));var r=new df(n.get(1),n.get(3)),i=new xi(n.popFirst(5));return r.isEqual(e)||li("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Gp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Hp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ri(e,t),e.prototype.convertBytes=function(t){return new Wf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Rf(this.firestore,null,e)},e}(Kp),zp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=np(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Wp(t,this._firestore),i=Gp(r._converter,e,n),o=rp(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,pa.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=Wp(t,this._firestore);return e instanceof Of&&(e=e._delegate),o="string"==typeof e||e instanceof zf?lp(this._dataReader,"WriteBatch.update",a._key,e,n,r):hp(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,pa.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Wp(t,this._firestore);return this._mutations=this._mutations.concat(new Da(e._key,pa.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Di(Ci.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Wp(t,e){if(t instanceof Of&&(t=t._delegate),t.firestore!==e)throw new Di(Ci.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Xp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ri(e,t),e.prototype.convertBytes=function(t){return new Wf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Rf(this.firestore,null,e)},e}(Kp);function Qp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Af(t,Rf);var o=Af(t.firestore,Bf),a=np(o);return e instanceof Of&&(e=e._delegate),Jp(o,[("string"==typeof e||e instanceof zf?lp(a,"updateDoc",t._key,e,n,r):hp(a,"updateDoc",t._key,e)).toMutation(t._key,pa.exists(!0))])}function Yp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Of&&(t=t._delegate);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||jf(i[s])||(a=i[s],s++);var u,c,h,l={includeMetadataChanges:a.includeMetadataChanges};if(jf(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Rf)c=Af(t.firestore,Bf),h=No(t._key.path),u={next:function(e){i[s]&&i[s]($p(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=Af(t,Pf);c=Af(p.firestore,Bf),h=p._query;var d=new Xp(c);u={next:function(t){i[s]&&i[s](new Cp(c,d,p,t))},error:i[s+1],complete:i[s+2]},Op(t._query)}return function(t,e,n,r){var i=this,o=new Jl(r),a=new sl(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return ii(i,void 0,void 0,(function(){var e;return oi(this,(function(n){switch(n.label){case 0:return e=nl,[4,hf(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Xo(),t.asyncQueue.enqueueAndForget((function(){return ii(i,void 0,void 0,(function(){var e;return oi(this,(function(n){switch(n.label){case 0:return e=rl,[4,hf(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(qf(c),h,l,u)}function Jp(t,e){return function(t,e){var n=this,r=new su;return t.asyncQueue.enqueueAndForget((function(){return ii(n,void 0,void 0,(function(){var n;return oi(this,(function(i){switch(i.label){case 0:return n=bl,[4,cf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(qf(t),e)}function $p(t,e,n){var r=n.docs.get(e._key),i=new Xp(t);return new Sp(t,i,e._key,r,new Tp(n.hasPendingWrites,n.fromCache),e._converter)}var Zp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return ri(e,t),e.prototype.get=function(e){var n=this,r=Wp(e,this._firestore),i=new Xp(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Sp(n._firestore,i,r._key,t._document,new Tp(!1,!1),r._converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=np(t)}return t.prototype.get=function(t){var e=this,n=Wp(t,this._firestore),r=new Hp(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return di();var i=t[0];if(i instanceof oo)return new Ep(e._firestore,r,n._key,null,n._converter);if(i instanceof io)return new Ep(e._firestore,r,i.key,i,n._converter);throw di()}))},t.prototype.set=function(t,e,n){var r=Wp(t,this._firestore),i=Gp(r._converter,e,n),o=rp(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=Wp(t,this._firestore);return e instanceof Of&&(e=e._delegate),o="string"==typeof e||e instanceof zf?lp(this._dataReader,"Transaction.update",a._key,e,n,r):hp(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=Wp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function td(){if("undefined"==typeof Uint8Array)throw new Di(Ci.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ed(){if("undefined"==typeof atob)throw new Di(Ci.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var nd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ri(e,t),e.fromBase64String=function(t){return ed(),new e(Wf.fromBase64String(t))},e.fromUint8Array=function(t){return td(),new e(Wf.fromUint8Array(t))},e.prototype.toBase64=function(){return ed(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return td(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Of),rd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Hf(t=Af(t,Bf));var n=qf(t),r=t._freezeSettings(),i=new Yl;return Gf(n,i,new Xl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Hf(t=Af(t,Bf));var e=qf(t),n=t._freezeSettings(),r=new Yl;return Gf(e,r,new Ql(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Di(Ci.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new su;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return ii(e,void 0,void 0,(function(){var e;return oi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return ii(this,void 0,void 0,(function(){var e;return oi(this,(function(n){switch(n.label){case 0:return hu.At()?(e=t+"main",[4,hu.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(_c(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),id=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof df||(i.sa=e),i}return ri(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Af(t,Nf))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&fi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return ii(e,void 0,void 0,(function(){var e,n;return oi(this,(function(r){switch(r.label){case 0:return[4,af(t)];case 1:return e=r.sent(),[4,uf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=gi(t);return e.Qr.delete(0),kh(e)}(n))]}}))}))}))}(qf(Af(this._delegate,Bf)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return ii(e,void 0,void 0,(function(){var e,n;return oi(this,(function(r){switch(r.label){case 0:return[4,af(t)];case 1:return e=r.sent(),[4,uf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return ii(this,void 0,void 0,(function(){var e;return oi(this,(function(n){switch(n.label){case 0:return(e=gi(t)).Qr.add(0),[4,Th(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(qf(Af(this._delegate,Bf)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&If("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new su;return t.asyncQueue.enqueueAndForget((function(){return ii(e,void 0,void 0,(function(){var e;return oi(this,(function(r){switch(r.label){case 0:return e=Tl,[4,cf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(qf(Af(this._delegate,Bf)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Jl(e);return t.asyncQueue.enqueueAndForget((function(){return ii(n,void 0,void 0,(function(){var e;return oi(this,(function(n){switch(n.label){case 0:return e=function(t,e){gi(t).Zr.add(e),e.next()},[4,hf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Xo(),t.asyncQueue.enqueueAndForget((function(){return ii(n,void 0,void 0,(function(){var e;return oi(this,(function(n){switch(n.label){case 0:return e=function(t,e){gi(t).Zr.delete(e)},[4,hf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(qf(t=Af(t,Bf)),jf(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new Di(Ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new yd(this,Lf(this._delegate,t))}catch(t){throw hd(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new cd(this,Mf(this._delegate,t))}catch(t){throw hd(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new vd(this,function(t,e){if(t=Af(t,Nf),_f("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Di(Ci.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Pf(t,null,function(t){return new Co(Oi.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw hd(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new su;return t.asyncQueue.enqueueAndForget((function(){return ii(n,void 0,void 0,(function(){var n;return oi(this,(function(i){switch(i.label){case 0:return[4,function(t){return of(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Zl(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(qf(t),(function(n){return e(new Zp(t,n))}))}(this._delegate,(function(n){return t(new ad(e,n))}))},e.prototype.batch=function(){var t=this;return qf(this._delegate),new sd(new zp(this._delegate,(function(e){return Jp(t._delegate,e)})))},e.prototype.loadBundle=function(t){throw new Di(Ci.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Di(Ci.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Of),od=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ri(e,t),e.prototype.convertBytes=function(t){return new nd(new Wf(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return cd.ia(e,this.firestore,null)},e}(Kp),ad=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new od(e),r}return ri(e,t),e.prototype.get=function(t){var e=this,n=bd(t);return this._delegate.get(n).then((function(t){return new pd(e._firestore,new Sp(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))}))},e.prototype.set=function(t,e,n){var r=bd(t);return n?(Ef("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=bd(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,ai([a,e,n],i)),this},e.prototype.delete=function(t){var e=bd(t);return this._delegate.delete(e),this},e}(Of),sd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ri(e,t),e.prototype.set=function(t,e,n){var r=bd(t);return n?(Ef("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=bd(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,ai([a,e,n],i)),this},e.prototype.delete=function(t){var e=bd(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(Of),ud=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return ri(e,t),e.prototype.fromFirestore=function(t,e){var n=new Ap(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new dd(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new od(t),n),i.set(n,o)),o},e}(Of);ud.oa=new WeakMap;var cd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new od(e),r}return ri(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new Di(Ci.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Rf(n._delegate,r,new xi(t)))},e.ia=function(t,n,r){return new e(n,new Rf(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new yd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new yd(this.firestore,Lf(this._delegate,t))}catch(t){throw hd(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Of&&(t=t._delegate),t instanceof Rf&&Ff(this._delegate,t)},e.prototype.set=function(t,e){e=Ef("DocumentReference.set",e);try{return function(t,e,n){t=Af(t,Rf);var r=Af(t.firestore,Bf),i=Gp(t._converter,e,n);return Jp(r,[rp(np(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,pa.none())])}(this._delegate,t,e)}catch(t){throw hd(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Qp(this._delegate,t):Qp.apply(void 0,ai([this._delegate,t,e],n))}catch(t){throw hd(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Jp(Af((t=this._delegate).firestore,Bf),[new Da(t._key,pa.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ld(e),i=fd(e,(function(e){return new pd(t.firestore,new Sp(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}));return Yp(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Af(t,Rf);var e=Af(t.firestore,Bf),n=qf(e),r=new Xp(e);return function(t,e){var n=this,r=new su;return t.asyncQueue.enqueueAndForget((function(){return ii(n,void 0,void 0,(function(){var n;return oi(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ii(this,void 0,void 0,(function(){var r,i;return oi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=gi(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Kn.In(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof io?n.resolve(i):i instanceof oo?n.resolve(null):n.reject(new Di(Ci.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Yh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,sf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Sp(e,r,t._key,n,new Tp(n instanceof io&&n.hasLocalMutations,!0),t._converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Af(t,Rf);var e=Af(t.firestore,Bf);return lf(qf(e),t._key,{source:"server"}).then((function(n){return $p(e,t,n)}))}(this._delegate):function(t){t=Af(t,Rf);var e=Af(t.firestore,Bf);return lf(qf(e),t._key).then((function(n){return $p(e,t,n)}))}(this._delegate)).then((function(t){return new pd(e.firestore,new Sp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(ud.ra(this.firestore,t)):this._delegate.withConverter(null))},e}(Of);function hd(t,e,n){return t.message=t.message.replace(e,n),t}function ld(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!jf(r))return r}return{}}function fd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=jf(t[0])?t[0]:jf(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var pd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return ri(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new cd(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return Np(this._delegate,t._delegate)},e}(Of),dd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ri(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(pd),vd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new od(e),r}return ri(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Pp(this._delegate,function(t,e,n){var r=e,i=kp("where",t);return new xp(i,r,n)}(t,n,r)))}catch(t){throw hd(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Pp(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=kp("orderBy",t);return new Lp(r,n)}(t,n)))}catch(t){throw hd(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Pp(this._delegate,function(t){return Cf("limit",t),new Mp("limit",t,"F")}(t)))}catch(t){throw hd(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Pp(this._delegate,function(t){return Cf("limitToLast",t),new Mp("limitToLast",t,"L")}(t)))}catch(t){throw hd(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Pp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fp("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw hd(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Pp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fp("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw hd(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Pp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Up("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw hd(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Pp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Up("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw hd(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Uf(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Af(t,Pf);var e=Af(t.firestore,Bf),n=qf(e),r=new Xp(e);return function(t,e){var n=this,r=new su;return t.asyncQueue.enqueueAndForget((function(){return ii(n,void 0,void 0,(function(){var n;return oi(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ii(this,void 0,void 0,(function(){var r,i,o,a,s;return oi(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Mc(t,e,!0)];case 1:return s=u.sent(),r=new fl(e,s.jn),i=r.Io(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=Yh(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,sf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Cp(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Af(t,Pf);var e=Af(t.firestore,Bf),n=qf(e),r=new Xp(e);return ff(n,t._query,{source:"server"}).then((function(n){return new Cp(e,r,t,n)}))}(this._delegate):function(t){t=Af(t,Pf);var e=Af(t.firestore,Bf),n=qf(e),r=new Xp(e);return Op(t._query),ff(n,t._query).then((function(n){return new Cp(e,r,t,n)}))}(this._delegate)).then((function(t){return new md(e.firestore,new Cp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ld(e),i=fd(e,(function(e){return new md(t.firestore,new Cp(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Yp(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(ud.ra(this.firestore,t)):this._delegate.withConverter(null))},e}(Of),gd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return ri(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new dd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(Of),md=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return ri(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new vd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new dd(t._firestore,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new gd(e._firestore,t)}))},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new dd(n._firestore,r))}))},e.prototype.isEqual=function(t){return Np(this._delegate,t._delegate)},e}(Of),yd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return ri(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new cd(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new cd(this.firestore,void 0===t?Mf(this._delegate):Mf(this._delegate,t))}catch(t){throw hd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Af(t.firestore,Bf),r=Mf(t),i=Gp(t._converter,e);return Jp(n,[rp(np(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,pa.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new cd(e.firestore,t)}))},e.prototype.isEqual=function(t){return Ff(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(ud.ra(this.firestore,t)):this._delegate.withConverter(null))},e}(vd);function bd(t){return t instanceof Of&&(t=t._delegate),Af(t,Rf)}var wd,_d=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(zf.bind.apply(zf,ai([void 0],e))))||this}return ri(e,t),e.documentId=function(){return new e(Pi.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof Of&&(t=t._delegate),t instanceof zf&&this._delegate._internalPath.isEqual(t._internalPath)},e}(Of),Ed=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ri(e,t),e.serverTimestamp=function(){var t=new ap("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new ip("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sp("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new up("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new cp("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(Of),Id={Firestore:id,GeoPoint:Qf,Timestamp:ji,Blob:nd,Transaction:ad,WriteBatch:sd,DocumentReference:cd,DocumentSnapshot:pd,Query:vd,QueryDocumentSnapshot:dd,QuerySnapshot:md,CollectionReference:yd,FieldPath:_d,FieldValue:Ed,setLogLevel:function(t){var e;e=t,ui.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new E("firestore",(function(t){return function(t,e){return new id(t,new Bf(t,e),new rd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Id)))})(wd=Q),wd.registerVersion("@firebase/firestore","2.2.1");var kd=function(t,e){return(kd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},Td=function(){return(Td=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Sd(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Ad(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Cd(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var Dd="firebasestorage.googleapis.com",Nd=function(t){function e(n,r){var i=t.call(this,Od(n),"Firebase Storage: "+r+" ("+Od(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}kd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._codeEquals=function(t){return Od(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(h);function Od(t){return"storage/"+t}function Rd(){return new Nd("unknown","An unknown error occurred, please check the error payload for server response.")}function Pd(){return new Nd("canceled","User canceled the upload/download.")}function xd(){return new Nd("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ld(t){return new Nd("invalid-argument",t)}function Md(){return new Nd("app-deleted","The Firebase app was deleted.")}function Fd(t){return new Nd("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ud(t,e){return new Nd("invalid-format","String does not match format '"+t+"': "+e)}function Vd(t){throw new Nd("internal-error","Internal error: "+t)}var jd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Bd=function(t,e){this.data=t,this.contentType=e||null};function qd(t,e){switch(t){case jd.RAW:return new Bd(Kd(e));case jd.BASE64:case jd.BASE64URL:return new Bd(Gd(t,e));case jd.DATA_URL:return new Bd((n=new zd(e)).base64?Gd(jd.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Ud(jd.DATA_URL,"Malformed data URL.")}return Kd(e)}(n.rest),new zd(e).contentType)}var n;throw Rd()}function Kd(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Gd(t,e){switch(t){case jd.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Ud(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case jd.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Ud(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw Ud(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var Hd,zd=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Ud(jd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)},Wd={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xd(t){switch(t){case"running":case"pausing":case"canceling":return Wd.RUNNING;case"paused":return Wd.PAUSED;case"success":return Wd.SUCCESS;case"canceled":return Wd.CANCELED;case"error":default:return Wd.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Hd||(Hd={}));var Qd=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Hd.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Hd.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Hd.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Vd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Vd("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Vd("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Vd("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Yd=function(){function t(){}return t.prototype.createXhrIo=function(){return new Qd},t}(),Jd=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new Nd("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=Dd.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],h=c.regex.exec(e);if(h){var l=h[c.indices.bucket],f=h[c.indices.path];f||(f=""),n=new t(l,f),c.postModify(n);break}}if(null==n)throw function(t){return new Nd("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}(),$d=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function Zd(t){return"string"==typeof t||t instanceof String}function tv(t){return ev()&&t instanceof Blob}function ev(){return"undefined"!=typeof Blob}function nv(t,e,n,r){if(r<e)throw Ld("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Ld("Invalid value for '"+t+"'. Expected "+n+" or less.")}function rv(t){return"https://"+Dd+"/v0"+t}function iv(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var ov=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(t){o(t)}else null!==a?((r=Rd()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?Md():Pd()):o(r=new Nd("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new av(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function l(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new av(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Hd.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new av(a,n))}else{var s=n.getErrorCode()===Hd.ABORT;e(!1,new av(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)h.call.apply(h,Cd([null,t],e));else{var r;u()||a?h.call.apply(h,Cd([null,t],e)):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),l(r))}}var p=!1;function d(t){p||(p=!0,c||(null!==o?(t||(s=2),clearTimeout(o),l(0)):t||(s=1)))}return l(0),setTimeout((function(){a=!0,d(!0)}),r),d}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),av=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function sv(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function uv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=sv();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(ev())return new Blob(t);throw new Nd("unsupported-environment","This browser doesn't seem to support creating Blobs")}var cv=function(){function t(t,e){var n=0,r="";tv(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(tv(this.data_)){var r=(i=this.data_,o=e,a=n,i.webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(ev()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(uv.apply(null,r))}var i=e.map((function(t){return Zd(t)?qd(jd.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function hv(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function lv(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function fv(t,e){return e}var pv=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||fv},dv=null;function vv(){if(dv)return dv;var t=[];t.push(new pv("bucket")),t.push(new pv("generation")),t.push(new pv("metageneration")),t.push(new pv("name","fullPath",!0));var e=new pv("name");e.xform=function(t,e){return function(t){return!Zd(t)||t.length<2?t:lv(t)}(e)},t.push(e);var n=new pv("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new pv("timeCreated")),t.push(new pv("updated")),t.push(new pv("md5Hash",null,!0)),t.push(new pv("cacheControl",null,!0)),t.push(new pv("contentDisposition",null,!0)),t.push(new pv("contentEncoding",null,!0)),t.push(new pv("contentLanguage",null,!0)),t.push(new pv("contentType",null,!0)),t.push(new pv("metadata","customMetadata",!0)),dv=t}function gv(t,e,n){var r=hv(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new Jd(n,r);return e._makeStorageReference(i)}})}(r,t),r}(t,r,n)}function mv(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var yv=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function bv(t){if(!t)throw Rd()}function wv(t,e){return function(n,r){var i=gv(t,r,e);return bv(null!==i),i}}function _v(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new Nd("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Nd("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Nd("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Ev(t){var e=_v(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Nd("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function Iv(t,e,n){var r=rv(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new yv(r,"GET",wv(t,n),i);return o.errorHandler=Ev(e),o}function kv(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=rv(e.bucketOnlyServerUrl()),s=t.maxOperationRetryTime,u=new yv(a,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=hv(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new Jd(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];s=t._makeStorageReference(new Jd(e,h.name)),r.items.push(s)}return r}(t,e,r)}(t,e,r);return bv(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=_v(e),u}function Tv(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Sv=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Av(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){bv(!1)}return bv(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Cv=262144;var Dv=function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function Nv(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Ov=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=vv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=Tv(e,r,i),s={name:a.fullPath},u=rv(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=mv(a,n),l=t.maxUploadRetryTime,f=new yv(u,"POST",(function(t){var e;Av(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){bv(!1)}return bv(Zd(e)),e}),l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=_v(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new yv(n,"POST",(function(t){var e=Av(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){bv(!1)}n||bv(!1);var i=Number(n);return bv(!isNaN(i)),new Sv(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=_v(e),o}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Cv*this._chunkMultiplier,n=new Sv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,a,s){var u=new Sv(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Nd("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(l,f);if(null===d)throw xd();var v=e.maxUploadRetryTime,g=new yv(n,"POST",(function(t,n){var i,a=Av(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?wv(e,o)(t,n):null,new Sv(s,c,"final"===a,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=s||null,g.errorHandler=_v(t),g}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var a=t._ref.storage._makeRequest(o,i);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){Cv*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=Iv(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=Tv(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+mv(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=cv.getBlob(c,r,h);if(null===l)throw xd();var f={name:u.fullPath},p=rv(o),d=t.maxUploadRetryTime,v=new yv(p,"POST",wv(t,n),d);return v.urlParams=f,v.headers=a,v.body=l.uploadData(),v.errorHandler=_v(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Pd(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Xd(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Dv(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Xd(this._state)){case Wd.SUCCESS:Nv(this._resolve.bind(null,this.snapshot))();break;case Wd.CANCELED:case Wd.ERROR:Nv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Xd(this._state)){case Wd.RUNNING:case Wd.PAUSED:t.next&&Nv(t.next.bind(t,this.snapshot))();break;case Wd.SUCCESS:t.complete&&Nv(t.complete.bind(t))();break;case Wd.CANCELED:case Wd.ERROR:t.error&&Nv(t.error.bind(t,this._error))();break;default:t.error&&Nv(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Rv=function(){function t(t,e){this._service=t,this._location=e instanceof Jd?e:Jd.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Jd(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return lv(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Jd(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Fd(t)},t}();function Pv(t){var e={prefixes:[],items:[]};return xv(t,e).then((function(){return e}))}function xv(t,e,n){return Sd(this,void 0,void 0,(function(){var r,i,o;return Ad(this,(function(a){switch(a.label){case 0:return[4,Lv(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,xv(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Lv(t,e){return Sd(this,void 0,void 0,(function(){var n,r,i;return Ad(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&nv("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),r=e||{},i=kv(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}}))}))}function Mv(t){return Sd(this,void 0,void 0,(function(){var e,n;return Ad(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=rv(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new yv(r,"GET",function(t,e){return function(n,r){var i=gv(t,r,e);return bv(null!==i),function(t,e){var n=hv(e);if(null===n)return null;if(!Zd(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return rv("/b/"+i(n)+"/o/"+i(r))+iv({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=Ev(e),o}(t.storage,t._location,vv()),[2,t.storage._makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new Nd("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function Fv(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Jd(t._location.bucket,n);return new Rv(t.storage,r)}function Uv(t){return/^[A-Za-z]+:\/\//.test(t)}function Vv(t,e){if(t instanceof Bv){var n=t;if(null==n._bucket)throw new Nd("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Rv(n,n._bucket);return null!=e?Vv(r,e):r}if(void 0!==e){if(e.includes(".."))throw Ld('`path` param cannot contain ".."');return Fv(t,e)}return t}function jv(t,e){if(e&&Uv(e)){if(t instanceof Bv)return new Rv(t,e);throw Ld("To use ref(service, url), the first argument must be a Storage instance.")}return Vv(t,e)}var Bv=function(){function t(t,e,n,r,i){var o,a;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Jd.makeFromBucketSpec(r):null==(a=null==(o=this.app.options)?void 0:o.storageBucket)?null:Jd.makeFromBucketSpec(a)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){nv("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){nv("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Sd(this,void 0,void 0,(function(){var t,e;return Ad(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Rv(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new $d(Md());var r=function(t,e,n,r,i){var o=iv(t.urlParams),a=t.url+o,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(s,i),new ov(a,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}();function qv(t,e){return jv(t,e)}var Kv,Gv,Hv=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),zv=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Hv(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Hv(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Hv(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Hv(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Wv=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Xv(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Xv(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Xv=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return Fv(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new zv(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Ov(t,new cv(e),n)}(t,e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=jd.RAW),this._throwIfRoot("putString");var r=qd(e,t),i=Td({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new zv(new Ov(this._delegate,new cv(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return Pv(t)}(this._delegate).then((function(e){return new Wv(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return Lv(t,e)}(this._delegate,t||void 0).then((function(t){return new Wv(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return function(t){return Sd(this,void 0,void 0,(function(){var e,n;return Ad(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=Iv(t.storage,t._location,vv()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(t)}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Sd(this,void 0,void 0,(function(){var n,r;return Ad(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=rv(e.fullServerUrl()),o=mv(n,r),a=t.maxOperationRetryTime,s=new yv(i,"PATCH",wv(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Ev(e),s}(t.storage,t._location,e,vv()),[2,t.storage._makeRequest(r,n).getPromise()]}}))}))}(t,e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Mv(t)}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return Sd(this,void 0,void 0,(function(){var e,n;return Ad(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=rv(e.fullServerUrl()),r=t.maxOperationRetryTime,i=new yv(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Ev(e),i}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(t)}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Fd(t)},t}(),Qv=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Uv(t))throw Ld("ref() expected a child path but got a URL, use refFromURL instead.");return new Xv(qv(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Uv(t))throw Ld("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Jd.makeFromUrl(t)}catch(t){throw Ld("refFromUrl() expected a valid full URL but got an invalid one.")}return new Xv(qv(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();Gv={TaskState:Wd,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:jd,Storage:Bv,Reference:Xv},(Kv=Q).INTERNAL.registerComponent(new E("storage",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new Qv(r,new Bv(r,i,new Yd,n,Q.SDK_VERSION))}),"PUBLIC").setServiceProps(Gv).setMultipleInstances(!0)),Kv.registerVersion("@firebase/storage","0.4.5"),Q.apps.length?Q.app():Q.initializeApp(r);const Yv=Q;function Jv(t,e=null){e?(t.disabled=!1,t.innerHTML=e):(t.disabled=!0,t.innerHTML='\n            <div class="app-loader">\n                <div class="loader">\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                </div>\n            </div>\n        ')}function $v(t,e=null){const n=t=>{t.classList.remove("show"),setTimeout((()=>t.remove()),500)};let r=document.querySelector(".alert-wrapper");if(!r){const t=document.createElement("div");t.classList.add("alert-wrapper"),document.body.append(t),r=document.querySelector(".alert-wrapper")}const i=document.createElement("div");i.classList.add("alert",e),i.innerHTML=`\n        <div class="content">\n            <p>${t}</p>\n        </div>\n        <div class="button">\n            <button type="button" aria-label="Fechar alerta">\n                <svg xmlns="http://www.w3.org/2000/svg" width="23.524" height="23.524" viewBox="0 0 23.524 23.524">\n                    <g id="cancel" transform="translate(0 0)">\n                    <g id="Grupo_154" data-name="Grupo 154" transform="translate(0 0)">\n                        <path id="Caminho_63" data-name="Caminho 63" d="M12.3,11.76,23.413.647a.379.379,0,0,0-.536-.536L11.764,11.223.652.111A.379.379,0,0,0,.116.647L11.228,11.76.116,22.872a.379.379,0,0,0,.527.546l.009-.009L11.764,12.3,22.877,23.408a.379.379,0,0,0,.536-.536Z" transform="translate(0 0)"/>\n                    </g>\n                    </g>\n                </svg>                      \n            </button>\n        </div>\n        <div class="countdown"></div>\n    `,r.append(i),setTimeout((()=>i.classList.add("show")),100),i.querySelector("button").addEventListener("click",(()=>n(i))),setTimeout((()=>n(i)),7e3)}function Zv(t){const e={};return t.querySelectorAll("[name]").forEach((n=>{switch(n.type){case"select":e[n.name]=n.querySelector("option:selected")?.value;break;case"radio":e[n.name]=t.querySelector(`[name=${n.name}]:checked`)?.value;break;case"checkbox":e[n.name]=[],t.querySelectorAll(`[name=${n.name}]:checked`).forEach((t=>{e[n.name].push(t.value)}));break;default:e[n.name]=n.value}})),e}function tg(t){const e=t.getElementsByTagName("input"),n=t.getElementsByTagName("select"),r=t.getElementsByTagName("textarea");[...e].forEach((t=>{switch(t.type){case"radio":case"checkbox":t.checked=!1;default:t.value=""}})),[...n].forEach((t=>t.selectedIndex=0)),[...r].forEach((t=>t.value=""))}async function eg(t){const e=[];return(await Yv.firestore().collection(t).get()).forEach((t=>{e.push(t.data())})),e}function ng(t){switch(t){case"auth/weak-password":return"A senha deve conter ao menos 6 caracteres";case"auth/email-already-in-use":return"O endereço de e-mail já está em uso por outra conta";case"auth/user-not-found":return"Não há nenhum usuário cadastrado com esse e-mail";case"auth/wrong-password":return"E-mail ou senha incorretos";default:return"Erro ao realizar a operação. Por favor, tente novamente"}}function rg(){return new Promise(((t,e)=>{try{Yv.auth().onAuthStateChanged((e=>t(e)))}catch(t){e(t)}}))}function ig(){const t={};return window.location.search&&window.location.search.split("?")[1].split("&").forEach((e=>{e=e.split("="),t[e[0]]=decodeURIComponent(e[1])})),t}const og=document.querySelector("#home");if(og){const t=Yv.firestore();(e=>{const n=e.querySelector("form");n.addEventListener("submit",(async e=>{e.preventDefault();const{email:r}=Zv(n),i=n.querySelector('button[type="submit"]'),o=i.innerHTML;Jv(i);try{const e=await t.collection("newsletter").where("email","==",r).get(),a=[];if(e.forEach((t=>a.push(t.data()))),a.length>0)throw new Error("O e-mail informado já está cadastrado.");await t.collection("newsletter").add({email:r}),Jv(i,o),$v("Seu e-mail foi cadastrado com sucesso!","success"),tg(n)}catch(t){const e="Não foi possível cadastrar o e-mail. Por favor, tente novamente.";$v(t.message||e,"danger"),Jv(i,o)}}))})(og.querySelector("#newsletter"))}const ag=document.querySelector("#our-services");if(ag){const t=async t=>{const n=await eg("serviceCategories"),r=await eg("services"),i=[];r.forEach((t=>{n.forEach((e=>{t.categoryId===e.id&&i.push({id:t.id,name:t.name,category:e.name,photo:t.photo,description:t.short_description})}))}));const o=t.querySelector(".service-wrapper");o.innerHTML="",i.forEach((t=>{o.append(e(t))}))},e=t=>{let e=document.createElement("div");return e.classList.add("service-card"),e.innerHTML=`\n            <img src="${t.photo}" alt="Service Photo">\n            <div class="tag">${t.category}</div>\n            <div class="content">\n                <h3>${t.name}</h3>\n                <p>${t.description}</p>\n                <div class="buttons">\n                    <a href="/detailed-services.html?id=${t.id}">Detalhes</a>\n                </div>\n            </div>\n        `,e};t(ag)}const sg=document.querySelector("#detailed-services");if(sg){const t=Yv.firestore(),e=async e=>{const n=await t.collection("services").where("id","==",+e).limit(1).get(),r=[];n.forEach((t=>r.push(t.data())));const i=r[0],o=`\n            <div class="breadcrumb">\n                <div>\n                    <a href="services.html">Serviços</a> / <a href="detailed-services.html?id=${i.id}" class="current">${i.name}</a>\n                </div>\n                <hr>\n            </div>\n            <div class="banner">\n                <div>\n                    <div class="overlay">\n                        <h1>${i.name}</h1>\n                    </div>\n                </div>\n            </div>\n            <div class="description">\n                <div>\n                    <p>${i.description}</p>\n                </div>\n                <div class="topic-list">\n                    <h2>Este serviço inclui:</h2>\n                    <ul></ul>\n                </div>\n            </div>\n        `,a=document.createElement("ul");i.topics.forEach((t=>{let e=document.createElement("li");e.innerHTML=`<div></div>${t}`,a.appendChild(e)})),sg.querySelector(".details-wrapper").innerHTML=o,sg.querySelector(".topic-list").appendChild(a)};(()=>{const t=ig().id;t?e(t):window.location.href="/404.html"})()}const ug=document.querySelector("#portifolio");if(ug){const t=t=>{const e=ug.querySelector(".carroussel-wrapper");e.classList.add("open");const n=e.querySelector(".swiper-container"),r=e.querySelector(".swiper-wrapper");e.querySelector(".name").innerHTML=t.name,r.innerHTML="",t.photos.forEach((t=>{let e=document.createElement("div");e.classList.add("swiper-slide"),e.innerHTML=`<img src="${t}" alt="Produto">`,r.append(e)}));const i=new Swiper(n,{slidesPerView:1,lazy:!0,pagination:{el:".swiper-pagination",clickable:!0},keyboard:{enabled:!0,onlyInViewport:!1}});e.querySelector(".button-close").addEventListener("click",(()=>{e.classList.remove("open"),i.destroy()}))},e=async t=>{const e=await eg("portifolio"),r=t.querySelector(".recent-work");r.innerHTML="",e.forEach((t=>{r.append(n(t))}))},n=e=>{let n=document.createElement("div");return n.classList.add("card"),n.innerHTML=`\n            <img src="${e.mainPhoto}" alt="Casamentos">\n            <span>${e.name}</span>\n        `,e.photos.unshift(e.mainPhoto),n.addEventListener("click",(n=>{t(e)})),n};e(ug)}const cg=document.querySelector("#contact-page");if(cg){const t=Yv.firestore(),e=(t,e,n)=>""===e.trim()?($v("Preencha o nome.","danger"),!1):""===t.trim()?($v("Preencha o e-mail.","danger"),!1):""!==n.trim()||($v("Preencha a mensagem.","danger"),!1),n=cg.querySelector(".contact-form > form");n.addEventListener("submit",(async r=>{r.preventDefault();const{email:i,name:o,message:a}=Zv(n);if(!e(i,o,a))return;const s=n.querySelector('button[type="submit"]'),u=s.innerHTML;Jv(s);try{await t.collection("contacts").add({name:o,email:i,message:a}),Jv(s,u),$v("Sua mensagem foi cadastrada com sucesso. Em breve, você receberá um e-mail da nossa equipe!","success"),tg(n)}catch(t){const e="Não foi possível cadastrar a mensagem. Por favor, tente novamente.";$v(t.message||e,"danger"),Jv(s,u)}}))}const hg=document.querySelector("#auth");if(hg){const t=hg.querySelector(".form-toggler li.login"),e=hg.querySelector("form#form-login"),n=hg.querySelector(".form-toggler li.register"),r=hg.querySelector("form#form-register"),i=hg.querySelector(".button-forget-password"),o=hg.querySelector("form#form-reset-password"),a=Yv.auth(),s=()=>{hg.querySelector(".modal-reset-password").classList.toggle("open")},u=(t,e)=>""===t.trim()?($v("Preencha o nome","danger"),!1):""!==e.trim()||($v("Preencha o nome","danger"),!1),c=(t,e,n,r)=>""===t.trim()?($v("Preencha o nome","danger"),!1):""===e.trim()?($v("Preencha o e-mail","danger"),!1):""===n.trim()?($v("Preencha a senha","danger"),!1):""===r.trim()?($v("Preencha a confirmação de senha","danger"),!1):n.length<6?($v("Sua senha deve conter ao menos 6 caracteres.","danger"),!1):n===r||($v("A senha e a confirmação de senha devem ser iguais","danger"),!1),h=t=>""===t.trim()?($v("Preencha o e-mail","danger"),!1):!!t.includes("@")||($v("O endereço de e-mail informado é inválido","danger"),!1),l=async t=>{const e=t.target,n=e.querySelector('button[type="submit"]'),r=n.innerHTML,{email:i,password:o}=Zv(e);if(Jv(n),u(i,o))try{await a.signInWithEmailAndPassword(i,o),window.location.href="/"}catch(t){$v(ng(t.code),"danger"),Jv(n,r)}else Jv(n,r)},f=async t=>{const e=t.target,n=e.querySelector('button[type="submit"]'),r=n.innerHTML,{name:i,email:o,password:s,passwordConfirm:u}=Zv(e);if(Jv(n),c(i,o,s,u))try{const{user:t}=await a.createUserWithEmailAndPassword(o,s);await t.updateProfile({displayName:i}),window.location.href="/"}catch(t){$v(ng(t.code),"danger"),Jv(n,r)}else Jv(n,r)},p=async t=>{const e=t.target,n=e.querySelector('button[type="submit"]'),r=n.innerHTML,{email:i}=Zv(e);if(Jv(n),h(i))try{await a.sendPasswordResetEmail(i),$v("Instruções para recuperar a senha foram enviadas para o seu e-mail","success"),Jv(n,r),s()}catch(t){$v(ng(t.code),"danger"),Jv(n,r)}else Jv(n,r)};t.addEventListener("click",(()=>{t.classList.add("active"),e.classList.add("show"),n.classList.remove("active"),r.classList.remove("show")})),n.addEventListener("click",(()=>{t.classList.remove("active"),e.classList.remove("show"),n.classList.add("active"),r.classList.add("show")})),i.addEventListener("click",s),o.querySelector(".button-close").addEventListener("click",s),e.addEventListener("submit",(t=>{t.preventDefault(),l(t)})),r.addEventListener("submit",(t=>{t.preventDefault(),f(t)})),o.addEventListener("submit",(t=>{t.preventDefault(),p(t)})),(async()=>{const t=await rg(),e=Boolean(ig().action);t&&e?a.signOut():t&&!e&&(window.location.href="/")})()}const lg=document.querySelector("#user-account");if(lg){const t=Yv.auth(),e=()=>{const t=lg.querySelectorAll(".form-toggler li"),e=lg.querySelectorAll(".account-page");t.forEach((n=>{n.addEventListener("click",(r=>{t.forEach((t=>{r.target===t?t.classList.add("active"):t.classList.remove("active")}));const i=n.dataset.section;e.forEach((t=>{t.id===i?t.classList.add("active"):t.classList.remove("active")}))}))}))},n=t=>""!==t.trim()||($v("Preencha o nome","danger"),!1),r=(t,e)=>""===t.trim()?($v("Preencha a nova senha","danger"),!1):""===e.trim()?($v("Preencha a repetição da nova senha","danger"),!1):t.length<5?($v("Sua senha deve conter ao menos 6 caracteres","danger"),!1):t===e||($v("As senhas devem ser iguais","danger"),!1),i=async e=>{const r=e.querySelector('button[type="submit"]'),i=r.innerHTML,{name:o}=Zv(e);if(Jv(r),n(o))try{await t.currentUser.updateProfile({displayName:o}),$v("Alterações salvas com sucesso","success"),Jv(r,i),a()}catch(t){$v(ng(t.code),"danger"),Jv(r,i)}else Jv(r,i)},o=async e=>{const n=e.querySelector('button[type="submit"]'),i=n.innerHTML,{password:o,passwordRepeat:a}=Zv(e);if(Jv(n),r(o,a))try{await t.currentUser.updatePassword(o),$v("Sua senha foi alterada com succeso","success"),Jv(n,i)}catch(t){$v(ng(t.code),"danger"),Jv(n,i)}else Jv(n,i)},a=async()=>{const t=await rg(),e=lg.querySelector("#form-user-data"),n=lg.querySelector(".header"),r=n.querySelector(".picture"),i=n.querySelector(".name"),o=n.querySelector(".email");r.innerHTML=t.displayName.split("")[0],i.innerHTML=t.displayName,o.innerHTML=t.email,e.querySelector('input[name="name"]').value=t.displayName};(async()=>{const t=await rg();if(t){const n=lg.querySelector("#form-user-data"),r=lg.querySelector("#form-alter-password");e(),a(t,n),n.addEventListener("submit",(t=>{t.preventDefault(),i(n)})),r.addEventListener("submit",(t=>{t.preventDefault(),o(r)}))}else window.location.href="/auth.html"})()}const fg=document.querySelector("header#header");if(fg&&!fg.classList.contains("login")){const t=fg.querySelector("#mobile-menu"),e=fg.querySelector("#open-menu"),n=fg.querySelector("#close-menu");e.addEventListener("click",(()=>t.classList.add("open"))),n.addEventListener("click",(()=>t.classList.remove("open"))),(async()=>{if(await rg()){const t=fg.querySelector(".button-signin");t.href="/auth.html?action=logout",t.querySelector("span").innerHTML="Sair",fg.classList.add("login")}})()}function pg(t){return(pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gg(t,e,n){return e&&vg(t.prototype,e),n&&vg(t,n),t}function mg(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bg(t,e)}function yg(t){return(yg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bg(t,e){return(bg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wg(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _g(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Eg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yg(t);if(e){var i=yg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g(this,n)}}function Ig(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yg(t)););return t}function kg(t,e,n){return(kg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Ig(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Tg(t,e,n,r){return(Tg="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=Ig(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function Sg(t,e,n,r,i){if(!Tg(t,e,n,r||t)&&i)throw new Error("failed to set property");return n}function Ag(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Cg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cg(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dg(t){return"string"==typeof t||t instanceof String}n(247);var Ng="NONE",Og="LEFT",Rg="FORCE_LEFT",Pg="RIGHT",xg="FORCE_RIGHT";function Lg(t){switch(t){case Og:return Rg;case Pg:return xg;default:return t}}function Mg(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function Fg(t,e){if(e===t)return!0;var n,r=Array.isArray(e),i=Array.isArray(t);if(r&&i){if(e.length!=t.length)return!1;for(n=0;n<e.length;n++)if(!Fg(e[n],t[n]))return!1;return!0}if(r!=i)return!1;if(e&&t&&"object"===pg(e)&&"object"===pg(t)){var o=e instanceof Date,a=t instanceof Date;if(o&&a)return e.getTime()==t.getTime();if(o!=a)return!1;var s=e instanceof RegExp,u=t instanceof RegExp;if(s&&u)return e.toString()==t.toString();if(s!=u)return!1;var c=Object.keys(e);for(n=0;n<c.length;n++)if(!Object.prototype.hasOwnProperty.call(t,c[n]))return!1;for(n=0;n<c.length;n++)if(!Fg(t[c[n]],e[c[n]]))return!1;return!0}return!(!e||!t||"function"!=typeof e||"function"!=typeof t)&&e.toString()===t.toString()}const Ug=function(){function t(e,n,r,i){for(dg(this,t),this.value=e,this.cursorPos=n,this.oldValue=r,this.oldSelection=i;this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}return gg(t,[{key:"startChangePos",get:function(){return Math.min(this.cursorPos,this.oldSelection.start)}},{key:"insertedCount",get:function(){return this.cursorPos-this.startChangePos}},{key:"inserted",get:function(){return this.value.substr(this.startChangePos,this.insertedCount)}},{key:"removedCount",get:function(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}},{key:"removed",get:function(){return this.oldValue.substr(this.startChangePos,this.removedCount)}},{key:"head",get:function(){return this.value.substring(0,this.startChangePos)}},{key:"tail",get:function(){return this.value.substring(this.startChangePos+this.insertedCount)}},{key:"removeDirection",get:function(){return!this.removedCount||this.insertedCount?Ng:this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos?Pg:Og}}]),t}(),Vg=function(){function t(e){dg(this,t),Object.assign(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},e)}return gg(t,[{key:"aggregate",value:function(t){return this.rawInserted+=t.rawInserted,this.skip=this.skip||t.skip,this.inserted+=t.inserted,this.tailShift+=t.tailShift,this}},{key:"offset",get:function(){return this.tailShift+this.inserted.length}}]),t}(),jg=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;dg(this,t),this.value=e,this.from=n,this.stop=r}return gg(t,[{key:"toString",value:function(){return this.value}},{key:"extend",value:function(t){this.value+=String(t)}},{key:"appendTo",value:function(t){return t.append(this.toString(),{tail:!0}).aggregate(t._appendPlaceholder())}},{key:"state",get:function(){return{value:this.value,from:this.from,stop:this.stop}},set:function(t){Object.assign(this,t)}},{key:"shiftBefore",value:function(t){if(this.from>=t||!this.value.length)return"";var e=this.value[0];return this.value=this.value.slice(1),e}}]),t}(),Bg=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new t.InputMask(e,n)};var qg=function(){function t(e){dg(this,t),this._value="",this._update(Object.assign({},t.DEFAULTS,e)),this.isInitialized=!0}return gg(t,[{key:"updateOptions",value:function(t){Object.keys(t).length&&this.withValueRefresh(this._update.bind(this,t))}},{key:"_update",value:function(t){Object.assign(this,t)}},{key:"state",get:function(){return{_value:this.value}},set:function(t){this._value=t._value}},{key:"reset",value:function(){this._value=""}},{key:"value",get:function(){return this._value},set:function(t){this.resolve(t)}},{key:"resolve",value:function(t){return this.reset(),this.append(t,{input:!0},""),this.doCommit(),this.value}},{key:"unmaskedValue",get:function(){return this.value},set:function(t){this.reset(),this.append(t,{},""),this.doCommit()}},{key:"typedValue",get:function(){return this.doParse(this.value)},set:function(t){this.value=this.doFormat(t)}},{key:"rawInputValue",get:function(){return this.extractInput(0,this.value.length,{raw:!0})},set:function(t){this.reset(),this.append(t,{raw:!0},""),this.doCommit()}},{key:"isComplete",get:function(){return!0}},{key:"nearestInputPos",value:function(t,e){return t}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this.value.slice(t,e)}},{key:"extractTail",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return new jg(this.extractInput(t,e),t)}},{key:"appendTail",value:function(t){return Dg(t)&&(t=new jg(String(t))),t.appendTo(this)}},{key:"_appendCharRaw",value:function(t){return t?(this._value+=t,new Vg({inserted:t,rawInserted:t})):new Vg}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=this.state,i=this._appendCharRaw(this.doPrepare(t,e),e);if(i.inserted){var o,a=!1!==this.doValidate(e);if(a&&null!=n){var s=this.state;this.overwrite&&(o=n.state,n.shiftBefore(this.value.length));var u=this.appendTail(n);(a=u.rawInserted===n.toString())&&u.inserted&&(this.state=s)}a||(i=new Vg,this.state=r,n&&o&&(n.state=o))}return i}},{key:"_appendPlaceholder",value:function(){return new Vg}},{key:"append",value:function(t,e,n){if(!Dg(t))throw new Error("value should be string");var r=new Vg,i=Dg(n)?new jg(String(n)):n;e&&e.tail&&(e._beforeTailState=this.state);for(var o=0;o<t.length;++o)r.aggregate(this._appendChar(t[o],e,i));return null!=i&&(r.tailShift+=this.appendTail(i).tailShift),r}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this._value=this.value.slice(0,t)+this.value.slice(e),new Vg}},{key:"withValueRefresh",value:function(t){if(this._refreshing||!this.isInitialized)return t();this._refreshing=!0;var e=this.rawInputValue,n=this.value,r=t();return this.rawInputValue=e,this.value&&this.value!==n&&0===n.indexOf(this.value)&&this.append(n.slice(this.value.length),{},""),delete this._refreshing,r}},{key:"runIsolated",value:function(t){if(this._isolated||!this.isInitialized)return t(this);this._isolated=!0;var e=this.state,n=t(this);return this.state=e,delete this._isolated,n}},{key:"doPrepare",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.prepare?this.prepare(t,this,e):t}},{key:"doValidate",value:function(t){return(!this.validate||this.validate(this.value,this,t))&&(!this.parent||this.parent.doValidate(t))}},{key:"doCommit",value:function(){this.commit&&this.commit(this.value,this)}},{key:"doFormat",value:function(t){return this.format?this.format(t,this):t}},{key:"doParse",value:function(t){return this.parse?this.parse(t,this):t}},{key:"splice",value:function(t,e,n,r){var i=t+e,o=this.extractTail(i),a=this.nearestInputPos(t,r);return new Vg({tailShift:a-t}).aggregate(this.remove(a)).aggregate(this.append(n,{input:!0},o))}}]),t}();qg.DEFAULTS={format:function(t){return t},parse:function(t){return t}},Bg.Masked=qg;const Kg=qg;function Gg(t){if(null==t)throw new Error("mask property should be defined");return t instanceof RegExp?Bg.MaskedRegExp:Dg(t)?Bg.MaskedPattern:t instanceof Date||t===Date?Bg.MaskedDate:t instanceof Number||"number"==typeof t||t===Number?Bg.MaskedNumber:Array.isArray(t)||t===Array?Bg.MaskedDynamic:Bg.Masked&&t.prototype instanceof Bg.Masked?t:t instanceof Function?Bg.MaskedFunction:t instanceof Bg.Masked?t.constructor:(console.warn("Mask not found for mask",t),Bg.Masked)}function Hg(t){if(Bg.Masked&&t instanceof Bg.Masked)return t;var e=(t=Object.assign({},t)).mask;if(Bg.Masked&&e instanceof Bg.Masked)return e;var n=Gg(e);if(!n)throw new Error("Masked class is not found for provided mask, appropriate module needs to be import manually before creating mask.");return new n(t)}Bg.createMask=Hg;const zg=Hg;var Wg={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./};const Xg=function(){function t(e){dg(this,t);var n=e.mask,r=wg(e,["mask"]);this.masked=zg({mask:n}),Object.assign(this,r)}return gg(t,[{key:"reset",value:function(){this._isFilled=!1,this.masked.reset()}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return 0===t&&e>=1?(this._isFilled=!1,this.masked.remove(t,e)):new Vg}},{key:"value",get:function(){return this.masked.value||(this._isFilled&&!this.isOptional?this.placeholderChar:"")}},{key:"unmaskedValue",get:function(){return this.masked.unmaskedValue}},{key:"isComplete",get:function(){return Boolean(this.masked.value)||this.isOptional}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._isFilled)return new Vg;var n=this.masked.state,r=this.masked._appendChar(t,e);return r.inserted&&!1===this.doValidate(e)&&(r.inserted=r.rawInserted="",this.masked.state=n),r.inserted||this.isOptional||this.lazy||e.input||(r.inserted=this.placeholderChar),r.skip=!r.inserted&&!this.isOptional,this._isFilled=Boolean(r.inserted),r}},{key:"append",value:function(){var t;return(t=this.masked).append.apply(t,arguments)}},{key:"_appendPlaceholder",value:function(){var t=new Vg;return this._isFilled||this.isOptional||(this._isFilled=!0,t.inserted=this.placeholderChar),t}},{key:"extractTail",value:function(){var t;return(t=this.masked).extractTail.apply(t,arguments)}},{key:"appendTail",value:function(){var t;return(t=this.masked).appendTail.apply(t,arguments)}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2?arguments[2]:void 0;return this.masked.extractInput(t,e,n)}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ng,n=0,r=this.value.length,i=Math.min(Math.max(t,n),r);switch(e){case Og:case Rg:return this.isComplete?i:n;case Pg:case xg:return this.isComplete?i:r;case Ng:default:return i}}},{key:"doValidate",value:function(){var t,e;return(t=this.masked).doValidate.apply(t,arguments)&&(!this.parent||(e=this.parent).doValidate.apply(e,arguments))}},{key:"doCommit",value:function(){this.masked.doCommit()}},{key:"state",get:function(){return{masked:this.masked.state,_isFilled:this._isFilled}},set:function(t){this.masked.state=t.masked,this._isFilled=t._isFilled}}]),t}(),Qg=function(){function t(e){dg(this,t),Object.assign(this,e),this._value=""}return gg(t,[{key:"value",get:function(){return this._value}},{key:"unmaskedValue",get:function(){return this.isUnmasking?this.value:""}},{key:"reset",value:function(){this._isRawInput=!1,this._value=""}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length;return this._value=this._value.slice(0,t)+this._value.slice(e),this._value||(this._isRawInput=!1),new Vg}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ng,n=0,r=this._value.length;switch(e){case Og:case Rg:return n;case Ng:case Pg:case xg:default:return r}}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.raw&&this._isRawInput&&this._value.slice(t,e)||""}},{key:"isComplete",get:function(){return!0}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Vg;if(this._value)return n;var r=this.char===t[0],i=r&&(this.isUnmasking||e.input||e.raw)&&!e.tail;return i&&(n.rawInserted=this.char),this._value=n.inserted=this.char,this._isRawInput=i&&(e.raw||e.input),n}},{key:"_appendPlaceholder",value:function(){var t=new Vg;return this._value||(this._value=t.inserted=this.char),t}},{key:"extractTail",value:function(){return arguments.length>1&&void 0!==arguments[1]||this.value.length,new jg("")}},{key:"appendTail",value:function(t){return Dg(t)&&(t=new jg(String(t))),t.appendTo(this)}},{key:"append",value:function(t,e,n){var r=this._appendChar(t,e);return null!=n&&(r.tailShift+=this.appendTail(n).tailShift),r}},{key:"doCommit",value:function(){}},{key:"state",get:function(){return{_value:this._value,_isRawInput:this._isRawInput}},set:function(t){Object.assign(this,t)}}]),t}(),Yg=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;dg(this,t),this.chunks=e,this.from=n}return gg(t,[{key:"toString",value:function(){return this.chunks.map(String).join("")}},{key:"extend",value:function(e){if(String(e)){Dg(e)&&(e=new jg(String(e)));var n=this.chunks[this.chunks.length-1],r=n&&(n.stop===e.stop||null==e.stop)&&e.from===n.from+n.toString().length;if(e instanceof jg)r?n.extend(e.toString()):this.chunks.push(e);else if(e instanceof t){if(null==e.stop)for(var i;e.chunks.length&&null==e.chunks[0].stop;)(i=e.chunks.shift()).from+=e.from,this.extend(i);e.toString()&&(e.stop=e.blockIndex,this.chunks.push(e))}}}},{key:"appendTo",value:function(e){if(!(e instanceof Bg.MaskedPattern))return new jg(this.toString()).appendTo(e);for(var n=new Vg,r=0;r<this.chunks.length&&!n.skip;++r){var i=this.chunks[r],o=e._mapPosToBlock(e.value.length),a=i.stop,s=void 0;if(null!=a&&(!o||o.index<=a)&&((i instanceof t||e._stops.indexOf(a)>=0)&&n.aggregate(e._appendPlaceholder(a)),s=i instanceof t&&e._blocks[a]),s){var u=s.appendTail(i);u.skip=!1,n.aggregate(u),e._value+=u.inserted;var c=i.toString().slice(u.rawInserted.length);c&&n.aggregate(e.append(c,{tail:!0}))}else n.aggregate(e.append(i.toString(),{tail:!0}))}return n}},{key:"state",get:function(){return{chunks:this.chunks.map((function(t){return t.state})),from:this.from,stop:this.stop,blockIndex:this.blockIndex}},set:function(e){var n=e.chunks,r=wg(e,["chunks"]);Object.assign(this,r),this.chunks=n.map((function(e){var n="chunks"in e?new t:new jg;return n.state=e,n}))}},{key:"shiftBefore",value:function(t){if(this.from>=t||!this.chunks.length)return"";for(var e=t-this.from,n=0;n<this.chunks.length;){var r=this.chunks[n],i=r.shiftBefore(e);if(r.toString()){if(!i)break;++n}else this.chunks.splice(n,1);if(i)return i}return""}}]),t}();Bg.MaskedRegExp=function(t){mg(n,t);var e=Eg(n);function n(){return dg(this,n),e.apply(this,arguments)}return gg(n,[{key:"_update",value:function(t){t.mask&&(t.validate=function(e){return e.search(t.mask)>=0}),kg(yg(n.prototype),"_update",this).call(this,t)}}]),n}(Kg);var Jg=function(t){mg(n,t);var e=Eg(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dg(this,n),t.definitions=Object.assign({},Wg,t.definitions),e.call(this,Object.assign({},n.DEFAULTS,t))}return gg(n,[{key:"_update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.definitions=Object.assign({},this.definitions,t.definitions),kg(yg(n.prototype),"_update",this).call(this,t),this._rebuildMask()}},{key:"_rebuildMask",value:function(){var t=this,e=this.definitions;this._blocks=[],this._stops=[],this._maskedBlocks={};var r=this.mask;if(r&&e)for(var i=!1,o=!1,a=0;a<r.length;++a)if(!this.blocks||"continue"!==function(){var e=r.slice(a),n=Object.keys(t.blocks).filter((function(t){return 0===e.indexOf(t)}));n.sort((function(t,e){return e.length-t.length}));var i=n[0];if(i){var o=zg(Object.assign({parent:t,lazy:t.lazy,placeholderChar:t.placeholderChar,overwrite:t.overwrite},t.blocks[i]));return o&&(t._blocks.push(o),t._maskedBlocks[i]||(t._maskedBlocks[i]=[]),t._maskedBlocks[i].push(t._blocks.length-1)),a+=i.length-1,"continue"}}()){var s=r[a],u=s in e;if(s!==n.STOP_CHAR)if("{"!==s&&"}"!==s)if("["!==s&&"]"!==s){if(s===n.ESCAPE_CHAR){if(++a,!(s=r[a]))break;u=!1}var c=u?new Xg({parent:this,lazy:this.lazy,placeholderChar:this.placeholderChar,mask:e[s],isOptional:o}):new Qg({char:s,isUnmasking:i});this._blocks.push(c)}else o=!o;else i=!i;else this._stops.push(this._blocks.length)}}},{key:"state",get:function(){return Object.assign({},kg(yg(n.prototype),"state",this),{_blocks:this._blocks.map((function(t){return t.state}))})},set:function(t){var e=t._blocks,r=wg(t,["_blocks"]);this._blocks.forEach((function(t,n){return t.state=e[n]})),Sg(yg(n.prototype),"state",r,this,!0)}},{key:"reset",value:function(){kg(yg(n.prototype),"reset",this).call(this),this._blocks.forEach((function(t){return t.reset()}))}},{key:"isComplete",get:function(){return this._blocks.every((function(t){return t.isComplete}))}},{key:"doCommit",value:function(){this._blocks.forEach((function(t){return t.doCommit()})),kg(yg(n.prototype),"doCommit",this).call(this)}},{key:"unmaskedValue",get:function(){return this._blocks.reduce((function(t,e){return t+e.unmaskedValue}),"")},set:function(t){Sg(yg(n.prototype),"unmaskedValue",t,this,!0)}},{key:"value",get:function(){return this._blocks.reduce((function(t,e){return t+e.value}),"")},set:function(t){Sg(yg(n.prototype),"value",t,this,!0)}},{key:"appendTail",value:function(t){return kg(yg(n.prototype),"appendTail",this).call(this,t).aggregate(this._appendPlaceholder())}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._mapPosToBlock(this.value.length),r=new Vg;if(!n)return r;for(var i=n.index;;++i){var o=this._blocks[i];if(!o)break;var a=o._appendChar(t,e),s=a.skip;if(r.aggregate(a),s||a.rawInserted)break}return r}},{key:"extractTail",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,r=new Yg;return e===n||this._forEachBlocksInRange(e,n,(function(e,n,i,o){var a=e.extractTail(i,o);a.stop=t._findStopBefore(n),a.from=t._blockStartPos(n),a instanceof Yg&&(a.blockIndex=n),r.extend(a)})),r}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t===e)return"";var r="";return this._forEachBlocksInRange(t,e,(function(t,e,i,o){r+=t.extractInput(i,o,n)})),r}},{key:"_findStopBefore",value:function(t){for(var e,n=0;n<this._stops.length;++n){var r=this._stops[n];if(!(r<=t))break;e=r}return e}},{key:"_appendPlaceholder",value:function(t){var e=this,n=new Vg;if(this.lazy&&null==t)return n;var r=this._mapPosToBlock(this.value.length);if(!r)return n;var i=r.index,o=null!=t?t:this._blocks.length;return this._blocks.slice(i,o).forEach((function(r){if(!r.lazy||null!=t){var i=null!=r._blocks?[r._blocks.length]:[],o=r._appendPlaceholder.apply(r,i);e._value+=o.inserted,n.aggregate(o)}})),n}},{key:"_mapPosToBlock",value:function(t){for(var e="",n=0;n<this._blocks.length;++n){var r=this._blocks[n],i=e.length;if(t<=(e+=r.value).length)return{index:n,offset:t-i}}}},{key:"_blockStartPos",value:function(t){return this._blocks.slice(0,t).reduce((function(t,e){return t+e.value.length}),0)}},{key:"_forEachBlocksInRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2?arguments[2]:void 0,r=this._mapPosToBlock(t);if(r){var i=this._mapPosToBlock(e),o=i&&r.index===i.index,a=r.offset,s=i&&o?i.offset:this._blocks[r.index].value.length;if(n(this._blocks[r.index],r.index,a,s),i&&!o){for(var u=r.index+1;u<i.index;++u)n(this._blocks[u],u,0,this._blocks[u].value.length);n(this._blocks[i.index],i.index,0,i.offset)}}}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,r=kg(yg(n.prototype),"remove",this).call(this,t,e);return this._forEachBlocksInRange(t,e,(function(t,e,n,i){r.aggregate(t.remove(n,i))})),r}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ng,n=this._mapPosToBlock(t)||{index:0,offset:0},r=n.offset,i=n.index,o=this._blocks[i];if(!o)return t;var a=r;0!==a&&a<o.value.length&&(a=o.nearestInputPos(r,Lg(e)));var s=a===o.value.length,u=0===a;if(!u&&!s)return this._blockStartPos(i)+a;var c=s?i+1:i;if(e===Ng){if(c>0){var h=c-1,l=this._blocks[h],f=l.nearestInputPos(0,Ng);if(!l.value.length||f!==l.value.length)return this._blockStartPos(c)}for(var p=c,d=p;d<this._blocks.length;++d){var v=this._blocks[d],g=v.nearestInputPos(0,Ng);if(!v.value.length||g!==v.value.length)return this._blockStartPos(d)+g}for(var m=c-1;m>=0;--m){var y=this._blocks[m],b=y.nearestInputPos(0,Ng);if(!y.value.length||b!==y.value.length)return this._blockStartPos(m)+y.value.length}return t}if(e===Og||e===Rg){for(var w,_=c;_<this._blocks.length;++_)if(this._blocks[_].value){w=_;break}if(null!=w){var E=this._blocks[w],I=E.nearestInputPos(0,Pg);if(0===I&&E.unmaskedValue.length)return this._blockStartPos(w)+I}for(var k,T=-1,S=c-1;S>=0;--S){var A=this._blocks[S],C=A.nearestInputPos(A.value.length,Rg);if(A.value&&0===C||(k=S),0!==C){if(C!==A.value.length)return this._blockStartPos(S)+C;T=S;break}}if(e===Og)for(var D=T+1;D<=Math.min(c,this._blocks.length-1);++D){var N=this._blocks[D],O=N.nearestInputPos(0,Ng),R=this._blockStartPos(D)+O;if(R>t)break;if(O!==N.value.length)return R}if(T>=0)return this._blockStartPos(T)+this._blocks[T].value.length;if(e===Rg||this.lazy&&!this.extractInput()&&!$g(this._blocks[c]))return 0;if(null!=k)return this._blockStartPos(k);for(var P=c;P<this._blocks.length;++P){var x=this._blocks[P],L=x.nearestInputPos(0,Ng);if(!x.value.length||L!==x.value.length)return this._blockStartPos(P)+L}return 0}if(e===Pg||e===xg){for(var M,F,U=c;U<this._blocks.length;++U){var V=this._blocks[U],j=V.nearestInputPos(0,Ng);if(j!==V.value.length){F=this._blockStartPos(U)+j,M=U;break}}if(null!=M&&null!=F){for(var B=M;B<this._blocks.length;++B){var q=this._blocks[B],K=q.nearestInputPos(0,xg);if(K!==q.value.length)return this._blockStartPos(B)+K}return e===xg?this.value.length:F}for(var G=Math.min(c,this._blocks.length-1);G>=0;--G){var H=this._blocks[G],z=H.nearestInputPos(H.value.length,Og);if(0!==z){var W=this._blockStartPos(G)+z;if(W>=t)return W;break}}}return t}},{key:"maskedBlock",value:function(t){return this.maskedBlocks(t)[0]}},{key:"maskedBlocks",value:function(t){var e=this,n=this._maskedBlocks[t];return n?n.map((function(t){return e._blocks[t]})):[]}}]),n}(Kg);function $g(t){if(!t)return!1;var e=t.value;return!e||t.nearestInputPos(0,Ng)!==e.length}Jg.DEFAULTS={lazy:!0,placeholderChar:"_"},Jg.STOP_CHAR="`",Jg.ESCAPE_CHAR="\\",Jg.InputDefinition=Xg,Jg.FixedDefinition=Qg,Bg.MaskedPattern=Jg;const Zg=Jg;var tm=function(t){mg(n,t);var e=Eg(n);function n(){return dg(this,n),e.apply(this,arguments)}return gg(n,[{key:"_matchFrom",get:function(){return this.maxLength-String(this.from).length}},{key:"_update",value:function(t){t=Object.assign({to:this.to||0,from:this.from||0},t);var e=String(t.to).length;null!=t.maxLength&&(e=Math.max(e,t.maxLength)),t.maxLength=e;for(var r=String(t.from).padStart(e,"0"),i=String(t.to).padStart(e,"0"),o=0;o<i.length&&i[o]===r[o];)++o;t.mask=i.slice(0,o).replace(/0/g,"\\0")+"0".repeat(e-o),kg(yg(n.prototype),"_update",this).call(this,t)}},{key:"isComplete",get:function(){return kg(yg(n.prototype),"isComplete",this)&&Boolean(this.value)}},{key:"boundaries",value:function(t){var e="",n="",r=Ag(t.match(/^(\D*)(\d*)(\D*)/)||[],3),i=r[1],o=r[2];return o&&(e="0".repeat(i.length)+o,n="9".repeat(i.length)+o),[e=e.padEnd(this.maxLength,"0"),n=n.padEnd(this.maxLength,"9")]}},{key:"doPrepare",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=kg(yg(n.prototype),"doPrepare",this).call(this,t,e).replace(/\D/g,""),!this.autofix)return t;for(var r=String(this.from).padStart(this.maxLength,"0"),i=String(this.to).padStart(this.maxLength,"0"),o=this.value,a="",s=0;s<t.length;++s){var u=o+a+t[s],c=this.boundaries(u),h=Ag(c,2),l=h[0],f=h[1];Number(f)<this.from?a+=r[u.length-1]:Number(l)>this.to?a+=i[u.length-1]:a+=t[s]}return a}},{key:"doValidate",value:function(){var t,e=this.value,r=e.search(/[^0]/);if(-1===r&&e.length<=this._matchFrom)return!0;for(var i=this.boundaries(e),o=Ag(i,2),a=o[0],s=o[1],u=arguments.length,c=new Array(u),h=0;h<u;h++)c[h]=arguments[h];return this.from<=Number(s)&&Number(a)<=this.to&&(t=kg(yg(n.prototype),"doValidate",this)).call.apply(t,[this].concat(c))}}]),n}(Zg);Bg.MaskedRange=tm;const em=tm;var nm=function(t){mg(n,t);var e=Eg(n);function n(t){return dg(this,n),e.call(this,Object.assign({},n.DEFAULTS,t))}return gg(n,[{key:"_update",value:function(t){t.mask===Date&&delete t.mask,t.pattern&&(t.mask=t.pattern);var e=t.blocks;t.blocks=Object.assign({},n.GET_DEFAULT_BLOCKS()),t.min&&(t.blocks.Y.from=t.min.getFullYear()),t.max&&(t.blocks.Y.to=t.max.getFullYear()),t.min&&t.max&&t.blocks.Y.from===t.blocks.Y.to&&(t.blocks.m.from=t.min.getMonth()+1,t.blocks.m.to=t.max.getMonth()+1,t.blocks.m.from===t.blocks.m.to&&(t.blocks.d.from=t.min.getDate(),t.blocks.d.to=t.max.getDate())),Object.assign(t.blocks,e),Object.keys(t.blocks).forEach((function(e){var n=t.blocks[e];"autofix"in n||(n.autofix=t.autofix)})),kg(yg(n.prototype),"_update",this).call(this,t)}},{key:"doValidate",value:function(){for(var t,e=this.date,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=kg(yg(n.prototype),"doValidate",this)).call.apply(t,[this].concat(i))&&(!this.isComplete||this.isDateExist(this.value)&&null!=e&&(null==this.min||this.min<=e)&&(null==this.max||e<=this.max))}},{key:"isDateExist",value:function(t){return this.format(this.parse(t,this),this).indexOf(t)>=0}},{key:"date",get:function(){return this.typedValue},set:function(t){this.typedValue=t}},{key:"typedValue",get:function(){return this.isComplete?kg(yg(n.prototype),"typedValue",this):null},set:function(t){Sg(yg(n.prototype),"typedValue",t,this,!0)}}]),n}(Zg);nm.DEFAULTS={pattern:"d{.}`m{.}`Y",format:function(t){return[String(t.getDate()).padStart(2,"0"),String(t.getMonth()+1).padStart(2,"0"),t.getFullYear()].join(".")},parse:function(t){var e=Ag(t.split("."),3),n=e[0],r=e[1],i=e[2];return new Date(i,r-1,n)}},nm.GET_DEFAULT_BLOCKS=function(){return{d:{mask:em,from:1,to:31,maxLength:2},m:{mask:em,from:1,to:12,maxLength:2},Y:{mask:em,from:1900,to:9999}}},Bg.MaskedDate=nm;const rm=nm;var im=function(){function t(){dg(this,t)}return gg(t,[{key:"selectionStart",get:function(){var t;try{t=this._unsafeSelectionStart}catch(t){}return null!=t?t:this.value.length}},{key:"selectionEnd",get:function(){var t;try{t=this._unsafeSelectionEnd}catch(t){}return null!=t?t:this.value.length}},{key:"select",value:function(t,e){if(null!=t&&null!=e&&(t!==this.selectionStart||e!==this.selectionEnd))try{this._unsafeSelect(t,e)}catch(t){}}},{key:"_unsafeSelect",value:function(t,e){}},{key:"isActive",get:function(){return!1}},{key:"bindEvents",value:function(t){}},{key:"unbindEvents",value:function(){}}]),t}();Bg.MaskElement=im;const om=im;var am=function(t){mg(n,t);var e=Eg(n);function n(t){var r;return dg(this,n),(r=e.call(this)).input=t,r._handlers={},r}return gg(n,[{key:"rootElement",get:function(){return this.input.getRootNode?this.input.getRootNode():document}},{key:"isActive",get:function(){return this.input===this.rootElement.activeElement}},{key:"_unsafeSelectionStart",get:function(){return this.input.selectionStart}},{key:"_unsafeSelectionEnd",get:function(){return this.input.selectionEnd}},{key:"_unsafeSelect",value:function(t,e){this.input.setSelectionRange(t,e)}},{key:"value",get:function(){return this.input.value},set:function(t){this.input.value=t}},{key:"bindEvents",value:function(t){var e=this;Object.keys(t).forEach((function(r){return e._toggleEventHandler(n.EVENTS_MAP[r],t[r])}))}},{key:"unbindEvents",value:function(){var t=this;Object.keys(this._handlers).forEach((function(e){return t._toggleEventHandler(e)}))}},{key:"_toggleEventHandler",value:function(t,e){this._handlers[t]&&(this.input.removeEventListener(t,this._handlers[t]),delete this._handlers[t]),e&&(this.input.addEventListener(t,e),this._handlers[t]=e)}}]),n}(om);am.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"blur"},Bg.HTMLMaskElement=am;const sm=am;var um=function(t){mg(n,t);var e=Eg(n);function n(){return dg(this,n),e.apply(this,arguments)}return gg(n,[{key:"_unsafeSelectionStart",get:function(){var t=this.rootElement,e=t.getSelection&&t.getSelection();return e&&e.anchorOffset}},{key:"_unsafeSelectionEnd",get:function(){var t=this.rootElement,e=t.getSelection&&t.getSelection();return e&&this._unsafeSelectionStart+String(e).length}},{key:"_unsafeSelect",value:function(t,e){if(this.rootElement.createRange){var n=this.rootElement.createRange();n.setStart(this.input.firstChild||this.input,t),n.setEnd(this.input.lastChild||this.input,e);var r=this.rootElement,i=r.getSelection&&r.getSelection();i&&(i.removeAllRanges(),i.addRange(n))}}},{key:"value",get:function(){return this.input.textContent},set:function(t){this.input.textContent=t}}]),n}(sm);Bg.HTMLContenteditableMaskElement=um;const cm=um;Bg.InputMask=function(){function t(e,n){dg(this,t),this.el=e instanceof om?e:e.isContentEditable&&"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName?new cm(e):new sm(e),this.masked=zg(n),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}return gg(t,[{key:"mask",get:function(){return this.masked.mask},set:function(t){if(!this.maskEquals(t))if(t instanceof Bg.Masked||this.masked.constructor!==Gg(t)){var e=zg({mask:t});e.unmaskedValue=this.masked.unmaskedValue,this.masked=e}else this.masked.updateOptions({mask:t})}},{key:"maskEquals",value:function(t){return null==t||t===this.masked.mask||t===Date&&this.masked instanceof rm}},{key:"value",get:function(){return this._value},set:function(t){this.masked.value=t,this.updateControl(),this.alignCursor()}},{key:"unmaskedValue",get:function(){return this._unmaskedValue},set:function(t){this.masked.unmaskedValue=t,this.updateControl(),this.alignCursor()}},{key:"typedValue",get:function(){return this.masked.typedValue},set:function(t){this.masked.typedValue=t,this.updateControl(),this.alignCursor()}},{key:"_bindEvents",value:function(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange})}},{key:"_unbindEvents",value:function(){this.el&&this.el.unbindEvents()}},{key:"_fireEvent",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=this._listeners[t];i&&i.forEach((function(t){return t.apply(void 0,n)}))}},{key:"selectionStart",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}},{key:"cursorPos",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd},set:function(t){this.el&&this.el.isActive&&(this.el.select(t,t),this._saveSelection())}},{key:"_saveSelection",value:function(){this.value!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}},{key:"updateValue",value:function(){this.masked.value=this.el.value,this._value=this.masked.value}},{key:"updateControl",value:function(){var t=this.masked.unmaskedValue,e=this.masked.value,n=this.unmaskedValue!==t||this.value!==e;this._unmaskedValue=t,this._value=e,this.el.value!==e&&(this.el.value=e),n&&this._fireChangeEvents()}},{key:"updateOptions",value:function(t){var e=t.mask,n=wg(t,["mask"]),r=!this.maskEquals(e),i=!Fg(this.masked,n);r&&(this.mask=e),i&&this.masked.updateOptions(n),(r||i)&&this.updateControl()}},{key:"updateCursor",value:function(t){null!=t&&(this.cursorPos=t,this._delayUpdateCursor(t))}},{key:"_delayUpdateCursor",value:function(t){var e=this;this._abortUpdateCursor(),this._changingCursorPos=t,this._cursorChanging=setTimeout((function(){e.el&&(e.cursorPos=e._changingCursorPos,e._abortUpdateCursor())}),10)}},{key:"_fireChangeEvents",value:function(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}},{key:"_abortUpdateCursor",value:function(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}},{key:"alignCursor",value:function(){this.cursorPos=this.masked.nearestInputPos(this.cursorPos,Og)}},{key:"alignCursorFriendly",value:function(){this.selectionStart===this.cursorPos&&this.alignCursor()}},{key:"on",value:function(t,e){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this}},{key:"off",value:function(t,e){if(!this._listeners[t])return this;if(!e)return delete this._listeners[t],this;var n=this._listeners[t].indexOf(e);return n>=0&&this._listeners[t].splice(n,1),this}},{key:"_onInput",value:function(t){if(this._inputEvent=t,this._abortUpdateCursor(),!this._selection)return this.updateValue();var e=new Ug(this.el.value,this.cursorPos,this.value,this._selection),n=this.masked.rawInputValue,r=this.masked.splice(e.startChangePos,e.removed.length,e.inserted,e.removeDirection).offset,i=n===this.masked.rawInputValue?e.removeDirection:Ng,o=this.masked.nearestInputPos(e.startChangePos+r,i);this.updateControl(),this.updateCursor(o),delete this._inputEvent}},{key:"_onChange",value:function(){this.value!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}},{key:"_onDrop",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"_onFocus",value:function(t){this.alignCursorFriendly()}},{key:"_onClick",value:function(t){this.alignCursorFriendly()}},{key:"destroy",value:function(){this._unbindEvents(),this._listeners.length=0,delete this.el}}]),t}(),Bg.MaskedEnum=function(t){mg(n,t);var e=Eg(n);function n(){return dg(this,n),e.apply(this,arguments)}return gg(n,[{key:"_update",value:function(t){t.enum&&(t.mask="*".repeat(t.enum[0].length)),kg(yg(n.prototype),"_update",this).call(this,t)}},{key:"doValidate",value:function(){for(var t,e=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return this.enum.some((function(t){return t.indexOf(e.unmaskedValue)>=0}))&&(t=kg(yg(n.prototype),"doValidate",this)).call.apply(t,[this].concat(i))}}]),n}(Zg);var hm=function(t){mg(n,t);var e=Eg(n);function n(t){return dg(this,n),e.call(this,Object.assign({},n.DEFAULTS,t))}return gg(n,[{key:"_update",value:function(t){kg(yg(n.prototype),"_update",this).call(this,t),this._updateRegExps()}},{key:"_updateRegExps",value:function(){var t="^"+(this.allowNegative?"[+|\\-]?":""),e=(this.scale?"("+Mg(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExpInput=new RegExp(t+"(0|([1-9]+\\d*))?"+e),this._numberRegExp=new RegExp(t+"\\d*"+e),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(Mg).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(Mg(this.thousandsSeparator),"g")}},{key:"_removeThousandsSeparators",value:function(t){return t.replace(this._thousandsSeparatorRegExp,"")}},{key:"_insertThousandsSeparators",value:function(t){var e=t.split(this.radix);return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),e.join(this.radix)}},{key:"doPrepare",value:function(t){for(var e,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(e=kg(yg(n.prototype),"doPrepare",this)).call.apply(e,[this,this._removeThousandsSeparators(t.replace(this._mapToRadixRegExp,this.radix))].concat(i))}},{key:"_separatorsCount",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,r=0;r<t;++r)this._value.indexOf(this.thousandsSeparator,r)===r&&(++n,e&&(t+=this.thousandsSeparator.length));return n}},{key:"_separatorsCountFromSlice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._value;return this._separatorsCount(this._removeThousandsSeparators(t).length,!0)}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,r=arguments.length>2?arguments[2]:void 0,i=this._adjustRangeWithSeparators(t,e),o=Ag(i,2);return t=o[0],e=o[1],this._removeThousandsSeparators(kg(yg(n.prototype),"extractInput",this).call(this,t,e,r))}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.thousandsSeparator)return kg(yg(n.prototype),"_appendCharRaw",this).call(this,t,e);var r=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value,i=this._separatorsCountFromSlice(r);this._value=this._removeThousandsSeparators(this.value);var o=kg(yg(n.prototype),"_appendCharRaw",this).call(this,t,e);this._value=this._insertThousandsSeparators(this._value);var a=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value,s=this._separatorsCountFromSlice(a);return o.tailShift+=(s-i)*this.thousandsSeparator.length,o.skip=!o.rawInserted&&t===this.thousandsSeparator,o}},{key:"_findSeparatorAround",value:function(t){if(this.thousandsSeparator){var e=t-this.thousandsSeparator.length+1,n=this.value.indexOf(this.thousandsSeparator,e);if(n<=t)return n}return-1}},{key:"_adjustRangeWithSeparators",value:function(t,e){var n=this._findSeparatorAround(t);n>=0&&(t=n);var r=this._findSeparatorAround(e);return r>=0&&(e=r+this.thousandsSeparator.length),[t,e]}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=this._adjustRangeWithSeparators(t,e),r=Ag(n,2);t=r[0],e=r[1];var i=this.value.slice(0,t),o=this.value.slice(e),a=this._separatorsCount(i.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(i+o));var s=this._separatorsCountFromSlice(i);return new Vg({tailShift:(s-a)*this.thousandsSeparator.length})}},{key:"nearestInputPos",value:function(t,e){if(!this.thousandsSeparator)return t;switch(e){case Ng:case Og:case Rg:var n=this._findSeparatorAround(t-1);if(n>=0){var r=n+this.thousandsSeparator.length;if(t<r||this.value.length<=r||e===Rg)return n}break;case Pg:case xg:var i=this._findSeparatorAround(t);if(i>=0)return i+this.thousandsSeparator.length}return t}},{key:"doValidate",value:function(t){var e=(t.input?this._numberRegExpInput:this._numberRegExp).test(this._removeThousandsSeparators(this.value));if(e){var r=this.number;e=e&&!isNaN(r)&&(null==this.min||this.min>=0||this.min<=this.number)&&(null==this.max||this.max<=0||this.number<=this.max)}return e&&kg(yg(n.prototype),"doValidate",this).call(this,t)}},{key:"doCommit",value:function(){if(this.value){var t=this.number,e=t;null!=this.min&&(e=Math.max(e,this.min)),null!=this.max&&(e=Math.min(e,this.max)),e!==t&&(this.unmaskedValue=String(e));var r=this.value;this.normalizeZeros&&(r=this._normalizeZeros(r)),this.padFractionalZeros&&(r=this._padFractionalZeros(r)),this._value=r}kg(yg(n.prototype),"doCommit",this).call(this)}},{key:"_normalizeZeros",value:function(t){var e=this._removeThousandsSeparators(t).split(this.radix);return e[0]=e[0].replace(/^(\D*)(0*)(\d*)/,(function(t,e,n,r){return e+r})),t.length&&!/\d$/.test(e[0])&&(e[0]=e[0]+"0"),e.length>1&&(e[1]=e[1].replace(/0*$/,""),e[1].length||(e.length=1)),this._insertThousandsSeparators(e.join(this.radix))}},{key:"_padFractionalZeros",value:function(t){if(!t)return t;var e=t.split(this.radix);return e.length<2&&e.push(""),e[1]=e[1].padEnd(this.scale,"0"),e.join(this.radix)}},{key:"unmaskedValue",get:function(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,".")},set:function(t){Sg(yg(n.prototype),"unmaskedValue",t.replace(".",this.radix),this,!0)}},{key:"typedValue",get:function(){return Number(this.unmaskedValue)},set:function(t){Sg(yg(n.prototype),"unmaskedValue",String(t),this,!0)}},{key:"number",get:function(){return this.typedValue},set:function(t){this.typedValue=t}},{key:"allowNegative",get:function(){return this.signed||null!=this.min&&this.min<0||null!=this.max&&this.max<0}}]),n}(Kg);hm.DEFAULTS={radix:",",thousandsSeparator:"",mapToRadix:["."],scale:2,signed:!1,normalizeZeros:!0,padFractionalZeros:!1},Bg.MaskedNumber=hm,Bg.MaskedFunction=function(t){mg(n,t);var e=Eg(n);function n(){return dg(this,n),e.apply(this,arguments)}return gg(n,[{key:"_update",value:function(t){t.mask&&(t.validate=t.mask),kg(yg(n.prototype),"_update",this).call(this,t)}}]),n}(Kg);var lm=function(t){mg(n,t);var e=Eg(n);function n(t){var r;return dg(this,n),(r=e.call(this,Object.assign({},n.DEFAULTS,t))).currentMask=null,r}return gg(n,[{key:"_update",value:function(t){kg(yg(n.prototype),"_update",this).call(this,t),"mask"in t&&(this.compiledMasks=Array.isArray(t.mask)?t.mask.map((function(t){return zg(t)})):[])}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._applyDispatch(t,e);return this.currentMask&&n.aggregate(this.currentMask._appendChar(t,e)),n}},{key:"_applyDispatch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.tail&&null!=e._beforeTailState?e._beforeTailState._value:this.value,r=this.rawInputValue,i=e.tail&&null!=e._beforeTailState?e._beforeTailState._rawInputValue:r,o=r.slice(i.length),a=this.currentMask,s=new Vg,u=a&&a.state;if(this.currentMask=this.doDispatch(t,Object.assign({},e)),this.currentMask)if(this.currentMask!==a){if(this.currentMask.reset(),i){var c=this.currentMask.append(i,{raw:!0});s.tailShift=c.inserted.length-n.length}o&&(s.tailShift+=this.currentMask.append(o,{raw:!0,tail:!0}).tailShift)}else this.currentMask.state=u;return s}},{key:"_appendPlaceholder",value:function(){var t=this._applyDispatch.apply(this,arguments);return this.currentMask&&t.aggregate(this.currentMask._appendPlaceholder()),t}},{key:"doDispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.dispatch(t,this,e)}},{key:"doValidate",value:function(){for(var t,e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=kg(yg(n.prototype),"doValidate",this)).call.apply(t,[this].concat(i))&&(!this.currentMask||(e=this.currentMask).doValidate.apply(e,i))}},{key:"reset",value:function(){this.currentMask&&this.currentMask.reset(),this.compiledMasks.forEach((function(t){return t.reset()}))}},{key:"value",get:function(){return this.currentMask?this.currentMask.value:""},set:function(t){Sg(yg(n.prototype),"value",t,this,!0)}},{key:"unmaskedValue",get:function(){return this.currentMask?this.currentMask.unmaskedValue:""},set:function(t){Sg(yg(n.prototype),"unmaskedValue",t,this,!0)}},{key:"typedValue",get:function(){return this.currentMask?this.currentMask.typedValue:""},set:function(t){var e=String(t);this.currentMask&&(this.currentMask.typedValue=t,e=this.currentMask.unmaskedValue),this.unmaskedValue=e}},{key:"isComplete",get:function(){return!!this.currentMask&&this.currentMask.isComplete}},{key:"remove",value:function(){var t,e=new Vg;return this.currentMask&&e.aggregate((t=this.currentMask).remove.apply(t,arguments)).aggregate(this._applyDispatch()),e}},{key:"state",get:function(){return Object.assign({},kg(yg(n.prototype),"state",this),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map((function(t){return t.state})),currentMaskRef:this.currentMask,currentMask:this.currentMask&&this.currentMask.state})},set:function(t){var e=t.compiledMasks,r=t.currentMaskRef,i=t.currentMask,o=wg(t,["compiledMasks","currentMaskRef","currentMask"]);this.compiledMasks.forEach((function(t,n){return t.state=e[n]})),null!=r&&(this.currentMask=r,this.currentMask.state=i),Sg(yg(n.prototype),"state",o,this,!0)}},{key:"extractInput",value:function(){var t;return this.currentMask?(t=this.currentMask).extractInput.apply(t,arguments):""}},{key:"extractTail",value:function(){for(var t,e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return this.currentMask?(t=this.currentMask).extractTail.apply(t,i):(e=kg(yg(n.prototype),"extractTail",this)).call.apply(e,[this].concat(i))}},{key:"doCommit",value:function(){this.currentMask&&this.currentMask.doCommit(),kg(yg(n.prototype),"doCommit",this).call(this)}},{key:"nearestInputPos",value:function(){for(var t,e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return this.currentMask?(t=this.currentMask).nearestInputPos.apply(t,i):(e=kg(yg(n.prototype),"nearestInputPos",this)).call.apply(e,[this].concat(i))}},{key:"overwrite",get:function(){return this.currentMask?this.currentMask.overwrite:kg(yg(n.prototype),"overwrite",this)},set:function(t){console.warn('"overwrite" option is not available in dynamic mask, use this option in siblings')}}]),n}(Kg);lm.DEFAULTS={dispatch:function(t,e,n){if(e.compiledMasks.length){var r=e.rawInputValue,i=e.compiledMasks.map((function(e,i){return e.reset(),e.append(r,{raw:!0}),e.append(t,n),{weight:e.rawInputValue.length,index:i}}));return i.sort((function(t,e){return e.weight-t.weight})),e.compiledMasks[i[0].index]}}},Bg.MaskedDynamic=lm;var fm={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function pm(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fm.MASKED,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fm.MASKED,r=zg(t);return function(t){return r.runIsolated((function(r){return r[e]=t,r[n]}))}}Bg.PIPE_TYPE=fm,Bg.createPipe=pm,Bg.pipe=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return pm.apply(void 0,n)(t)};try{globalThis.IMask=Bg}catch(wd){}const dm=document.querySelector(".budget-form");if(dm){const t=Yv.firestore(),e=(t,e,n)=>""===e.trim()?($v("Preencha o nome","danger"),!1):""===t.trim()?($v("Preencha o e-mail","danger"),!1):t.includes("@")?""!==n.trim()||($v("Preencha o telefone","danger"),!1):($v("O e-mail informado é inválido","danger"),!1),n=async n=>{const{email:r,name:i,phone:o}=Zv(n);if(!e(r,i,o))return;const a=n.querySelector('button[type="submit"]'),s=a.innerHTML;Jv(a);try{const e=await t.collection("budgetSolicitation").where("email","==",r).get(),u=[];if(e.forEach((t=>u.push(t.data()))),u.length>0)throw new Error("O e-mail informado já possui uma solicitação de orçamento cadastrada");await t.collection("budgetSolicitation").add({name:i,email:r,phone:o}),Jv(a,s),$v("Solicitação cadastrada com sucesso! Em breve, você receberá um e-mail da nossa equipe","success"),tg(n)}catch(t){const e="Não foi possível cadastrar a solicitação. Por favor, tente novamente";$v(t.message||e,"danger"),Jv(a,s)}};(()=>{const t=dm.querySelector("form"),e=t.querySelector("input[type=tel]");new Bg(e,{mask:"(00) [0]0000-0000"}),t.addEventListener("submit",(e=>{e.preventDefault(),n(t)}))})()}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n(831)})();
//# sourceMappingURL=app.js.map